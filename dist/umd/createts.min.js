!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.createts=e():t.createts=e()}(window,(function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=35)}([function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.prototype.calculate=function(t){return t},t}();e.Linear=o;var s=function(){function t(t){this.pow=t}return t.prototype.calculate=function(t){return Math.pow(t,this.pow)},t}();e.PowIn=s;var a=function(){function t(t){this.pow=t}return t.prototype.calculate=function(t){return 1-Math.pow(1-t,this.pow)},t}();e.PowOut=a;var h=function(){function t(t){this.pow=t}return t.prototype.calculate=function(t){return(t*=2)<1?.5*Math.pow(t,this.pow):1-.5*Math.abs(Math.pow(2-t,this.pow))},t}();e.PowInOut=h;var u=function(){function t(){}return t.prototype.calculate=function(t){return 1-Math.cos(t*Math.PI/2)},t}();e.SineIn=u;var c=function(){function t(){}return t.prototype.calculate=function(t){return Math.sin(t*Math.PI/2)},t}();e.SineOut=c;var l=function(){function t(){}return t.prototype.calculate=function(t){return-.5*(Math.cos(Math.PI*t)-1)},t}();e.SineInOut=l;var p=function(){function t(t){this.amount=t}return t.prototype.calculate=function(t){return t*t*((this.amount+1)*t-this.amount)},t}();e.BackIn=p;var f=function(){function t(t){this.amount=t}return t.prototype.calculate=function(t){return--t*t*((this.amount+1)*t+this.amount)+1},t}();e.BackOut=f;var d=function(){function t(t){this.amount=t}return t.prototype.calculate=function(t){return(t*=2)<1?t*t*((this.amount+1)*t-this.amount)*.5:.5*((t-=2)*t*((this.amount+1)*t+this.amount)+2)},t}();e.BackInOut=d;var g=function(){function t(){}return t.prototype.calculate=function(t){return-(Math.sqrt(1-t*t)-1)},t}();e.CircIn=g;var v=function(){function t(){}return t.prototype.calculate=function(t){return Math.sqrt(1- --t*t)},t}();e.CircOut=v;var y=function(){function t(){}return t.prototype.calculate=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},t}();e.CircInOut=y;var m=function(){function t(){}return t.prototype.calculateOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},t}(),E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.calculate=function(e){return t.prototype.calculateOut.call(this,e)},e}(m);e.BounceOut=E;var T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.calculate=function(e){return 1-t.prototype.calculateOut.call(this,1-e)},e}(m);e.BounceIn=T;var R=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.calculate=function(e){return e<.5?.5*t.prototype.calculate.call(this,2*e):.5*t.prototype.calculateOut.call(this,2*e-1)+.5},e}(T);e.BounceInOut=R;var b=2*Math.PI,w=function(){function t(t,e){this.amplitude=t,this.period=e,this.s=this.period/b*Math.asin(1/this.amplitude)}return t.prototype.calculate=function(t){return 0===t||1===t?t:-this.amplitude*Math.pow(2,10*(t-=1))*Math.sin((t-this.s)*b/this.period)},t}();e.ElasticIn=w;var A=function(){function t(t,e){this.amplitude=t,this.period=e,this.s=this.period/b*Math.asin(1/this.amplitude)}return t.prototype.calculate=function(t){return 0===t||1===t?t:this.amplitude*Math.pow(2,-10*t)*Math.sin((t-this.s)*b/this.period)+1},t}();e.ElasticOut=A;var O=function(){function t(t,e){this.amplitude=t,this.period=e,this.s=this.period/b*Math.asin(1/this.amplitude)}return t.prototype.calculate=function(t){return(t*=2)<1?this.amplitude*Math.pow(2,10*(t-=1))*Math.sin((t-this.s)*b/this.period)*-.5:this.amplitude*Math.pow(2,-10*(t-=1))*Math.sin((t-this.s)*b/this.period)*.5+1},t}();e.ElasticInOut=O;var B=function(){function t(){}return t.register=function(t,e){this.algorithms.set(t,e)},t.registerAll=function(t){for(var e in t)this.algorithms.set(e,t[e])},t.get=function(t){return this.algorithms.get(t)},t.algorithms=new Map,t}();e.AlgorithmFactory=B,B.registerAll({linear:new o,quadIn:new s(2),quadOut:new a(2),quadInOut:new h(2),cubicIn:new s(3),cubicOut:new a(3),cubicInOut:new h(3),quartIn:new s(4),quartOut:new a(4),quartInOut:new h(4),quintIn:new s(5),quintOut:new a(5),quintInOut:new h(5),sineIn:new u,sineOut:new c,sineInOut:new l,backIn:new p(1.7),backOut:new f(1.7),backInOut:new d(1.7),circIn:new g,circOut:new v,circInOut:new y,bounceIn:new T,bounceOut:new E,bounceInOut:new R,elasticIn:new w(1,.3),elasticOut:new A(1,.3),elasticInOut:new O(1,.3)})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r,o,s,a,h,u,c,l=i(2),p=i(11),f=i(12),d=i(15),g=i(28),v=i(9),y=i(22),m=i(39),E=i(13),T=i(17),R=i(31);!function(t){t.CONTENT_BOX="content-box",t.BORDER_BOX="border-box"}(n=e.BoxSizing||(e.BoxSizing={})),function(t){t.LEFT="left",t.RIGHT="right",t.CENTER="center"}(r=e.TextAlign||(e.TextAlign={})),function(t){t.STATIC="static",t.RELATIVE="relative",t.ABSOLUTE="absolute",t.FIXED="fixed"}(o=e.Position||(e.Position={})),function(t){t.INLINE="inline",t.BLOCK="block",t.NONE="none"}(s=e.Display||(e.Display={})),function(t){t.VISIBLE="visible",t.HIDDEN="hidden"}(a=e.Overflow||(e.Overflow={})),function(t){t.OUTER="outer",t.INNER="inner"}(h=e.TextBorderPosition||(e.TextBorderPosition={})),function(t){t.AUTO="auto",t.NONE="none"}(u=e.PointerEvents||(e.PointerEvents={})),function(t){t.VISIBLE="visible",t.HIDDEN="hidden"}(c=e.Visibility||(e.Visibility={}));var b=/([^\s:;]+)[\s]*:[\s]*([^;]+)/gm,w=function(){function t(){this.position=o.STATIC,this.display=s.INLINE,this.perspectiveOriginX=p.BaseValue.of("50%"),this.perspectiveOriginY=p.BaseValue.of("50%"),this.transformX=p.BaseValue.ZERO,this.transformY=p.BaseValue.ZERO,this.alpha=1,this.rotation=0,this.scaleX=1,this.scaleY=1,this.skewX=0,this.skewY=0,this.visibility=c.VISIBLE,this.boxSizing=n.CONTENT_BOX,this.color=f.Color.BLACK,this.textAlign=r.LEFT,this.overflow=a.VISIBLE,this.pointerEvents=u.AUTO,this.textBorderPosition=h.OUTER}return t.of=function(e){return(new t).apply(this.parse(e))},t.parse=function(t){for(var e={},i=0,n=g.StringUtils.matchAll(t,b);i<n.length;i++){var r=n[i];e[r[1].toLowerCase()]=r[2]}return e},t.prototype.apply=function(e){for(var i in e){var l=this.normalize(i),g=e[i]+"";switch(l){case"width":case"height":this[l]=p.BaseValue.of(g);break;case"position":this.position=d.EnumUtils.fromString(o,g,o.STATIC);break;case"display":this.display=d.EnumUtils.fromString(s,g,s.INLINE);break;case"left":case"right":case"top":case"bottom":this[l]=p.BaseValue.of(g);break;case"padding":var b=t.parse4Dirs(g);b&&(this.paddingTop=b[0],this.paddingRight=b[1],this.paddingBottom=b[2],this.paddingLeft=b[3]);break;case"paddingTop":case"paddingRight":case"paddingBottom":case"paddingLeft":this[l]=p.BaseValue.of(g);break;case"margin":var w=t.parse4Dirs(g);w&&(this.marginTop=w[0],this.marginRight=w[1],this.marginBottom=w[2],this.marginLeft=w[3]);break;case"marginTop":case"marginRight":case"marginBottom":case"marginLeft":this[l]=p.BaseValue.of(g);break;case"perspectiveOrigin":1===(A=g.split(/\s+/)).length?"auto"===g?(this.perspectiveOriginX=p.BaseValue.of("50%"),this.perspectiveOriginY=p.BaseValue.of("50%")):(this.perspectiveOriginX=p.BaseValue.of(g),this.perspectiveOriginY=p.BaseValue.of(g)):A.length>1&&(this.perspectiveOriginX="auto"===A[0]?p.BaseValue.of("50%"):p.BaseValue.of(A[0]),this.perspectiveOriginY="auto"===A[1]?p.BaseValue.of("50%"):p.BaseValue.of(A[1]));break;case"transform":var A;1===(A=g.split(/\s+/)).length?"auto"===g?(this.transformX=p.BaseValue.of("50%"),this.transformY=p.BaseValue.of("50%")):(this.transformX=p.BaseValue.of(g),this.transformY=p.BaseValue.of(g)):A.length>1&&(this.transformX="auto"===A[0]?p.BaseValue.of("50%"):p.BaseValue.of(A[0]),this.transformY="auto"===A[1]?p.BaseValue.of("50%"):p.BaseValue.of(A[1]));break;case"perspectiveOriginX":case"perspectiveOriginY":case"transformX":case"transformY":this[l]="auto"===g?p.BaseValue.of("50%"):p.BaseValue.of(g);break;case"scaleX":case"scaleY":case"skewX":case"skewY":case"alpha":case"aspectRatio":case"rotation":var O=parseFloat(g);isNaN(O)?console.warn("invalid "+l+" value: "+g):this[l]=O;break;case"scale":O=parseFloat(g);isNaN(O)?console.warn("invalid "+l+" value: "+g):this.scaleX=this.scaleY=O;break;case"visibility":this.visibility=d.EnumUtils.fromString(c,g,c.VISIBLE);break;case"background":this.background=v.Background.of(g);break;case"backgroundClip":this.background||(this.background=new v.Background),this.background.setClip(g);break;case"backgroundColor":this.background||(this.background=new v.Background),this.background.setColor(g);break;case"backgroundAttachment":this.background||(this.background=new v.Background),this.background.setAttachment(g);break;case"backgroundImage":this.background||(this.background=new v.Background),this.background.setImage(g);break;case"backgroundRepeat":this.background||(this.background=new v.Background),this.background.setRepeat(g);break;case"backgroundOrigin":this.background||(this.background=new v.Background),this.background.setOrigin(g);break;case"backgroundSize":this.background||(this.background=new v.Background),this.background.setSize(g);break;case"backgroundPosition":this.background||(this.background=new v.Background),this.background.setPosition(g);break;case"boxSizing":this.boxSizing=d.EnumUtils.fromString(n,g,n.CONTENT_BOX);break;case"color":var B=f.Color.of(g);B&&(this.color=B);break;case"font":this.font=E.Font.of(g);break;case"fontFamily":this.font||(this.font=new E.Font),this.font.family=g;break;case"fontWeight":this.font||(this.font=new E.Font),this.font.weight=d.EnumUtils.fromString(E.FontWeight,g,E.FontWeight.NORMAL);break;case"fontStyle":this.font||(this.font=new E.Font),this.font.style=d.EnumUtils.fromString(E.FontStyle,g,E.FontStyle.NORMAL);break;case"fontVariant":this.font||(this.font=new E.Font),this.font.variant=d.EnumUtils.fromString(E.FontVariant,g,E.FontVariant.NORMAL);break;case"fontSize":O=parseFloat(g);isNaN(O)?console.warn("invalid "+l+" value: "+g):(this.font||(this.font=new E.Font),this.font.size=O);break;case"lineHeight":this.lineHeight=T.LineHeight.of(g);case"textAlign":this.textAlign=d.EnumUtils.fromString(r,g,r.LEFT);break;case"borderRadius":var S=t.parseBorderRadius(g);S&&(this.borderTopLeftRadius=S[0],this.borderTopRightRadius=S[1],this.borderBottomRightRadius=S[2],this.borderBottomLeftRadius=S[3]);break;case"borderTopLeftRadius":case"borderTopRightRadius":case"borderBottomLeftRadius":case"borderBottomRightRadius":this[l]=m.BorderRadius.of(g);break;case"border":this.borderTop=this.borderRight=this.borderLeft=this.borderBottom=y.Border.of(g);break;case"borderTop":case"borderRight":case"borderLeft":case"borderBottom":case"textBorder":this[l]=y.Border.of(g);break;case"overflow":this.overflow=d.EnumUtils.fromString(a,g,a.VISIBLE);break;case"compositeOperation":this.compositeOperation=g;break;case"filter":this.filter=g;break;case"shadow":case"textShadow":this[l]=R.Shadow.of(g);break;case"textBorderPosition":this.textBorderPosition=d.EnumUtils.fromString(h,g,h.OUTER);break;case"pointerEvents":this.pointerEvents=d.EnumUtils.fromString(u,g,u.AUTO);break;case"cursor":this.cursor=g;break;default:console.warn("unknown style:"+i+" value:"+g)}}return this},t.prototype.getSnapshotForAnimation=function(t,e){var i={};for(var n in e)this.fillSnapshotForAnimation(t,n,e[n],i);return i},t.prototype.applyAnimationResult=function(t){for(var e in t)"backgroundColor"===e?(this.background||(this.background=new v.Background),this.background.color=t[e]):this[e]=t[e]},t.prototype.clone=function(){var e=new t;return e.width=this.width,e.height=this.height,e.position=this.position,e.display=this.display,e.left=this.left,e.right=this.right,e.top=this.top,e.bottom=this.bottom,this.paddingTop&&(e.paddingTop=this.paddingTop.clone()),this.paddingRight&&(e.paddingRight=this.paddingRight.clone()),this.paddingBottom&&(e.paddingBottom=this.paddingBottom.clone()),this.paddingLeft&&(e.paddingLeft=this.paddingLeft.clone()),this.marginTop&&(e.marginTop=this.marginTop.clone()),this.marginRight&&(e.marginRight=this.marginRight.clone()),this.marginBottom&&(e.marginBottom=this.marginBottom.clone()),this.marginLeft&&(e.marginLeft=this.marginLeft.clone()),e.perspectiveOriginX=this.perspectiveOriginX,e.perspectiveOriginY=this.perspectiveOriginY,e.transformX=this.transformX,e.transformY=this.transformY,e.alpha=this.alpha,e.rotation=this.rotation,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.skewX=this.skewX,e.skewY=this.skewY,this.shadow&&(e.shadow=this.shadow.clone()),this.textShadow&&(e.textShadow=this.textShadow.clone()),e.textBorderPosition=this.textBorderPosition,this.textBorder&&(e.textBorder=this.textBorder.clone()),e.visibility=this.visibility,this.background&&(e.background=this.background.clone()),e.boxSizing=this.boxSizing,e.color=this.color.clone(),this.font&&(e.font=this.font.clone()),e.lineHeight=this.lineHeight,e.textAlign=this.textAlign,this.borderTop&&(e.borderTop=this.borderTop.clone()),this.borderRight&&(e.borderRight=this.borderRight.clone()),this.borderBottom&&(e.borderBottom=this.borderBottom.clone()),this.borderLeft&&(e.borderLeft=this.borderLeft.clone()),this.borderTopLeftRadius&&(e.borderTopLeftRadius=this.borderTopLeftRadius.clone()),this.borderTopRightRadius&&(e.borderTopRightRadius=this.borderTopRightRadius.clone()),this.borderBottomRightRadius&&(e.borderBottomRightRadius=this.borderBottomRightRadius.clone()),this.borderBottomLeftRadius&&(e.borderBottomLeftRadius=this.borderBottomLeftRadius.clone()),e.overflow=this.overflow,e.compositeOperation=this.compositeOperation,e.aspectRatio=this.aspectRatio,e.filter=this.filter,e.cursor=this.cursor,e.pointerEvents=this.pointerEvents,e},t.prototype.fillSnapshotForAnimation=function(e,i,n,r){var o=this.normalize(i);switch(o){case"scaleX":case"scaleY":case"alpha":case"rotation":case"skewX":case"skewY":case"aspectRatio":var s=NaN;if("number"==typeof n?s=n:"string"==typeof n&&(s=parseFloat(n)),isNaN(s)){console.warn("invalid value ("+n+") for "+o);break}r[o]={from:this[o],to:s,type:l.AnimationValueType.NUMBER};break;case"paddingRight":case"paddingLeft":case"marginRight":case"marginLeft":case"transformX":case"width":case"left":case"right":case"perspectiveOriginX":var a=this[o]||p.BaseValue.of(0);(h=t.calculateAnimationBaseValue(o,a,n,e.getWidth()))&&(r[o]=h);break;case"paddingTop":case"paddingBottom":case"marginTop":case"marginBottom":case"transformY":case"height":case"top":case"bottom":case"perspectiveOriginY":var h;a=this[o]||p.BaseValue.of(0);(h=t.calculateAnimationBaseValue(o,a,n,e.getHeight()))&&(r[o]=h);break;case"color":var u=void 0;if("string"==typeof n?u=f.Color.of(n):n instanceof f.Color&&(u=n),!u){console.warn("invalid value ("+n+") for "+o);break}r[o]={from:this[o],to:u,type:l.AnimationValueType.ANIMATABLE};break;case"backgroundColor":u=void 0;if("string"==typeof n?u=f.Color.of(n):n instanceof f.Color&&(u=n),!u){console.warn("invalid value ("+n+") for "+o);break}r[o]={from:this.background&&this.background.color||f.Color.WHITE,to:u,type:l.AnimationValueType.ANIMATABLE};break;case"padding":this.fillSnapshotForAnimation(e,"paddingTop",n,r),this.fillSnapshotForAnimation(e,"paddingRight",n,r),this.fillSnapshotForAnimation(e,"paddingBottom",n,r),this.fillSnapshotForAnimation(e,"paddingLeft",n,r);break;case"margin":this.fillSnapshotForAnimation(e,"marginTop",n,r),this.fillSnapshotForAnimation(e,"marginRight",n,r),this.fillSnapshotForAnimation(e,"marginBottom",n,r),this.fillSnapshotForAnimation(e,"marginLeft",n,r);break;case"perspectiveOrigin":this.fillSnapshotForAnimation(e,"perspectiveOriginX",n,r),this.fillSnapshotForAnimation(e,"perspectiveOriginY",n,r);break;case"transform":this.fillSnapshotForAnimation(e,"transformX",n,r),this.fillSnapshotForAnimation(e,"transformY",n,r);break;case"scale":this.fillSnapshotForAnimation(e,"scaleX",n,r),this.fillSnapshotForAnimation(e,"scaleY",n,r);break;case"borderRadius":var c=t.parseBorderRadius(n);c&&(this.fillSnapshotForAnimation(e,"borderTopLeftRadius",c[0],r),this.fillSnapshotForAnimation(e,"borderTopRightRadius",c[1],r),this.fillSnapshotForAnimation(e,"borderBottomRightRadius",c[2],r),this.fillSnapshotForAnimation(e,"borderBottomLeftRadius",c[3],r));break;case"borderTopLeftRadius":case"borderTopRightRadius":case"borderBottomLeftRadius":case"borderBottomRightRadius":var d=void 0;if("string"==typeof n||"number"==typeof n?d=m.BorderRadius.of(n):n instanceof m.BorderRadius&&(d=n),!d){console.warn("invalid value ("+n+") for "+o);break}a=this[o]||m.BorderRadius.of(0);var g=void 0;g=d.value1.unit===p.BaseValueUnit.PERCENTAGE?a.value1.toPercentage(e.getWidth()):a.value1.toAbsolute(e.getWidth());var v=void 0;v=d.value2.unit===p.BaseValueUnit.PERCENTAGE?a.value2.toPercentage(e.getHeight()):a.value2.toAbsolute(e.getHeight()),r[o]={from:new m.BorderRadius(g,v),to:d,type:l.AnimationValueType.ANIMATABLE};break;case"borderLeft":case"borderRight":case"borderTop":case"borderBottom":case"textBorder":var E=void 0;if("string"==typeof n?E=y.Border.of(n):n instanceof y.Border&&(E=n),!E){console.warn("invalid value ("+n+") for "+o);break}r[o]={from:this[o]||y.Border.DEFAULT,to:E,type:l.AnimationValueType.ANIMATABLE};break;case"border":this.fillSnapshotForAnimation(e,"borderLeft",n,r),this.fillSnapshotForAnimation(e,"borderRight",n,r),this.fillSnapshotForAnimation(e,"borderTop",n,r),this.fillSnapshotForAnimation(e,"borderBottom",n,r);break;case"shadow":case"textShadow":var T=void 0;if("string"==typeof n?T=R.Shadow.of(n):n instanceof R.Shadow&&(T=n),!T){console.warn("invalid value ("+n+") for "+o);break}r[o]={from:this[o]||new R.Shadow(0,0,0,f.Color.WHITE),to:T,type:l.AnimationValueType.ANIMATABLE};break;default:console.warn("unsupported animation attribute:"+i)}},t.calculateAnimationBaseValue=function(t,e,i,n){var r;if("number"==typeof i||"string"==typeof i?r=p.BaseValue.of(i):i instanceof p.BaseValue&&(r=i),r)return r.unit===p.BaseValueUnit.PERCENTAGE?{from:e.toPercentage(n),to:r,type:l.AnimationValueType.ANIMATABLE}:{from:e.toAbsolute(n),to:r,type:l.AnimationValueType.ANIMATABLE};console.warn("invalid value ("+i+") for "+t)},t.parseBorderRadius=function(e){if("number"==typeof e)return[i=new m.BorderRadius(p.BaseValue.of(e)),i,i,i];if(l.isIAnimatable(e))return[e,e,e,e];var i,n=e.toString().split("/");if(1===n.length){if(i=t.parse4Dirs(n[0]))return[new m.BorderRadius(i[0]),new m.BorderRadius(i[1]),new m.BorderRadius(i[2]),new m.BorderRadius(i[3])]}else if(2===n.length){var r=t.parse4Dirs(n[0]),o=t.parse4Dirs(n[1]);if(r&&o)return[new m.BorderRadius(r[0],o[0]),new m.BorderRadius(r[1],o[1]),new m.BorderRadius(r[2],o[2]),new m.BorderRadius(r[3],o[3])]}console.warn("invalid border radius:"+e)},t.parse4Dirs=function(t){var e=t.trim().split(/\s+/);return 1===e.length?[p.BaseValue.of(e[0]),p.BaseValue.of(e[0]),p.BaseValue.of(e[0]),p.BaseValue.of(e[0])]:2===e.length?[p.BaseValue.of(e[0]),p.BaseValue.of(e[1]),p.BaseValue.of(e[0]),p.BaseValue.of(e[1])]:3===e.length?[p.BaseValue.of(e[0]),p.BaseValue.of(e[1]),p.BaseValue.of(e[2]),p.BaseValue.of(e[1])]:4===e.length?[p.BaseValue.of(e[0]),p.BaseValue.of(e[1]),p.BaseValue.of(e[2]),p.BaseValue.of(e[3])]:void 0},t.prototype.normalize=function(t){for(var e="",i=0,n=t.split(/-/);i<n.length;i++){var r=n[i];""===e?e=r:e+=r.substring(0,1).toUpperCase()+r.substring(1)}return e},t}();e.Style=w},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s,a=i(6),h=i(3),u=i(40),c=i(0);!function(t){t[t.NUMBER=1]="NUMBER",t[t.ANIMATABLE=2]="ANIMATABLE"}(o=e.AnimationValueType||(e.AnimationValueType={})),function(t){t.UPDATE="update",t.COMPLETE="complete"}(s=e.AnimateEventType||(e.AnimateEventType={}));var l=function(t){function e(e,i,n,r){var o=t.call(this,e,!1,!0)||this;return o.step=i,o.progress=n,o.value=r,o}return r(e,t),e.prototype.toString=function(){return"[AnimateEvent (type="+this.type+")]"},e}(a.Event);function p(t){return t&&t.isAnimatable&&t.isAnimatable()}function f(t){return"number"==typeof t}e.AnimateEvent=l,e.isIAnimatable=p;var d=function(){function t(t,e){this.endTime=0,this.target=t,this.duration=e}return t.prototype.onStart=function(){},t.prototype.onUpdate=function(t){},t.prototype.onEnd=function(){},t}();e.AnimationStep=d;var g,v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(d),y=function(t){function e(e,i,n,r){var o=t.call(this,e,r)||this;if("string"==typeof n){var s=c.AlgorithmFactory.get(n);if(!s)throw new Error("unknown algorithm:"+n);o.algorithm=s}else o.algorithm=n;return o.values=i,o}return r(e,t),e.prototype.onStart=function(){if(this.computed={},f(this.target))this.computed.value={type:o.NUMBER,from:this.target,to:this.values};else if(p(this.target)){var t=this.target;this.computed.value={type:o.ANIMATABLE,from:t,to:t.convertFrom(this.values)}}else{var e=this.values;for(var i in e){var n=e[i],r=this.target[i];if(p(n)){var s=n;this.computed[i]={type:o.ANIMATABLE,from:s.convertFrom(r),to:s}}else if(p(r)){var a=r;this.computed[i]={type:o.ANIMATABLE,from:a,to:a.convertFrom(n)}}else if("number"==typeof n){a=r;isNaN(a)&&(a=parseFloat(r+""),isNaN(a)&&(a=0)),this.computed[i]={type:o.NUMBER,from:a,to:n}}}}},e.prototype.onUpdate=function(t){if(!u.ContainerUtils.isEmpty(this.computed)){if(f(this.target)){var e=this.computed.value.from,i=this.computed.value.to;return this.computed.value.current=e+(i-e)*this.algorithm.calculate(t),this.computed.value.current}if(p(this.target)){e=this.computed.value.from,i=this.computed.value.to;return this.computed.value.current=e.update(i,this.algorithm.calculate(t)),this.computed.value.current}var n={},r=!1;for(var s in this.computed){var a=this.computed[s];switch(a.type){case o.NUMBER:e=a.from,i=a.to;a.current=e+(i-e)*this.algorithm.calculate(t);break;case o.ANIMATABLE:e=a.from,i=a.to;a.current=e.update(i,this.algorithm.calculate(t))}this.target[s]=a.current,n[s]=a.current,r=!0}return r?n:void 0}},e}(d),m=function(t){function e(e,i,n,r){var o=t.call(this,e,r)||this;if("string"==typeof n){var s=c.AlgorithmFactory.get(n);if(!s)throw new Error("unknown algorithm:"+n);o.algorithm=s}else o.algorithm=n;return o.values=i,o}return r(e,t),e.prototype.onStart=function(){this.computed=this.target.style.getSnapshotForAnimation(this.target,this.values)},e.prototype.onUpdate=function(t){if(!u.ContainerUtils.isEmpty(this.computed)){var e={},i=!1,n=this.target;for(var r in this.computed){var s=this.computed[r];switch(s.type){case o.NUMBER:var a=s.from,c=s.to;s.current=a+(c-a)*this.algorithm.calculate(t);break;case o.ANIMATABLE:a=s.from,c=s.to;s.current=a.update(c,this.algorithm.calculate(t))}e[r]=s.current,i=!0}return i?(n.style.applyAnimationResult(e),n.dispatchEvent(new h.XObjectEvent("update",!0,!0,n)),e):void 0}},e}(d),E=function(t){function e(e,i){var n=t.call(this,e,0)||this;return n.call=i,n}return r(e,t),e.prototype.onEnd=function(){this.call(this.target)},e}(d);!function(t){t[t.RUNNING=1]="RUNNING",t[t.PAUSED=2]="PAUSED",t[t.COMPLETED=3]="COMPLETED",t[t.CANCELLED=4]="CANCELLED"}(g=e.AnimationState||(e.AnimationState={}));var T=function(t){function e(e,i){var n=t.call(this)||this;return n.playTimes=1,n.state=g.RUNNING,n.steps=[],n.roundStartTime=0,n.duration=0,n.currentStepIndex=0,n.currentStepProgress=0,n.target=e,n.playTimes=i?0:1,n.roundStartTime=n.beginTime=Date.now(),n.currentStepIndex=0,n.state=g.RUNNING,n}return r(e,t),e.prototype.toPromise=function(){var t=this;return new Promise((function(e,i){t.addEventListener(s.COMPLETE,(function(t){e(t)}))}))},e.prototype.pause=function(){return this.state===g.RUNNING&&(this.state=g.PAUSED,this.pauseTime=Date.now(),!0)},e.prototype.resume=function(){if(this.state===g.PAUSED){var t=Date.now()-this.pauseTime;return this.roundStartTime+=t,this.beginTime+=t,this.state=g.RUNNING,!0}return!1},e.prototype.loop=function(t){return this.playTimes=t?0:1,this},e.prototype.times=function(t){return this.playTimes=t,this},e.prototype.to=function(t,e,i){return void 0===i&&(i="linear"),this.addStep(new y(this.target,t,i,e)),this},e.prototype.css=function(t,e,i){return void 0===i&&(i="linear"),this.addStep(new m(this.target,t,i,e)),this},e.prototype.call=function(t){return this.addStep(new E(this.target,t))},e.prototype.wait=function(t){return this.addStep(new v(this.target,t))},e.prototype.onInterval=function(){if(this.duration<=0)return!1;var t=Date.now();if(t<this.roundStartTime)return!1;var e=t-this.roundStartTime,i=this.steps[this.currentStepIndex];if(e>=this.duration){for(this.doUpdateInternal(1),i.onEnd(),++this.currentStepIndex;this.currentStepIndex<this.steps.length;++this.currentStepIndex){(o=this.steps[this.currentStepIndex]).onStart(),this.doUpdateInternal(1),o.onEnd()}var n=!0;if(this.playTimes>0&&(n=this.playTimes*this.duration>t-this.beginTime),n)for(e%=this.duration,this.roundStartTime=t-e,this.currentStepIndex=0;;){if((o=this.steps[this.currentStepIndex]).onStart(),o.endTime>e){var r=1-(o.endTime-e)/o.duration;this.doUpdateInternal(r);break}this.doUpdateInternal(1),o.onEnd(),++this.currentStepIndex}else this.currentStepIndex=this.steps.length-1,this.state=g.COMPLETED,this.dispatchEvent(new l(s.COMPLETE,this.currentStepIndex,this.currentStepProgress))}else if(i.endTime>e){r=1-(i.endTime-e)/i.duration;this.doUpdateInternal(r)}else for(this.doUpdateInternal(1),i.onEnd(),++this.currentStepIndex;;){var o;if((o=this.steps[this.currentStepIndex]).onStart(),o.endTime>e&&o.duration>0){r=1-(o.endTime-e)/o.duration;this.doUpdateInternal(r);break}this.doUpdateInternal(1),o.onEnd(),++this.currentStepIndex}return!0},e.prototype.cancel=function(){this.state=g.CANCELLED,this.dispatchEvent(new l(s.COMPLETE,this.currentStepIndex,this.currentStepProgress))},e.prototype.doUpdateInternal=function(t){this.currentStepProgress=t;var e=this.steps[this.currentStepIndex].onUpdate(t);e&&this.dispatchEvent(new l(s.UPDATE,this.currentStepIndex,this.currentStepProgress,e))},e.prototype.addStep=function(t){return this.steps.push(t),this.duration+=t.duration,t.endTime=this.duration,1===this.steps.length&&t.onStart(),this},e}(a.EventDispatcher);e.Animation=T},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(6),a=i(26),h=i(8),u=i(4),c=i(1),l=i(32),p=i(14),f=function(t){function e(e,i,n,r,o,s){void 0===i&&(i=!0),void 0===n&&(n=!0);var a=t.call(this,e,i,n)||this;return a.nativeEvent=null,a.srcElement=r,a.touchItem=o,a.currentTarget=s,o&&(a.identifier=o.identifier,a.stageX=o.stageX,a.stageY=o.stageY),a}return r(e,t),e.prototype.toString=function(){return"[XObjectEvent (type="+this.type+")]"},e}(s.Event);e.XObjectEvent=f,function(t){t[t.DISABLED=1]="DISABLED",t[t.CACHED=2]="CACHED",t[t.INVALIDATE=3]="INVALIDATE"}(o||(o={}));var d=function(t){function e(e){var i=t.call(this)||this;i.id=void 0,i.rect=new h.Rect(0,0,0,0),i.cacheState=o.DISABLED,i.style=new c.Style;var n=i.getDefaultStyle();return n&&i.style.apply(n),e&&(e.attributes.style&&i.style.apply(c.Style.parse(e.attributes.style)),e.attributes.id&&(i.id=e.attributes.id)),i}return r(e,t),e.prototype.getDefaultStyle=function(){},e.prototype.remove=function(){this.parent&&this.parent.removeChild(this)},e.prototype.dispatchEvent=function(t){if(t.bubbles&&this.parent){for(var e=this,i=[e];e.parent;)i.push(e.parent),e=e.parent;for(var n=0,r=i;n<r.length;n++){var o=r[n];if(t.currentTarget=o,t.propagationStopped)break;o.doDispatchEvent(t)}}else this.doDispatchEvent(t);return!t.defaultPrevented},e.prototype.isVisible=function(){return!!(this.style.visibility!==c.Visibility.HIDDEN&&this.style.display!==c.Display.NONE&&this.style.alpha>0&&this.style.scaleX>0&&this.style.scaleY>0)},e.prototype.isPointerEventsEnabled=function(){return this.style.pointerEvents!==c.PointerEvents.NONE},e.prototype.getCacheCanvas=function(){return this.cacheCanvas},e.prototype.isCached=function(){return this.cacheState!==o.DISABLED},e.prototype.cache=function(){this.cacheState!==o.CACHED&&(this.cacheState=o.INVALIDATE)},e.prototype.uncache=function(){this.cacheState=o.DISABLED,delete this.cacheCanvas},e.prototype.invalidateCache=function(){this.cacheState!==o.DISABLED?this.cacheState=o.INVALIDATE:console.warn("Cache does not enabled for "+this.toString())},e.prototype.draw=function(t,e){if(void 0===e&&(e=!1),t.filter=this.style.filter||"none",e||this.cacheState===o.DISABLED)l.DrawUtils.drawElement(this,t);else{if(this.cacheCanvas||(this.cacheCanvas=u.Runtime.get().newCanvas()),this.cacheState!==o.CACHED){this.cacheCanvas.width=this.rect.width,this.cacheCanvas.height=this.rect.height;var i=this.cacheCanvas.getContext("2d");i&&l.DrawUtils.drawElement(this,i),this.cacheState=o.CACHED}t.drawImage(this.cacheCanvas,0,0,this.rect.width,this.rect.height)}},e.prototype.drawBackground=function(t,e,i){this.style.background&&this.style.background.draw(this,t,e,i)},e.prototype.drawContent=function(t){},e.prototype.updateContext=function(t){var e=this.getMatrix();t.transform(e.a,e.b,e.c,e.d,e.tx,e.ty),t.globalAlpha*=this.style.alpha},e.prototype.localToGlobal=function(t,e){return this.getConcatenatedMatrix().transformPoint(t,e)},e.prototype.globalToLocal=function(t,e){return this.getConcatenatedMatrix().invert().transformPoint(t,e)},e.prototype.localToLocal=function(t,e,i){var n=this.localToGlobal(t,e);return i.globalToLocal(n.x,n.y)},e.prototype.getMatrix=function(t){var e=t&&t.identity()||new a.Matrix2D,i=this.style.perspectiveOriginX.getValue(this.rect.width),n=this.style.perspectiveOriginY.getValue(this.rect.height);return e.appendTransform(this.rect.x+i+this.style.transformX.getValue(this.rect.width),this.rect.y+n+this.style.transformY.getValue(this.rect.height),this.style.scaleX,this.style.scaleY,this.style.rotation,this.style.skewX,this.style.skewY,i,n)},e.prototype.getConcatenatedMatrix=function(t){for(var e=this.getMatrix(t),i=this.parent;i;)e.prependMatrix(i.getMatrix()),i=i.parent;return e},e.prototype.hitTest=function(t,e){return t>=0&&t<this.rect.width&&e>=0&&e<this.rect.height},e.prototype.layout=function(){this.calculateSize()},e.prototype.calculateSize=function(){this.parent&&p.LayoutUtils.updateSize(this,this.parent.getWidth(),this.parent.getHeight())},e.prototype.css=function(t){return this.style.apply(t),this},e.prototype.getLineHeight=function(){return this.style.font?this.style.lineHeight?this.style.lineHeight.getValue(this.style.font.size):this.style.font.lineHeight?this.style.font.lineHeight.getValue(this.style.font.size):this.style.font.size:this.style.lineHeight?this.style.lineHeight.getValue(0):0},e.prototype.getWidth=function(){return this.rect.width},e.prototype.getHeight=function(){return this.rect.height},e.prototype.getPaddingWidth=function(){return this.rect.width-(this.style.borderLeft?this.style.borderLeft.width:0)-(this.style.borderRight?this.style.borderRight.width:0)},e.prototype.getPaddingHeight=function(){return this.rect.height-(this.style.borderTop?this.style.borderTop.width:0)-(this.style.borderBottom?this.style.borderBottom.width:0)},e.prototype.getPaddingRect=function(){var t=new h.Rect(0,0,this.rect.width,this.rect.height);return this.style.borderLeft&&(t.x+=this.style.borderLeft.width,t.width-=this.style.borderLeft.width),this.style.borderRight&&(t.width-=this.style.borderRight.width),this.style.borderTop&&(t.y+=this.style.borderTop.width,t.height-=this.style.borderTop.width),this.style.borderBottom&&(t.height-=this.style.borderBottom.width),t},e.prototype.getContentWidth=function(){return this.rect.width-(this.style.paddingLeft?this.style.paddingLeft.getValue(this.rect.width):0)-(this.style.paddingRight?this.style.paddingRight.getValue(this.rect.width):0)-(this.style.borderLeft?this.style.borderLeft.width:0)-(this.style.borderRight?this.style.borderRight.width:0)},e.prototype.getContentHeight=function(){return this.rect.height-(this.style.paddingTop?this.style.paddingTop.getValue(this.rect.height):0)-(this.style.paddingBottom?this.style.paddingBottom.getValue(this.rect.height):0)-(this.style.borderTop?this.style.borderTop.width:0)-(this.style.borderBottom?this.style.borderBottom.width:0)},e.prototype.getContentRect=function(){var t=new h.Rect(0,0,this.rect.width,this.rect.height);if(this.style.paddingLeft){var e=this.style.paddingLeft.getValue(this.rect.width);t.x+=e,t.width-=e}if(this.style.paddingRight&&(t.width-=this.style.paddingRight.getValue(this.rect.width)),this.style.paddingTop){var i=this.style.paddingTop.getValue(this.rect.height);t.y+=i,t.height-=i}return this.style.paddingBottom&&(t.height-=this.style.paddingBottom.getValue(this.rect.height)),this.style.borderLeft&&(t.x+=this.style.borderLeft.width,t.width-=this.style.borderLeft.width),this.style.borderRight&&(t.width-=this.style.borderRight.width),this.style.borderTop&&(t.y+=this.style.borderTop.width,t.height-=this.style.borderTop.width),this.style.borderBottom&&(t.height-=this.style.borderBottom.width),t},e.prototype.getOuterWidth=function(){var t=this.parent?this.parent.getWidth():0;return this.rect.width+(this.style.marginLeft?this.style.marginLeft.getValue(t):0)+(this.style.marginRight?this.style.marginRight.getValue(t):0)},e.prototype.getOuterHeight=function(){var t=this.parent?this.parent.getHeight():0;return this.rect.height+(this.style.marginTop?this.style.marginTop.getValue(t):0)+(this.style.marginBottom?this.style.marginBottom.getValue(t):0)},e.prototype.isChildOf=function(t){for(var e=this.parent;e;){if(e===t)return!0;e=e.parent}return!1},e.prototype.toString=function(){return"[XObject (id="+this.id+")]"},e.prototype.doDispatchEvent=function(e){if(e.currentTarget=this,e.stage&&e.touchItem&&this.willTrigger(e.type)){var i=e.stage.localToLocal(e.touchItem.stageX,e.touchItem.stageY,this);e.x=i.x,e.y=i.y,e.touchItem.x=i.x,e.touchItem.y=i.y}t.prototype.dispatchEvent.call(this,e)},e}(s.EventDispatcher);e.XObject=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(36),o=i(37),s=i(38);!function(t){t.WEBPAGE="webpage",t.WECHAT_MINI_GAME="wechat_mini_game",t.WECHAT_MINI_PROGRAM="wechat_mini_program"}(n=e.RuntimeType||(e.RuntimeType={}));var a=function(){function t(){}return t.setRuntimeType=function(t){this.runtimeType!==t&&(this.runtimeType=t,delete this.runtime)},t.getRuntimeType=function(){return this.runtimeType},t.get=function(){if(!this.runtime)switch(this.runtimeType){case n.WEBPAGE:this.runtime=new r.WebpageRuntime;break;case n.WECHAT_MINI_GAME:this.runtime=new o.WechatMiniGameRuntime;break;case n.WECHAT_MINI_PROGRAM:this.runtime=new s.WechatMiniProgramRuntime}return this.runtime},t.runtimeType=n.WEBPAGE,t}();e.Runtime=a},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s,a=i(6),h=i(16),u=i(4);!function(t){t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t[t.ERROR=3]="ERROR"}(o||(o={})),function(t){t.IMAGE="image",t.APNG="apng"}(s=e.ResourceType||(e.ResourceType={}));var c=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.progress=i,r.currentTarget=n,r}return r(e,t),e}(a.Event);e.ResourceRegistryEvent=c;var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.items=[],e}return r(e,t),e.prototype.load=function(t){switch(t.type){case s.IMAGE:this.loadImage(t);break;case s.APNG:this.loadApng(t)}},e.prototype.loadImage=function(t){var e=this;u.Runtime.get().loadImage({url:t.url,onLoad:function(i){t.resource=i,e.onLoad(t)},onError:function(i){t.error=i,e.onError(t)},onProgress:function(i){t.loadedBytes=i.loadedBytes,t.totalBytes=i.totalBytes,e.onProgress(t)}})},e.prototype.loadApng=function(t){var e=this;u.Runtime.get().loadArrayBuffer({url:t.url,onLoad:function(i){for(var n=h.ApngParser.parse(i),r={width:n.width,height:n.height,fps:1e3*n.frames.length/n.duration,frames:[],url:void 0,image:void 0},o=0,s=n.frames;o<s.length;o++){var a=s[o];r.frames.push({destX:a.left,destY:a.top,destWidth:a.width,destHeight:a.height,image:a.image})}t.resource=r,e.onLoad(t)},onError:function(i){console.warn("error while loading apng",i),t.error=i,e.onError(t)},onProgress:function(i){t.loadedBytes=i.loadedBytes,t.totalBytes=i.totalBytes,e.onProgress(t)}})},e.prototype.getTotalProgress=function(){for(var t=0,e=0,i=this.items;e<i.length;e++){t+=i[e].progress}return t/this.items.length},e.prototype.onProgress=function(t){t.state===o.LOADING&&t.totalBytes>0&&(t.progress=t.loadedBytes/t.totalBytes),this.dispatchEvent(new c("progress",this.getTotalProgress())),this.dispatchEvent(new c("itemprogress",t.totalBytes>0?t.loadedBytes/t.totalBytes:0,t))},e.prototype.onLoad=function(t){t.state=o.LOADED,t.loadedBytes=t.totalBytes,t.progress<1&&(t.progress=1,this.onProgress(t));for(var e=0,i=t.promiseHandlers;e<i.length;e++){i[e].resolve(t.resource)}t.promiseHandlers=[],this.dispatchEvent(new c("load",1,t));for(var n=!0,r=0,s=this.items;r<s.length;r++){if(s[r].state!==o.LOADED){n=!1;break}}n&&this.dispatchEvent(new c("done",1))},e.prototype.onError=function(t){t.state=o.ERROR;for(var e=0,i=t.promiseHandlers;e<i.length;e++){i[e].reject(t.error)}t.promiseHandlers=[],this.dispatchEvent(new c("error",this.getTotalProgress(),t))},e.prototype.add=function(t,e){var i=this;return void 0===e&&(e=s.IMAGE),new Promise((function(n,r){for(var s=0,a=i.items;s<a.length;s++){var h=a[s];if(h.url===t)return void(h.state===o.LOADED?n(h.resource):h.state===o.ERROR?r(h.error):h.promiseHandlers.push({resolve:n,reject:r}))}var u={url:t,type:e,resource:void 0,state:o.LOADING,progress:0,loadedBytes:0,totalBytes:0,promiseHandlers:[{resolve:n,reject:r}]};i.items.push(u),i.load(u)}))},e.prototype.get=function(t){for(var e=0,i=this.items;e<i.length;e++){var n=i[e];if(n.url===t)return n.state===o.LOADED?n.resource:void 0}},e.prototype.release=function(t){for(var e=0;e<this.items.length;++e){var i=this.items[e];if(i.url===t)return this.items.splice(e,1),i.promiseHandlers.length=0,i.resource}},e.DefaultInstance=new e,e}(a.EventDispatcher);e.ResourceRegistry=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!0),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.bubbles=!1,this.cancelable=!1,this.type=t,this.bubbles=e,this.cancelable=i,this.timeStamp=Date.now()}return t.prototype.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},t.prototype.toString=function(){return"[Event (type="+this.type+")]"},t}();e.Event=n;var r=function(){function t(){this.listeners={}}return t.prototype.addEventListener=function(t,e){for(var i=0,n="string"==typeof t?[t]:t;i<n.length;i++){var r=n[i],o=this.listeners[r];o&&this.removeEventListener(r,e),(o=this.listeners[r])?o.push(e):this.listeners[r]=[e]}return this},t.prototype.on=function(t,e){return this.addEventListener(t,e)},t.prototype.removeEventListener=function(t,e){for(var i=0,n="string"==typeof t?[t]:t;i<n.length;i++){var r=n[i],o=this.listeners[r];if(!o)return;for(var s=0,a=o.length;s<a;s++)if(o[s]===e){1===a?delete this.listeners[r]:o.splice(s,1);break}}return this},t.prototype.off=function(t,e){this.removeEventListener(t,e)},t.prototype.removeAllEventListeners=function(t){t?this.listeners&&delete this.listeners[t]:this.listeners={}},t.prototype.hasEventListener=function(t){return!!this.listeners[t]},t.prototype.willTrigger=function(t){return this.hasEventListener(t)},t.prototype.dispatchEvent=function(t){var e=this.listeners[t.type];if(e){e=e.slice();for(var i=0;i<e.length&&!t.immediatePropagationStopped;i++)e[i](t)}return!t.defaultPrevented},t}();e.EventDispatcher=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r,o=i(19);!function(t){t[t.START=1]="START",t[t.TAG=2]="TAG",t[t.TEXT=3]="TEXT"}(n||(n={})),function(t){t[t.PENDING=0]="PENDING",t[t.START=1]="START",t[t.NAME=2]="NAME",t[t.EQ=3]="EQ",t[t.VALUE=4]="VALUE",t[t.VALUE_STARTED=5]="VALUE_STARTED"}(r||(r={}));var s=function(){function t(){}return t.registerTag=function(t,e){this.tagMap[t.toLowerCase()]=e},t.prototype.parse=function(t){for(var e=[],i=0,n=this.parseHtml(t);i<n.length;i++){var r=n[i],o=this.node2Component(r);o&&e.push(o)}return e},t.prototype.parseHtml=function(t){for(var e=[],i=[],o=t.length,s=n.START,a=0,h=null,u=!1,c=null,l=r.PENDING,p=0,f="",d=null,g={},v=0;v<o;++v){var y=t[v];switch(s){case n.START:"<"===y?(a=v,h=null,s=n.TAG,l=r.PENDING,p=0,f="",d=null,g={}):(a=v,s=n.TEXT);break;case n.TAG:if(h||!this.isSplitter(y)&&">"!==y&&"/"!==y&&'"'!==y&&"'"!==y||(h=t.substring(a+1,v),l=r.START),null===h)break;if(u?y===c&&(u=!1):"'"!==y&&'"'!==y||(u=!0,c=y),">"!==y||u)switch(l){case r.START:this.isSplitter(y)||"/"===y||(p=v,l=r.NAME),d=null;break;case r.NAME:this.isSplitter(y)?(f=t.substring(p,v),l=r.EQ):"="===y&&(f=t.substring(p,v),p=v+1,l=r.VALUE);break;case r.EQ:if(this.isSplitter(y))break;"="===y?(l=r.VALUE,p=v+1):(this.addAttr(g,f,""),l=r.START);break;case r.VALUE:if(this.isSplitter(y))break;'"'===y||"'"===y?(d=y,p=v+1):(d=null,p=v),l=r.VALUE_STARTED;break;case r.VALUE_STARTED:var m=!1,E=v;d?y===d&&(m=!0):!d&&this.isSplitter(y)&&(m=!0),m&&(this.addAttr(g,f,t.substring(p,E)),f="",l=r.START)}else{switch(l){case r.NAME:f=t.substring(p,v),this.addAttr(g,f,"");break;case r.EQ:this.addAttr(g,f,"");break;case r.VALUE:case r.VALUE_STARTED:this.addAttr(g,f,t.substring(p,v))}if("!--"===h.substring(0,3)){v-a>=6&&"--"===t.substring(v-2,v)&&(s=n.START);break}if(h&&"/"===h[0]){h=h.substring(1);for(var T=!1,R=0,b=i;R<b.length;R++){b[R].tag===h&&(T=!0)}if(T)for(;i.length>0;){if(!(w=i.pop())||w.tag===h)break}s=n.START}else{var w={children:[],tag:h,attributes:g};g={},i.length>0?(w.parent=i[i.length-1],i[i.length-1].children.push(w)):e.push(w),this.isCloseTag(h)||i.push(w),s=n.START}}break;case n.TEXT:if("<"===y){if(a<v)if((A=t.substring(a,v).trim()).length>0){w={children:[],tag:"TEXT",text:A,attributes:{}};i.length>0?(w.parent=i[i.length-1],i[i.length-1].children.push(w)):e.push(w)}s=n.TAG,h=null,a=v,l=r.PENDING,p=0,f="",d=null,g={}}}}switch(s){case n.TEXT:var A;if(a<v)if((A=t.substring(a,v).trim()).length>0){w={children:[],tag:"TEXT",text:A,attributes:{}};i.length>0?(w.parent=i[i.length-1],i[i.length-1].children.push(w)):e.push(w)}}for(var O=0,B=e;O<B.length;O++){w=B[O];this.trimTextNode(w)}return e},t.prototype.trimTextNode=function(t){if(1===t.children.length&&"TEXT"===t.children[0].tag)t.text=t.children[0].text,t.children.length=0;else for(var e=0,i=t.children;e<i.length;e++){var n=i[e];this.trimTextNode(n)}},t.prototype.node2Component=function(e){var i=t.tagMap[e.tag.toLowerCase()];if(i){var n=new i({attributes:e.attributes,text:e.text});if(e.children.length>0)if(n instanceof o.Container)for(var r=0,s=e.children;r<s.length;r++){var a=s[r],h=this.node2Component(a);h&&n.addChild(h)}else console.warn("component is not a container:"+n);return n}console.warn("unknown tag:"+e.tag.toLowerCase())},t.prototype.isSplitter=function(t){return" "===t||"\r"===t||"\n"===t||"\t"===t},t.prototype.isCloseTag=function(t){return"img"===t},t.prototype.addAttr=function(t,e,i){t[e.toLowerCase()]=i},t.tagMap={},t}();e.HtmlParser=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=/^\s*[0-9]+\s+[0-9]+\s+[0-9]+\s+[0-9]+\s*$/,r=function(){function t(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n}return t.of=function(e){if(n.test(e)){var i=e.split(/\s+/),r=parseFloat(i[0]);if(!isNaN(r)){var o=parseFloat(i[1]);if(!isNaN(o)){var s=parseFloat(i[2]);if(!isNaN(s)){var a=parseFloat(i[3]);if(!isNaN(a))return new t(r,o,s,a)}}}}},t.prototype.in=function(t,e){return t>=this.x&&e>=this.y&&t<this.x+this.width&&e<this.y+this.height},t.prototype.equals=function(t){return this.x===t.x&&this.y==this.y&&this.width===t.width&&this.height===t.height},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t}();e.Rect=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(11),o=i(12),s=i(8),a=i(21),h=i(20),u=i(5),c=i(4),l=i(15),p=new a.CSSTokenizer("/");!function(t){t.SCROLL="scroll"}(n=e.BackgroundAttachment||(e.BackgroundAttachment={}));var f,d=function(){function t(t){this.url=t,u.ResourceRegistry.DefaultInstance.add(t,u.ResourceType.IMAGE)}return t.of=function(e){return new t(e[0])},t.prototype.getSource=function(t,e){return u.ResourceRegistry.DefaultInstance.get(this.url)},t.prototype.toString=function(){return"url("+this.url+")"},t.prototype.clone=function(){return new t(this.url)},t.prototype.destroy=function(){},t}(),g=function(){function t(t){this.parameters=t}return t.of=function(e){return new t(e)},t.prototype.getSource=function(t,e){if(0!==this.parameters.length){if(t=Math.round(t),e=Math.round(e),this.canvas&&this.canvas.width===t&&this.canvas.height===e)return this.canvas;this.canvas||(this.canvas=c.Runtime.get().newCanvas()),this.canvas.width!==t&&(this.canvas.width=t),this.canvas.height!==e&&(this.canvas.height=e);var i=this.canvas.getContext("2d");if(i){var n,r=0;if(this.parameters[0].startsWith("to")){var o=this.parameters[0].substring(2).replace(/\s+/g,"");n="left"===o?i.createLinearGradient(t-1,0,0,0):"right"===o?i.createLinearGradient(0,0,t-1,0):"top"===o?i.createLinearGradient(0,e-1,0,0):"bottom"===o?i.createLinearGradient(0,0,0,e-1):"lefttop"===o?i.createLinearGradient(t-1,e-1,0,0):"leftbottom"===o?i.createLinearGradient(t-1,0,0,e-1):"righttop"===o?i.createLinearGradient(0,e-1,t-1,0):"rightbottom"===o?i.createLinearGradient(0,0,t-1,e-1):i.createLinearGradient(0,0,0,e-1),r++}else this.parameters[0].endsWith("deg")&&(n=i.createLinearGradient(0,0,t-1,e-1),r++);n||(n=i.createLinearGradient(0,0,0,e-1));for(var s=-1;r<this.parameters.length;++r){var a=this.parameters[r].split(/\s+/),h=a[0];if(a.length<2)if(-1===s)s=0,n.addColorStop(0,h);else{for(var u=1,l=0,p=r+1;p<this.parameters.length;++p){++l;var f=this.parameters[p].split(/\s+/);if(f.length>1){u=parseFloat(f[1])/100;break}}0===l?s=1:s+=(u-s)/(l+1),n.addColorStop(s,h)}else for(p=1;p<a.length;++p)s=parseFloat(a[p])/100,n.addColorStop(s,h)}return i.fillStyle=n,i.fillRect(0,0,t,e),this.canvas}}},t.prototype.toString=function(){return"linear-gradient("+this.parameters.join(",")+")"},t.prototype.clone=function(){return new t(this.parameters)},t.prototype.destroy=function(){this.canvas&&(c.Runtime.get().releaseCanvas(this.canvas),this.canvas=void 0)},t}();!function(t){t.REPEAT="repeat",t.NO_REPEAT="no-repeat",t.SPACE="space",t.ROUND="round"}(f=e.BackgroundRepeatType||(e.BackgroundRepeatType={}));var v,y,m=function(){function t(t,e){this.x=t,this.y=e}return t.of=function(e){if(1===e.length){var i=e[0];return"repeat-x"===i?new t(f.REPEAT,f.NO_REPEAT):"repeat-y"===i?new t(f.NO_REPEAT,f.REPEAT):"repeat"===i?new t(f.REPEAT,f.REPEAT):"space"===i?new t(f.SPACE,f.SPACE):"round"===i?new t(f.ROUND,f.ROUND):"no-repeat"===i?new t(f.NO_REPEAT,f.NO_REPEAT):void 0}if(2===e.length){var n=l.EnumUtils.fromStringOrUndefined(f,e[0]),r=l.EnumUtils.fromStringOrUndefined(f,e[1]);if(!n||!r)return;return new t(n,n)}},t.prototype.clone=function(){return new t(this.x,this.y)},t.DEFAULT=new t(f.REPEAT,f.REPEAT),t}();!function(t){t.BORDER_BOX="border-box",t.PADDING_BOX="padding-box",t.CONTENT_BOX="content-box"}(v=e.BackgroundClip||(e.BackgroundClip={})),function(t){t.AUTO="auto",t.COVER="cover",t.CONTAIN="contain",t.VALUE="value"}(y=e.BackgroundSizeType||(e.BackgroundSizeType={}));var E,T=function(){function t(t,e,i,n){this.x=e,this.xType=t,this.y=n,this.yType=i}return t.of=function(e){var i,n,o=r.BaseValue.ZERO,s=r.BaseValue.ZERO;if(1===e.length){var a=e[0];if("auto"===a)i=n=y.AUTO;else if("cover"===a)i=n=y.COVER;else if("contain"===a)i=n=y.CONTAIN;else if(o=s=r.BaseValue.of(a),!s)return}else{if(2!==e.length)return;if("auto"===e[0])i=y.AUTO;else if(i=y.VALUE,!(o=r.BaseValue.of(e[0],!0)))return;if("auto"===e[1])n=y.AUTO;else if(n=y.VALUE,!(s=r.BaseValue.of(e[1],!0)))return}return new t(i,o,n,s)},t.prototype.clone=function(){return new t(this.xType,this.x.clone(),this.yType,this.y.clone())},t.DEFAULT=new t(y.AUTO,r.BaseValue.ZERO,y.AUTO,r.BaseValue.ZERO),t}();!function(t){t.LEFT="left",t.TOP="top",t.CENTER="center",t.BOTTOM="bottom",t.RIGHT="right"}(E||(E={}));var R=function(){function t(t,e,i,n){this.xDir=t,this.x=e,this.yDir=i,this.y=n}return t.acceptToken=function(t){return/^(left|center|right|top|bottom|[0-9\.]+|[0-9\.]+px|[0-9\.]+%)$/.test(t)},t.of=function(e){var i,n,o,s;if(1===e.length){var a=e[0];o=r.BaseValue.ZERO,s=r.BaseValue.ZERO,"left"!==a&&"right"!==a||(i=a,n=E.CENTER),"top"!==a&&"bottom"!==a||(i=E.CENTER,n=a),"center"===a?(i=E.CENTER,n=E.CENTER):(i=E.LEFT,o=r.BaseValue.of(a),n=E.CENTER)}else if(2===e.length){var h=e[0],u=e[1];if("top"!==h&&"bottom"!==h&&"left"!==u&&"right"!==u||(h=e[1],u=e[0]),"left"===h||"right"===h||"center"===h)i=h,o=r.BaseValue.ZERO;else if(i=E.LEFT,!(o=r.BaseValue.of(h)))return;if("top"===u||"bottom"===u||"center"===u)n=u,s=r.BaseValue.ZERO;else if(n=E.TOP,!(s=r.BaseValue.of(u)))return}else if(3===e.length){if("left"===e[0]||"right"===e[0])if(i=e[0],o=r.BaseValue.of(e[1])){if("top"!==e[2]&&"bottom"!==e[2]&&"center"!==e[2])return;n=e[2],s=r.BaseValue.ZERO}else{if(o=r.BaseValue.ZERO,"top"!==e[1]&&"bottom"!==e[1]&&"center"!==e[1])return;if(n=e[1],!(s=r.BaseValue.of(e[2])))return}else if("top"===e[0]||"bottom"===e[0])if(n=e[0],s=r.BaseValue.of(e[1])){if("left"!==e[2]&&"right"!==e[2]&&"center"!==e[2])return;i=e[2],o=r.BaseValue.ZERO}else{if(s=r.BaseValue.ZERO,"left"!==e[1]&&"right"!==e[1]&&"center"!==e[1])return;if(i=e[1],!(o=r.BaseValue.of(e[2])))return}}else{if(4!==e.length)return;if("left"===e[0]||"right"===e[0]?(i=e[0],o=r.BaseValue.of(e[1]),n=e[2],s=r.BaseValue.of(e[3])):"top"!==e[0]&&"bottom"!==e[0]||(i=e[2],o=r.BaseValue.of(e[3]),n=e[0],s=r.BaseValue.of(e[1])),!o||!s||"left"!==i&&"right"!==i||"top"!==n&&"bottom"!==n)return}return new t(i,o,n,s)},t.prototype.clone=function(){return new t(this.xDir,this.x.clone(),this.yDir,this.y.clone())},t.DEFAULT=new t(E.LEFT,r.BaseValue.ZERO,E.TOP,r.BaseValue.ZERO),t}(),b=function(){function t(){this.attachment=[],this.image=[],this.repeat=[],this.clip=[],this.origin=[],this.size=[],this.position=[],this.blendMode=[]}return t.of=function(e,i){void 0===i&&(i=!1);for(var r=this.split(e),s=new t,a=0,h=r;a<h.length;a++){for(var u=h[a],c=void 0,f=void 0,d=void 0,g=void 0,y=void 0,E=void 0,b=void 0,w=p.tokenize(u),A=0;A<w.length;++A){var O=w[A],B=l.EnumUtils.fromStringOrUndefined(v,O);if(B)if(g){if(y)return void(i||console.warn("invalid background:"+e+"\n<box> value appears 3 times in one layer"));y=B}else g=B;else{var S=l.EnumUtils.fromStringOrUndefined(n,O);if(S){if(c)return void(i||console.warn("invalid background:"+e+"\n<attachment> value appears twice in one layer"));c=S}else if(R.acceptToken(O)){if(b)return void(i||console.warn("invalid background:"+e+"\n<position> value appears twice in one layer"));var L=[O];for(++A;A<w.length&&R.acceptToken(w[A]);++A)L.push(w[A]);if(!(b=R.of(L)))return void(i||console.warn("invalid background:"+e+"\nbad <position> value"));if(A<w.length&&"/"===w[A]){if(A+2<w.length?(E=T.of([w[A+1],w[A+2]]))?A+=2:(E=T.of([w[A+1]]))&&++A:A+1<w.length&&(E=T.of([w[A+1]]))&&++A,!E)return void(i||console.warn("invalid background:"+e+"\nbad <size> value"))}else--A}else{var I=void 0;if(A+1<w.length&&(I=m.of([w[A],w[A+1]]))?A+=1:I=m.of([w[A]]),I){if(d)return void(i||console.warn("invalid background:"+e+"\n<repeat> value appears twice in one layer"));d=I}else{var x=this.parseImage(O);if(x){if(f)return void(i||console.warn("invalid background:"+e+"\n<image> value appears twice in one layer"));f=x}else{var P=o.Color.of(O);if(!P)return void(i||console.warn("invalid background:"+e+"\nunknown token:"+O));if(s.color)return void(i||console.warn("invalid background:"+e+"\n<color> value appears twice"));s.color=P}}}}}f&&(s.image.push(f),s.attachment.push(c||n.SCROLL),s.repeat.push(d||m.DEFAULT),s.clip.push(g||v.CONTENT_BOX),s.origin.push(y||v.PADDING_BOX),s.size.push(E||T.DEFAULT),s.position.push(b||R.DEFAULT),s.blendMode.push(""))}return s},t.parseImage=function(t){var e=h.FunctionParser.parse(t,!0);if(e)switch(e.name){case"url":return d.of(e.arguments);case"linear-gradient":return g.of(e.arguments)}},t.split=function(t){for(var e=[],i=0,n=!1,r=t.length,o=0;o<r;++o){var s=t[o];if(n)")"===s&&(n=!1);else if("("===s)n=!0;else if(","===s){var a;if(i<o)(a=t.substring(i,o).trim())&&e.push(a);i=o+1}}i<r&&((a=t.substring(i).trim())&&e.push(a));return e},t.copyArray=function(t,e){for(var i=0,n=t;i<n.length;i++){var r=n[i];e.push(r)}},t.cloneArray=function(t,e){for(var i=0,n=t;i<n.length;i++){var r=n[i];r?e.push(r.clone()):e.push(void 0)}},t.getFromArray=function(t,e,i){return e>=t.length?i:t[e]},t.prototype.setColor=function(t){this.color=t instanceof o.Color?t:o.Color.of(t)},t.prototype.setAttachment=function(e){var i=t.split(e);this.attachment.length=0;for(var r=0,o=i;r<o.length;r++){o[r];this.attachment.push(n.SCROLL)}},t.prototype.setImage=function(e){var i=t.split(e);this.image.length=0;for(var n=0,r=i;n<r.length;n++){var o=r[n];this.image.push(t.parseImage(o))}},t.prototype.setBlendMode=function(e){var i=t.split(e);this.blendMode.length=0;for(var n=0,r=i;n<r.length;n++){var o=r[n];this.blendMode.push(o)}},t.prototype.setRepeat=function(e){var i=t.split(e);this.repeat.length=0;for(var n=0,r=i;n<r.length;n++){var o=r[n],s=m.of(p.tokenize(o))||m.DEFAULT;this.repeat.push(s)}},t.prototype.setClip=function(e){var i=t.split(e);this.clip.length=0;for(var n=0,r=i;n<r.length;n++){var o=r[n],s=l.EnumUtils.fromString(v,o,v.BORDER_BOX);this.clip.push(s)}},t.prototype.setOrigin=function(e){var i=t.split(e);this.origin.length=0;for(var n=0,r=i;n<r.length;n++){var o=r[n],s=l.EnumUtils.fromString(v,o,v.BORDER_BOX);this.origin.push(s)}},t.prototype.setSize=function(e){var i=t.split(e);this.size.length=0;for(var n=0,r=i;n<r.length;n++){var o=r[n],s=T.of(p.tokenize(o))||T.DEFAULT;this.size.push(s)}},t.prototype.setPosition=function(e){var i=t.split(e);this.position.length=0;for(var n=0,r=i;n<r.length;n++){var o=r[n],s=R.of(p.tokenize(o))||R.DEFAULT;this.position.push(s)}},t.prototype.draw=function(e,i,n,o){if(0===this.image.length&&this.color&&this.color.a>0){i.fillStyle=this.color.toString();var a=void 0;switch(p=t.getFromArray(this.clip,0,v.BORDER_BOX)){case v.PADDING_BOX:a=e.getPaddingRect();break;case v.CONTENT_BOX:a=e.getContentRect();break;default:a=new s.Rect(0,0,e.rect.width,e.rect.height)}return p===v.BORDER_BOX?n.clip(i):o.clip(i),void i.fillRect(a.x,a.y,a.width,a.height)}for(var h=this.image.length-1;h>=0;--h){var u=this.image[h];if(u){var c=void 0;switch(t.getFromArray(this.origin,h,v.BORDER_BOX)){case v.PADDING_BOX:c=e.getPaddingRect();break;case v.CONTENT_BOX:c=e.getContentRect();break;default:c=new s.Rect(0,0,e.rect.width,e.rect.height)}if(!(c.width<1||c.height<1)){var l=u.getSource(c.width,c.height);if(l){var p,d=void 0;switch(p=t.getFromArray(this.clip,h,v.BORDER_BOX)){case v.PADDING_BOX:d=e.getPaddingRect();break;case v.CONTENT_BOX:d=e.getContentRect();break;default:d=new s.Rect(0,0,e.rect.width,e.rect.height)}p===v.BORDER_BOX?n.clip(i):o.clip(i),this.color&&h===this.image.length-1&&(i.fillStyle=this.color.toString(),i.fillRect(d.x,d.y,d.width,d.height));var g=l.width,m=l.height,R=g,b=m,w=c.x,A=c.y,O=this.size.length>h?this.size[h]:T.DEFAULT;if(O.xType===y.CONTAIN)(B=g/m)>c.width/c.height?b=(R=c.width)/B:R=(b=c.height)*B;else if(O.xType===y.COVER){var B;(B=g/m)<c.width/c.height?b=(R=c.width)/B:R=(b=c.height)*B}else O.xType===y.VALUE&&(R=O.x.getValue(c.width)),O.yType===y.VALUE&&(b=O.y.getValue(c.height));if(!(R<1||b<1)){var S=R/g,L=b/m,I=f.NO_REPEAT,x=f.NO_REPEAT;this.repeat.length>h&&(I=this.repeat[h].x,x=this.repeat[h].y);var P=0,C=0;if(I===f.SPACE)for(P=1===(F=Math.floor(c.width/R))?c.width:(c.width-F*R)/(F-1),w=c.x;w>d.x;)w-=P+R;else if(I===f.ROUND){var F=Math.max(1,Math.floor(c.width/R+.5));for(S=(R=c.width/F)/g,w=c.x;w>d.x;)w-=R}else{if(this.position.length>h)(M=this.position[h]).xDir===E.CENTER?w+=50*(c.width-R)/100:M.xDir===E.RIGHT?M.x.unit===r.BaseValueUnit.PERCENTAGE?w+=(c.width-R)*(100-M.x.numberValue)/100:w+=c.width-R-M.x.numberValue:M.x.unit===r.BaseValueUnit.PERCENTAGE?w+=(c.width-R)*M.x.numberValue/100:w+=M.x.numberValue;if(I===f.REPEAT)for(;w>d.x;)w-=R}if(x===f.SPACE)for(C=1===(F=Math.floor(c.height/b))?c.height:(c.height-F*b)/(F-1),A=c.y;A>d.y;)A-=C+b;else if(x===f.ROUND){F=Math.max(1,Math.floor(c.height/b+.5));for(L=(b=c.height/F)/m,A=c.y;A>d.y;)A-=b}else{var M;if(this.position.length>h)(M=this.position[h]).yDir===E.CENTER?A+=50*(c.height-b)/100:M.yDir===E.BOTTOM?M.x.unit===r.BaseValueUnit.PERCENTAGE?A+=(c.height-b)*(100-M.y.numberValue)/100:A+=c.height-b-M.y.numberValue:M.y.unit===r.BaseValueUnit.PERCENTAGE?A+=(c.height-b)*M.y.numberValue/100:A+=M.y.numberValue;if(x===f.REPEAT)for(;A>d.y;)A-=b}var N=d.y+d.height,D=d.x+d.width;do{var k=w;do{this.drawImage(i,l,R,b,S,L,k,A,d),k+=P+R}while(k<D&&I!==f.NO_REPEAT);A+=C+b}while(A<N&&x!==f.NO_REPEAT)}}}}}},t.prototype.clone=function(){var e=new t;return e.color=this.color,t.copyArray(this.attachment,e.attachment),t.cloneArray(this.image,e.image),t.copyArray(this.blendMode,e.blendMode),t.copyArray(this.clip,e.clip),t.copyArray(this.origin,e.origin),t.cloneArray(this.repeat,e.repeat),t.cloneArray(this.size,e.size),t.cloneArray(this.position,e.position),e},t.prototype.drawImage=function(t,e,i,n,r,o,s,a,h){var u=0,c=0;s<h.x&&(u=h.x-s,s=h.x),a<h.y&&(c=h.y-a,a=h.y);var l=i-u,p=n-c;l+s>h.width+h.x&&(l=h.width+h.x-s),p+a>h.height+h.y&&(p=h.height+h.y-a),t.drawImage(e,u/r,c/o,l/r,p/o,s,a,l,p)},t}();e.Background=b},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.positions=[]}return t.prototype.trim=function(t){for(;this.positions.length>0&&this.positions[0].timestamp<t-100;)this.positions.shift()},t.prototype.add=function(t,e,i){this.trim(i),this.positions.push({x:t,y:e,timestamp:i});var n=0,r=0;if(this.positions.length>1){var o=this.positions[0],s=i-o.timestamp;if(s>0){var a=Math.sqrt(Math.pow(t-o.x,2)+Math.pow(e-o.y,2));a>0&&(r=a/s,n=Math.asin((o.y-e)/a)/Math.PI*180,t<o.x?n=180-n:n<0&&(n=360+n))}}return{speed:r,direction:n}},t}(),r=function(){function t(t,e,i,n,r){this.pressed=!1,this.x=0,this.y=0,this.identifier=t,this.srcElement=e,this.srcStageX=this.stageX=i,this.srcStageY=this.stageY=n,this.srcTimestamp=this.timestamp=r,this.speed=this.direction=0}return t.prototype.getDelta=function(){if(void 0!==this.deltaX&&void 0!==this.deltaY)return{x:this.deltaX,y:this.deltaY};if(!this.velocityTracker||this.velocityTracker.positions.length<=1)return{x:0,y:0};var t=this.velocityTracker.positions.length;return{x:this.velocityTracker.positions[t-1].x-this.velocityTracker.positions[t-2].x,y:this.velocityTracker.positions[t-1].y-this.velocityTracker.positions[t-2].y}},t.prototype.switchSourceElement=function(e){var i=new t(this.identifier,e,this.srcStageX,this.srcStageY,this.srcTimestamp);return i.x=this.x,i.y=this.y,i.currentTarget=this.currentTarget,i.pressed=this.pressed,i.speed=this.speed,i.direction=this.direction,i},t.prototype.onUpdate=function(t){this.velocityTracker||(this.velocityTracker=new n,this.velocityTracker.add(this.stageX,this.stageY,this.timestamp));var e=this.velocityTracker.add(t.stageX,t.stageY,t.timestamp);this.speed=e.speed,this.direction=e.direction,this.stageX=t.stageX,this.stageY=t.stageY,this.timestamp=t.srcTimestamp},t.prototype.clone=function(){return this.switchSourceElement(this.srcElement)},t}();e.TouchItem=r},function(t,e,i){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.PX=1]="PX",t[t.PERCENTAGE=2]="PERCENTAGE"}(n=e.BaseValueUnit||(e.BaseValueUnit={}));var r=function(){function t(t,e){void 0===e&&(e=n.PX),this.numberValue=0,this.unit=e,this.numberValue=t}return t.of=function(e,i){if(void 0===i&&(i=!1),"string"==typeof e){var r=parseFloat(e);return isNaN(r)?void(i||console.warn("invalid value:"+e)):e.endsWith("%")?new t(r,n.PERCENTAGE):new t(r,n.PX)}return new t(e,n.PX)},t.prototype.getValue=function(t){switch(this.unit){case n.PERCENTAGE:return this.numberValue*t/100;case n.PX:return this.numberValue}},t.prototype.toAbsolute=function(e){switch(this.unit){case n.PERCENTAGE:return new t(this.numberValue*e/100,n.PX);case n.PX:return this}},t.prototype.toPercentage=function(e){switch(this.unit){case n.PX:return new t(this.numberValue/e*100,n.PERCENTAGE);case n.PERCENTAGE:return this}},t.prototype.toString=function(){switch(this.unit){case n.PERCENTAGE:return this.numberValue+"%";case n.PX:return this.numberValue+""}},t.prototype.equals=function(t){return this.numberValue===t.numberValue&&this.unit==this.unit},t.prototype.clone=function(){return new t(this.numberValue,this.unit)},t.prototype.update=function(e,i){return new t(this.numberValue+(e.numberValue-this.numberValue)*i,e.unit)},t.prototype.convertFrom=function(e){var i=t.of(e);return void 0===i?new t(0):i},t.prototype.isAnimatable=function(){return!0},t.ZERO=t.of("0"),t}();e.BaseValue=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(20),r=/^([0-9]+|[0-9]+\.[0-9]*|[0-9]*\.[0-9]+)%?$/,o=/^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i,s=function(){function t(t,e,i,n){void 0===n&&(n=1),this.r=0,this.g=0,this.b=0,this.a=1,this.r=Math.min(255,Math.max(0,t)),this.g=Math.min(255,Math.max(0,e)),this.b=Math.min(255,Math.max(0,i)),this.a=Math.min(1,Math.max(0,n))}return t.of=function(e,i){if(void 0===i&&(i=!1),o.test(e))return this.fromHex(e,i);var r=e.toUpperCase();if(this[r])return this[r];var s=n.FunctionParser.parse(e,i);if(s){var a=s.name.toLowerCase();if("rgb"===a&&3===s.arguments.length){var h=this.parseColorValue(s.arguments[0],255),u=this.parseColorValue(s.arguments[1],255),c=this.parseColorValue(s.arguments[2],255);return void 0===h||void 0===u||void 0===c?void console.warn("invalid color value:"+e):new t(h,u,c,1)}if("rgba"===a&&4===s.arguments.length){h=this.parseColorValue(s.arguments[0],255),u=this.parseColorValue(s.arguments[1],255),c=this.parseColorValue(s.arguments[2],255);var l=this.parseColorValue(s.arguments[3],1);return void 0===h||void 0===u||void 0===c||void 0===l?void console.warn("invalid color value:"+e):new t(h,u,c,l)}i||console.warn("invalid color value:"+e)}else i||console.warn("invalid color value:"+e)},t.random=function(e){return new t(255*Math.random(),255*Math.random(),255*Math.random(),e?1*Math.random():1)},t.parseColorValue=function(t,e){if(r.test(t))return t.endsWith("%")?parseFloat(t)*e/100:parseFloat(t)},t.fromHex=function(e,i){return 4===e.length?new t(16*parseInt(e[1],16)+parseInt(e[1],16),16*parseInt(e[2],16)+parseInt(e[2],16),16*parseInt(e[3],16)+parseInt(e[3],16),1):5===e.length?new t(16*parseInt(e[1],16)+parseInt(e[1],16),16*parseInt(e[2],16)+parseInt(e[2],16),16*parseInt(e[3],16)+parseInt(e[3],16),(16*parseInt(e[4],16)+parseInt(e[4],16))/255):7===e.length?new t(parseInt(e.substring(1,3),16),parseInt(e.substring(3,5),16),parseInt(e.substring(5,7),16),1):9===e.length?new t(parseInt(e.substring(1,3),16),parseInt(e.substring(3,5),16),parseInt(e.substring(5,7),16),parseInt(e.substring(7,9),16)/255):void(i||console.warn("invalid color value:"+e))},t.prototype.equals=function(t){return this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a},t.prototype.clone=function(){return new t(this.r,this.g,this.b,this.a)},t.prototype.toString=function(){return"rgba("+this.r+","+this.g+","+this.b+","+this.a+")"},t.prototype.update=function(e,i){return new t(this.r+(e.r-this.r)*i,this.g+(e.g-this.g)*i,this.b+(e.b-this.b)*i,this.a+(e.a-this.a)*i)},t.prototype.convertFrom=function(e){var i=t.of(e+"");return void 0===i?t.BLACK:i},t.prototype.isAnimatable=function(){return!0},t.TRANSPARENT=t.of("#0000"),t.ALICEBLUE=t.of("#F0F8FF"),t.ANTIQUEWHITE=t.of("#FAEBD7"),t.AQUA=t.of("#00FFFF"),t.AQUAMARINE=t.of("#7FFFD4"),t.AZURE=t.of("#F0FFFF"),t.BEIGE=t.of("#F5F5DC"),t.BISQUE=t.of("#FFE4C4"),t.BLACK=t.of("#000000"),t.BLANCHEDALMOND=t.of("#FFEBCD"),t.BLUE=t.of("#0000FF"),t.BLUEVIOLET=t.of("#8A2BE2"),t.BROWN=t.of("#A52A2A"),t.BURLYWOOD=t.of("#DEB887"),t.CADETBLUE=t.of("#5F9EA0"),t.CHARTREUSE=t.of("#7FFF00"),t.CHOCOLATE=t.of("#D2691E"),t.CORAL=t.of("#FF7F50"),t.CORNFLOWERBLUE=t.of("#6495ED"),t.CORNSILK=t.of("#FFF8DC"),t.CRIMSON=t.of("#DC143C"),t.CYAN=t.of("#00FFFF"),t.DARKBLUE=t.of("#00008B"),t.DARKCYAN=t.of("#008B8B"),t.DARKGOLDENROD=t.of("#B8860B"),t.DARKGRAY=t.of("#A9A9A9"),t.DARKGREY=t.of("#A9A9A9"),t.DARKGREEN=t.of("#006400"),t.DARKKHAKI=t.of("#BDB76B"),t.DARKMAGENTA=t.of("#8B008B"),t.DARKOLIVEGREEN=t.of("#556B2F"),t.DARKORANGE=t.of("#FF8C00"),t.DARKORCHID=t.of("#9932CC"),t.DARKRED=t.of("#8B0000"),t.DARKSALMON=t.of("#E9967A"),t.DARKSEAGREEN=t.of("#8FBC8F"),t.DARKSLATEBLUE=t.of("#483D8B"),t.DARKSLATEGRAY=t.of("#2F4F4F"),t.DARKSLATEGREY=t.of("#2F4F4F"),t.DARKTURQUOISE=t.of("#00CED1"),t.DARKVIOLET=t.of("#9400D3"),t.DEEPPINK=t.of("#FF1493"),t.DEEPSKYBLUE=t.of("#00BFFF"),t.DIMGRAY=t.of("#696969"),t.DIMGREY=t.of("#696969"),t.DODGERBLUE=t.of("#1E90FF"),t.FIREBRICK=t.of("#B22222"),t.FLORALWHITE=t.of("#FFFAF0"),t.FORESTGREEN=t.of("#228B22"),t.FUCHSIA=t.of("#FF00FF"),t.GAINSBORO=t.of("#DCDCDC"),t.GHOSTWHITE=t.of("#F8F8FF"),t.GOLD=t.of("#FFD700"),t.GOLDENROD=t.of("#DAA520"),t.GRAY=t.of("#808080"),t.GREY=t.of("#808080"),t.GREEN=t.of("#008000"),t.GREENYELLOW=t.of("#ADFF2F"),t.HONEYDEW=t.of("#F0FFF0"),t.HOTPINK=t.of("#FF69B4"),t.INDIANRED=t.of("#CD5C5C"),t.INDIGO=t.of("#4B0082"),t.IVORY=t.of("#FFFFF0"),t.KHAKI=t.of("#F0E68C"),t.LAVENDER=t.of("#E6E6FA"),t.LAVENDERBLUSH=t.of("#FFF0F5"),t.LAWNGREEN=t.of("#7CFC00"),t.LEMONCHIFFON=t.of("#FFFACD"),t.LIGHTBLUE=t.of("#ADD8E6"),t.LIGHTCORAL=t.of("#F08080"),t.LIGHTCYAN=t.of("#E0FFFF"),t.LIGHTGOLDENRODYELLOW=t.of("#FAFAD2"),t.LIGHTGRAY=t.of("#D3D3D3"),t.LIGHTGREY=t.of("#D3D3D3"),t.LIGHTGREEN=t.of("#90EE90"),t.LIGHTPINK=t.of("#FFB6C1"),t.LIGHTSALMON=t.of("#FFA07A"),t.LIGHTSEAGREEN=t.of("#20B2AA"),t.LIGHTSKYBLUE=t.of("#87CEFA"),t.LIGHTSLATEGRAY=t.of("#778899"),t.LIGHTSLATEGREY=t.of("#778899"),t.LIGHTSTEELBLUE=t.of("#B0C4DE"),t.LIGHTYELLOW=t.of("#FFFFE0"),t.LIME=t.of("#00FF00"),t.LIMEGREEN=t.of("#32CD32"),t.LINEN=t.of("#FAF0E6"),t.MAGENTA=t.of("#FF00FF"),t.MAROON=t.of("#800000"),t.MEDIUMAQUAMARINE=t.of("#66CDAA"),t.MEDIUMBLUE=t.of("#0000CD"),t.MEDIUMORCHID=t.of("#BA55D3"),t.MEDIUMPURPLE=t.of("#9370DB"),t.MEDIUMSEAGREEN=t.of("#3CB371"),t.MEDIUMSLATEBLUE=t.of("#7B68EE"),t.MEDIUMSPRINGGREEN=t.of("#00FA9A"),t.MEDIUMTURQUOISE=t.of("#48D1CC"),t.MEDIUMVIOLETRED=t.of("#C71585"),t.MIDNIGHTBLUE=t.of("#191970"),t.MINTCREAM=t.of("#F5FFFA"),t.MISTYROSE=t.of("#FFE4E1"),t.MOCCASIN=t.of("#FFE4B5"),t.NAVAJOWHITE=t.of("#FFDEAD"),t.NAVY=t.of("#000080"),t.OLDLACE=t.of("#FDF5E6"),t.OLIVE=t.of("#808000"),t.OLIVEDRAB=t.of("#6B8E23"),t.ORANGE=t.of("#FFA500"),t.ORANGERED=t.of("#FF4500"),t.ORCHID=t.of("#DA70D6"),t.PALEGOLDENROD=t.of("#EEE8AA"),t.PALEGREEN=t.of("#98FB98"),t.PALETURQUOISE=t.of("#AFEEEE"),t.PALEVIOLETRED=t.of("#DB7093"),t.PAPAYAWHIP=t.of("#FFEFD5"),t.PEACHPUFF=t.of("#FFDAB9"),t.PERU=t.of("#CD853F"),t.PINK=t.of("#FFC0CB"),t.PLUM=t.of("#DDA0DD"),t.POWDERBLUE=t.of("#B0E0E6"),t.PURPLE=t.of("#800080"),t.REBECCAPURPLE=t.of("#663399"),t.RED=t.of("#FF0000"),t.ROSYBROWN=t.of("#BC8F8F"),t.ROYALBLUE=t.of("#4169E1"),t.SADDLEBROWN=t.of("#8B4513"),t.SALMON=t.of("#FA8072"),t.SANDYBROWN=t.of("#F4A460"),t.SEAGREEN=t.of("#2E8B57"),t.SEASHELL=t.of("#FFF5EE"),t.SIENNA=t.of("#A0522D"),t.SILVER=t.of("#C0C0C0"),t.SKYBLUE=t.of("#87CEEB"),t.SLATEBLUE=t.of("#6A5ACD"),t.SLATEGRAY=t.of("#708090"),t.SLATEGREY=t.of("#708090"),t.SNOW=t.of("#FFFAFA"),t.SPRINGGREEN=t.of("#00FF7F"),t.STEELBLUE=t.of("#4682B4"),t.TAN=t.of("#D2B48C"),t.TEAL=t.of("#008080"),t.THISTLE=t.of("#D8BFD8"),t.TOMATO=t.of("#FF6347"),t.TURQUOISE=t.of("#40E0D0"),t.VIOLET=t.of("#EE82EE"),t.WHEAT=t.of("#F5DEB3"),t.WHITE=t.of("#FFFFFF"),t.WHITESMOKE=t.of("#F5F5F5"),t.YELLOW=t.of("#FFFF00"),t.YELLOWGREEN=t.of("#9ACD32"),t.NONE=t.of("#FFFF00"),t}();e.Color=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r,o,s=i(15),a=i(14),h=i(17);!function(t){t.NORMAL="normal",t.ITALIC="italic",t.OBLIQUE="oblique"}(n=e.FontStyle||(e.FontStyle={})),function(t){t.NORMAL="normal",t.SMALL_CAPS="small-caps"}(r=e.FontVariant||(e.FontVariant={})),function(t){t.NORMAL="normal",t.BOLD="bold",t.BOLDER="bolder",t.W100="100",t.W200="200",t.W300="300",t.W400="400",t.W500="500",t.W600="600",t.W700="700",t.W800="800",t.W900="900"}(o=e.FontWeight||(e.FontWeight={}));var u=/(^|^.*\s+)([0-9]+[a-z]+[^\s]+)($|\s+(.*)$)/,c=function(){function t(t,e,i,s,a,h){this.style=t||n.NORMAL,this.variant=e||r.NORMAL,this.weight=i||o.NORMAL,this.size=s||16,this.lineHeight=a,this.family=h}return t.of=function(e,i){void 0===i&&(i=!1);var a=e.match(u);if(a){for(var c=new t,l=0,p=a[1].split(/\s+/);l<p.length;l++){var f=p[l];if("normal"!==(f=f.toLowerCase())){var d=s.EnumUtils.fromString(n,f,n.NORMAL);if(d===n.NORMAL){var g=s.EnumUtils.fromString(o,f,o.NORMAL);if(g===o.NORMAL){var v=s.EnumUtils.fromString(r,f,r.NORMAL);v===r.NORMAL||(c.variant=v)}else c.weight=g}else c.style=d}}var y=a[2].split(/\//);if(c.size=parseFloat(y[0]),isNaN(c.size))i||console.warn("invalid font:"+e);else{if(!(y.length>1)||(c.lineHeight=h.LineHeight.of(y[1],i),c.lineHeight))return c.family=a[3].trim(),c;i||console.warn("invalid font:"+e)}}else i||console.warn("invalid font:"+e)},t.prototype.toString=function(){return[this.style||n.NORMAL,this.variant||r.NORMAL,this.weight||o.NORMAL,this.lineHeight?this.size+"px/"+this.lineHeight.toString():this.size+"px",this.family||t.DEFAULT_FONT_FAMILY].join(" ")},t.prototype.measureTextWidth=function(t){return a.LayoutUtils.measureTextWidth(t,this)},t.prototype.clone=function(){return new t(this.style,this.variant,this.weight,this.size,this.lineHeight,this.family)},t.DEFAULT_FONT_FAMILY="sans-serif",t}();e.Font=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4),r=i(1),o=function(){function t(){}return t.updateSize=function(t,e,i){t.style.width&&t.style.height?(t.rect.width=t.style.width.getValue(e),t.rect.height=t.style.height.getValue(i)):t.style.width?(t.rect.width=t.style.width.getValue(e),t.rect.height=void 0===t.style.aspectRatio?0:t.rect.width/t.style.aspectRatio):t.style.height?(t.rect.height=t.style.height.getValue(i),t.rect.width=void 0===t.style.aspectRatio?0:t.rect.height*t.style.aspectRatio):t.rect.height=t.rect.width=0,t.style.boxSizing===r.BoxSizing.CONTENT_BOX&&(t.rect.width+=(t.style.paddingLeft?t.style.paddingLeft.getValue(t.rect.width):0)+(t.style.paddingRight?t.style.paddingRight.getValue(t.rect.width):0)+(t.style.borderLeft?t.style.borderLeft.width:0)+(t.style.borderRight?t.style.borderRight.width:0),t.rect.height+=(t.style.paddingTop?t.style.paddingTop.getValue(t.rect.height):0)+(t.style.paddingBottom?t.style.paddingBottom.getValue(t.rect.height):0)+(t.style.borderTop?t.style.borderTop.width:0)+(t.style.borderBottom?t.style.borderBottom.width:0))},t.updatePositionForAbsoluteElement=function(t,e,i){t.style.right?t.rect.x=e-t.rect.width-t.style.right.getValue(e)-(t.style.marginRight?t.style.marginRight.getValue(e):0):t.style.left?t.rect.x=t.style.left.getValue(e)+(t.style.marginLeft?t.style.marginLeft.getValue(e):0):t.rect.x=t.style.marginLeft?t.style.marginLeft.getValue(e):0,t.style.bottom?t.rect.y=i-t.rect.height-t.style.bottom.getValue(i)-(t.style.marginBottom?t.style.marginBottom.getValue(i):0):t.style.top?t.rect.y=t.style.top.getValue(i)+(t.style.marginTop?t.style.marginTop.getValue(i):0):t.rect.y=t.style.marginTop?t.style.marginTop.getValue(i):0},t.measureTextWidth=function(t,e){if(0===t.length)return 0;var i=n.Runtime.get().newCanvas(),r=i.getContext("2d"),o=0;return r&&(r.save(),r.font=e.toString(),o=r.measureText(t).width,r.restore()),n.Runtime.get().releaseCanvas(i),o},t}();e.LayoutUtils=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.fromString=function(t,e,i){for(var n in t)if(t[n]===e)return e;return i},t.fromStringOrUndefined=function(t,e){for(var i in t)if(t[i]===e)return e},t}();e.EnumUtils=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4),r=i(29),o=i(30),s=function(){this.duration=0,this.numPlays=0,this.frames=[]};e.ApngData=s;var a=function(){this.left=0,this.top=0,this.width=0,this.height=0,this.delay=0,this.disposeOp=0,this.blendOp=0,this.dataParts=[]};e.ApngFrame=a;var h=new Uint8Array([137,80,78,71,13,10,26,10]);function u(t){return t.charCodeAt(0)<<24|t.charCodeAt(1)<<16|t.charCodeAt(2)<<8|t.charCodeAt(3)}function c(t){return[t>>>24&255,t>>>16&255,t>>>8&255,255&t]}var l=u("IHDR"),p=u("acTL"),f=u("IDAT"),d=u("fcTL"),g=u("fdAT"),v=u("IEND"),y=function(){function t(){}return t.parse=function(t,e){void 0===e&&(e=!1);for(var i=new Uint8Array(t),o=0;o<h.length;++o)if(h[o]!==i[o])return void(e||console.warn("not a png file"));for(var u=this.toChunks(i),y=[],m=[],E=null,T=null,R=new s,b=new DataView(i.buffer),w=0,A=u;w<A.length;w++){var O=A[w];switch(O.type){case l:E=i.subarray(O.start+8,O.end-4),R.width=b.getUint32(O.start+8),R.height=b.getUint32(O.start+8+4);break;case p:R.numPlays=b.getUint32(O.start+8);break;case d:T=new a,R.frames.push(T),T.width=b.getUint32(O.start+8+4),T.height=b.getUint32(O.start+8+8),T.left=b.getUint32(O.start+8+12),T.top=b.getUint32(O.start+8+16);var B=b.getUint16(O.start+8+20),S=b.getUint16(O.start+8+22);0===S&&(S=100),T.delay=1e3*B/S,T.delay<=10&&(T.delay=100),R.duration+=T.delay,T.disposeOp=b.getUint8(O.start+8+24),T.blendOp=b.getUint8(O.start+8+25),T.dataParts=[],1===R.frames.length&&2===T.disposeOp&&(T.disposeOp=1);break;case g:T?T.dataParts.push(this.makeChunk(f,i.subarray(O.start+12,O.end-4))):e||console.warn("invalid fdAT chunk before frame");break;case f:T?T.dataParts.push(this.makeChunk(f,i.subarray(O.start+8,O.end-4))):e||console.warn("invalid IDAT chunk before frame");break;case v:m.push(i.subarray(O.start,O.end));break;default:y.push(i.subarray(O.start,O.end))}}if(0!==R.frames.length){for(var L=function(t){var e=[];e.push(h),E.set(c(t.width),0),E.set(c(t.height),4),e.push(I.makeChunk(l,E));for(var i=0,o=y;i<o.length;i++){var s=o[i];e.push(s)}for(var a=0,u=t.dataParts;a<u.length;a++){s=u[a];e.push(s)}for(var p=0,f=m;p<f.length;p++){s=f[p];e.push(s)}switch(delete t.dataParts,n.Runtime.getRuntimeType()){case n.RuntimeType.WECHAT_MINI_GAME:t.image=n.Runtime.get().newImage();var d="data:image/png;base64,"+r.Base64.encode(e);t.image.src=d;break;case n.RuntimeType.WEBPAGE:var g=URL.createObjectURL(new Blob(e,{type:"image/png"})),v=new Image;t.image=v,v.src=g,v.onload=function(){URL.revokeObjectURL(g)},v.onerror=function(t){URL.revokeObjectURL(g)}}},I=this,x=0,P=R.frames;x<P.length;x++){L(P[x])}return R}e||console.warn("not a png file")},t.toChunks=function(t){for(var e=[],i=new DataView(t.buffer),n=8;n<=t.length-12;){var r=i.getUint32(n);if(r<0||n+12+r>t.length)return void console.warn("invalid chunk length, position="+n+" length="+r+" total="+t.length);var o=i.getUint32(n+4);if(e.push({type:o,start:n,end:n+r+12}),n+=12+r,o===v)break}return e},t.makeChunk=function(t,e){var i=new Uint8Array(e.length+12),n=new DataView(i.buffer);n.setUint32(0,e.length),n.setUint32(4,t),i.set(e,8);var r=o.CRC32.calculate(i,4,e.length+4);return n.setUint32(e.length+8,r),i},t}();e.ApngParser=y},function(t,e,i){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.NORMAL=0]="NORMAL",t[t.NUMBER=1]="NUMBER",t[t.LENGTH=2]="LENGTH",t[t.PERCENT=3]="PERCENT"}(n=e.LineHeightType||(e.LineHeightType={}));var r=/^([0-9]*\.?[0-9]*)$/,o=/^([0-9]*\.?[0-9]*)px$/i,s=/^([0-9]*\.?[0-9]*)%$/,a=function(){function t(t,e){this.type=n.NORMAL,this.value=0,this.type=t,this.value=e}return t.of=function(e,i){return void 0===i&&(i=!1),"normal"===(e=e.toLowerCase())?new t(n.NORMAL,0):r.test(e)?new t(n.NUMBER,parseFloat(e)):o.test(e)?new t(n.LENGTH,parseFloat(e)):s.test(e)?new t(n.PERCENT,parseFloat(e)):void(i||console.warn("invalid line height:"+e))},t.prototype.getValue=function(t){switch(this.type){case n.NORMAL:return 1.2*t;case n.NUMBER:return t*this.value;case n.LENGTH:return this.value;case n.PERCENT:return this.value*t/100}},t.prototype.toString=function(){switch(this.type){case n.NORMAL:return"normal";case n.NUMBER:return this.value;case n.LENGTH:return this.value+"px";case n.PERCENT:return this.value+"%"}},t.prototype.clone=function(){return new t(this.type,this.value)},t}();e.LineHeight=a},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s,a=i(25),h=i(5),u=i(4),c=i(24),l=i(14),p=i(19),f=i(10),d=i(3);!function(t){t.NEVER="never",t.ALWAYS="always"}(o=e.StageLayoutPolicy||(e.StageLayoutPolicy={})),function(t){t.NEVER="never",t.AUTO="auto",t.ALWAYS="always"}(s=e.StageUpdatePolicy||(e.StageUpdatePolicy={}));var g=function(){function t(){this.touchItems=[]}return t.prototype.contains=function(t){for(var e=0,i=this.touchItems;e<i.length;e++){if(i[e].identifier===t)return!0}return!1},t.prototype.get=function(t){for(var e=0,i=this.touchItems;e<i.length;e++){var n=i[e];if(n.identifier===t)return n}},t.prototype.add=function(t){this.touchItems.push(t)},t.prototype.remove=function(t){for(var e=0;e<this.touchItems.length;++e)if(this.touchItems[e].identifier===t)return void this.touchItems.splice(e,1)},t.prototype.getTouches=function(t){for(var e=[],i=0,n=this.touchItems;i<n.length;i++){var r=n[i];(r.srcElement===t||r.srcElement.isChildOf(t))&&e.push(r)}return e},t}(),v=function(t){function e(e,i){void 0===i&&(i={});var n=t.call(this)||this;for(var r in n.option={fps:60,layoutPolicy:o.ALWAYS,updatePolicy:s.AUTO,autoClear:!0},n.touchItems=new g,n.started=!1,n.needUpdate=!1,n.eventHandlerInstalled=!1,n.eventEnabled=!0,i)n.option[r]=i[r];return n.canvas=e,n.css({width:"100%",height:"100%",left:0,top:0}),i.style&&n.css(i.style),i.noEventHandler||n.installEventHandlers(),n.ticker=new c.Ticker(n.option.fps),n.animationFactory=new a.AnimationFactory,n.resourceRegistry=new h.ResourceRegistry,n}return r(e,t),e.prototype.updateOnce=function(){this.needUpdate=!0},e.prototype.start=function(){var t=this;this.started||(this.started=!0,this.layout(),this.needUpdate=!0,this.ticker.addEventListener("tick",(function(e){t.animationFactory.onInterval(),t.option.updatePolicy===s.NEVER||!t.needUpdate&&t.option.updatePolicy!==s.ALWAYS||(t.update(),t.needUpdate=!1)})),h.ResourceRegistry.DefaultInstance.addEventListener("load",(function(e){t.updateOnce()})),this.on("update",(function(){t.updateOnce()})))},e.prototype.installEventHandlers=function(){this.eventHandlerInstalled||(this.eventHandlerInstalled=!0,u.Runtime.get().enableEvents(this))},e.prototype.enableEvents=function(){return this.eventEnabled=!0,this},e.prototype.disableEvents=function(){return this.eventEnabled=!1,this},e.prototype.getPressedTouchItems=function(t){t||(t=this);for(var e=[],i=0,n=this.touchItems.getTouches(t);i<n.length;i++){var r=n[i];r.pressed&&e.push(r.clone())}return e},e.prototype.handleMouseOrTouchEvent=function(t,e,i){if(this.eventEnabled&&this.isVisible())switch(t){case"mousedown":case"touchstart":this.handleTouchStartEvent(e,i);break;case"mouseup":this.onTouchMove(e,i),this.handleTouchEndEvent([],i);break;case"touchend":case"touchcancel":this.handleTouchEndEvent(e,i);break;case"mousemove":case"touchmove":case"mouseleave":this.onTouchMove(e,i)}},e.prototype.handleMouseWheelEvent=function(t,e,i,n,r){var o=this.globalToLocal(t,e),s=this.getObjectUnderPoint(o.x,o.y,!0);if(s){var a=new f.TouchItem(0,s,t,e,Date.now());a.deltaX=i,a.deltaY=n,this.dispatchTouchEvent(s,"mousewheel",a,!0,!0,r)}},e.prototype.update=function(){if(this.canvas&&this.isVisible()){var t=this.canvas.getContext("2d");t&&(this.option.layoutPolicy===o.ALWAYS&&this.layout(),this.option.autoClear&&t.clearRect(0,0,this.getWidth(),this.getHeight()),t.save(),this.updateContext(t),this.draw(t,!1),t.restore())}},e.prototype.calculateSize=function(){if(this.canvas&&this.isVisible()){var t=this.canvas.width||this.canvas.clientWidth,e=this.canvas.height||this.canvas.clientHeight;l.LayoutUtils.updateSize(this,t,e),l.LayoutUtils.updatePositionForAbsoluteElement(this,t,e)}},e.prototype.animate=function(t,e){return void 0===e&&(e=!0),this.animationFactory.create(t,e)},e.prototype.stopAnimation=function(t){this.animationFactory.removeByTarget(t)},e.prototype.toString=function(){return"[Stage (id="+this.id+")]"},e.prototype.dispatchTouchEvent=function(t,e,i,n,r,o){var s=new d.XObjectEvent(e,n,r,t,i);s.stage=this,s.nativeEvent=o,t.dispatchEvent(s)},e.prototype.onTouchMove=function(t,e){for(var i=[],n=[],r=0,o=t;r<o.length;r++){var s=o[r],a=this.touchItems.get(s.identifier);a?a.stageX===s.stageX&&a.stageY===s.stageY||(a.onUpdate(s),i.push(a)):n.push(s)}for(var h=0,u=i;h<u.length;h++){s=u[h];var c=this.globalToLocal(s.stageX,s.stageY);if((g=this.getObjectUnderPoint(c.x,c.y,!0))&&this.dispatchTouchEvent(g,"move",s,!0,!0,e),s.pressed&&this.dispatchTouchEvent(s.srcElement,"pressmove",s,!0,!0,e),g){if(s.currentTarget!==g){var l=g,p=s.currentTarget;for(s.currentTarget=g;p&&!l.isChildOf(p)&&l!==p;)this.dispatchTouchEvent(p,"leave",s,!1,!0,e),p=p.parent;for(;l&&l!==p;)this.dispatchTouchEvent(l,"enter",s,!1,!0,e),l=l.parent}}else s.currentTarget&&(this.dispatchTouchEvent(s.currentTarget,"leave",s,!1,!0,e),s.currentTarget=void 0)}for(var f=0,d=n;f<d.length;f++){var g;s=d[f],c=this.globalToLocal(s.stageX,s.stageY);if(g=this.getObjectUnderPoint(c.x,c.y,!0)){var v=s.switchSourceElement(g);v.pressed=!1,v.currentTarget=g,this.touchItems.add(v),this.dispatchTouchEvent(g,"move",v,!0,!0,e),this.dispatchTouchEvent(g,"enter",v,!1,!0,e)}}},e.prototype.handleTouchStartEvent=function(t,e){for(var i=new g,n=0,r=t;n<r.length;n++){var o=r[n],s=this.touchItems.get(o.identifier);if(!s||!s.pressed){s&&this.touchItems.remove(s.identifier);var a=this.getObjectUnderPoint(o.stageX,o.stageY,!0);if(a)(c=o.switchSourceElement(a)).currentTarget=a,c.pressed=!0,i.add(c),this.touchItems.add(c)}}for(var h=0,u=i.touchItems;h<u.length;h++){var c=u[h];this.dispatchTouchEvent(c.srcElement,"touchdown",c,!0,!0,e)}this.onTouchMove(t,e)},e.prototype.handleTouchEndEvent=function(t,e){this.onTouchMove(t,e);for(var i=new g,n=0,r=this.touchItems.touchItems;n<r.length;n++){for(var o=r[n],s=!1,a=0,h=t;a<h.length;a++){if(h[a].identifier===o.identifier){s=!0;break}}s||i.add(o)}for(var u=0,c=i.touchItems;u<c.length;u++){o=c[u];this.touchItems.remove(o.identifier)}for(var l=0,p=i.touchItems;l<p.length;l++){if((o=p[l]).pressed){var f=this.getObjectUnderPoint(o.stageX,o.stageY,!0);f&&this.dispatchTouchEvent(f,"touchup",o,!0,!0,e),this.dispatchTouchEvent(o.srcElement,"pressup",o,!0,!0,e),(f===o.srcElement||o.srcElement.isChildOf(f))&&this.dispatchTouchEvent(f,"click",o,!0,!0,e)}}},e}(p.Container);e.Stage=v},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(7),s=i(1),a=i(14),h=i(3),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.children=[],e}return r(e,t),e.prototype.findById=function(t){if(this.id===t)return this;for(var i=0,n=this.children;i<n.length;i++){var r=n[i];if(r.id===t)return r;if(r instanceof e){var o=r.findById(t);if(o)return o}}},e.prototype.drawContent=function(t){for(var e=0,i=this.children.slice();e<i.length;e++){var n=i[e];n.isVisible()&&(t.save(),n.updateContext(t),n.draw(t),t.restore())}},e.prototype.addChild=function(t){var e=t.parent;if(e===this){if(this.children.length>0&&this.children[this.children.length-1]===t)return this;var i=this.children.indexOf(t);return this.children.splice(i,1),this.children.push(t),t.dispatchEvent(new h.XObjectEvent("moved",!1,!0,t)),this.dispatchEvent(new h.XObjectEvent("update",!1,!0,this)),this}return e&&e.removeChild(t),t.parent=this,this.children.push(t),t.dispatchEvent(new h.XObjectEvent("added",!1,!0,t)),this.dispatchEvent(new h.XObjectEvent("update",!1,!0,this)),this},e.prototype.addChildren=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0,n=t;i<n.length;i++){var r=n[i];this.addChild(r)}return this},e.prototype.addChildAt=function(t,e){var i=t.parent;if(i===this){if(this.children[e]===t)return this;var n=this.children.indexOf(t);return n>e?(this.children.splice(n,1),this.children.splice(e,0,t)):(this.children.splice(e,0,t),this.children.splice(n,1)),t.dispatchEvent(new h.XObjectEvent("moved",!1,!0,t)),this.dispatchEvent(new h.XObjectEvent("update",!1,!0,this)),this}return i&&i.removeChild(t),t.parent=this,this.children.splice(e,0,t),t.dispatchEvent(new h.XObjectEvent("added",!1,!0,t)),this.dispatchEvent(new h.XObjectEvent("update",!1,!0,this)),this},e.prototype.removeChild=function(t){var e=this.children.indexOf(t);return e<0?void 0:(this.children.splice(e,1),t.parent=void 0,t.dispatchEvent(new h.XObjectEvent("removed",!1,!0,t)),this.dispatchEvent(new h.XObjectEvent("update",!1,!0,this)),t)},e.prototype.removeChildAt=function(t){if(t<0||t>=this.children.length)return null;var e=this.children[t];return this.children.splice(t,1),e.dispatchEvent(new h.XObjectEvent("removed",!1,!0,e)),this.dispatchEvent(new h.XObjectEvent("update",!1,!0,this)),e},e.prototype.removeAllChildren=function(){for(;this.children.length>0;)this.removeChildAt(0);return this},e.prototype.getChildAt=function(t){return this.children[t]},e.prototype.sortChildren=function(t){return this.children.sort(t),this.dispatchEvent(new h.XObjectEvent("update",!1,!0,this)),this},e.prototype.getChildIndex=function(t){return this.children.indexOf(t)},e.prototype.swapChildrenAt=function(t,e){if(t<0||t>=this.children.length)throw new Error("invalid index:"+t);if(e<0||e>=this.children.length)throw new Error("invalid index:"+e);if(t===e)return this;var i=this.children[t],n=this.children[e];return this.children[t]=n,this.children[e]=i,i.dispatchEvent(new h.XObjectEvent("moved",!1,!0,i)),n.dispatchEvent(new h.XObjectEvent("moved",!1,!0,n)),this.dispatchEvent(new h.XObjectEvent("update",!1,!0,this)),this},e.prototype.swapChildren=function(t,e){return this.swapChildrenAt(this.getChildIndex(t),this.getChildIndex(e))},e.prototype.layout=function(){this.calculateSize(),this.layoutChildren()},e.prototype.layoutChildren=function(){for(var t=[],e=[],i=this.getContentRect(),n=i.width,r=0,o=this.children;r<o.length;r++){(f=o[r]).isVisible()&&(f.layout(),f.style.position===s.Position.ABSOLUTE||f.style.position===s.Position.FIXED?t.push(f):(e.push(f),n=Math.max(n,f.getOuterWidth())))}for(var h=[],u=[],c=0,l=0,p=e;l<p.length;l++){var f=p[l];(u.length>0&&f.style.display===s.Display.BLOCK||c+f.getOuterWidth()>n)&&(h.push(u),u=[],c=0),u.push(f),c+=f.getOuterWidth()}u.length>0&&h.push(u);for(var d=this.getLineHeight(),g=0,v=0,y=h;v<y.length;v++){var m=y[v],E=0;c=0;for(var T=0,R=m;T<R.length;T++){(f=R[T]).rect.y=g+i.y+(f.style.marginTop?f.style.marginTop.getValue(this.rect.height):0),E=Math.max(E,f.getOuterHeight()),c+=f.getOuterWidth()}g+=Math.max(d,E);var b=i.x;switch(this.style.textAlign){case s.TextAlign.RIGHT:b=i.x+n-c;break;case s.TextAlign.CENTER:b=i.x+(n-c)/2;break;default:b=i.x}for(var w=0,A=m;w<A.length;w++){(f=A[w]).rect.x=b+(f.style.marginLeft?f.style.marginLeft.getValue(this.rect.width):0),b+=f.getOuterWidth()}}!this.style.width&&n>i.width&&(this.rect.width+=n-i.width),!this.style.height&&g>i.height&&(this.rect.height+=g-i.height);for(var O=0,B=t;O<B.length;O++){f=B[O];a.LayoutUtils.updatePositionForAbsoluteElement(f,this.rect.width,this.rect.height)}},e.prototype.getObjectUnderPoint=function(t,i,n){for(var r=this.children,o=r.length-1;o>=0;o--){var s=r[o];if(s.isVisible()&&(!n||s.isPointerEventsEnabled())){var a=this.localToLocal(t,i,s);if(s instanceof e){var h=s.getObjectUnderPoint(a.x,a.y,n);if(h)return h}else if(s.hitTest(a.x,a.y))return s}}if(this.hitTest(t,i))return this},e.prototype.load=function(t,e){return void 0===e&&(e=!0),e&&this.removeAllChildren(),this.addChildren.apply(this,(new o.HtmlParser).parse(t)),this},e.prototype.toString=function(){return"[Container (id="+this.id+")]"},e}(h.XObject);e.Container=u,o.HtmlParser.registerTag("container",u),o.HtmlParser.registerTag("div",u)},function(t,e,i){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.NAME_START=0]="NAME_START",t[t.NAME=1]="NAME",t[t.NAME_END=2]="NAME_END",t[t.PARAMETER_START=3]="PARAMETER_START",t[t.PARAMETER=4]="PARAMETER",t[t.PARAMETER_END=5]="PARAMETER_END",t[t.END=6]="END"}(n||(n={}));var r=function(){function t(){}return t.isBlank=function(t){return" "===t||"\t"===t||"\r"===t||"\n"===t},t.parse=function(t,e){void 0===e&&(e=!1);for(var i={name:void 0,arguments:[]},r=n.NAME_START,o="",s=0,a=t.length,h=0;h<a;++h){var u=t[h];switch(r){case n.NAME_START:this.isBlank(u)||(s=h,r=n.NAME);break;case n.NAME:if(this.isBlank(u)||")"===u)return void(e||console.warn("invalid function:"+t));"("===u&&(i.name=t.substring(s,h),r="("===u?n.PARAMETER_START:n.NAME_END);break;case n.NAME_END:if("("===u){r=n.PARAMETER_START;break}if(!this.isBlank(u))return void(e||console.warn("invalid function:"+t));case n.PARAMETER_START:if(this.isBlank(u))break;if('"'===u||"'"===u)r=n.PARAMETER,s=h+1,o=u;else if(")"===u)r=n.END;else{if(","===u)return void(e||console.warn("invalid function:"+t));r=n.PARAMETER,s=h,o=""}break;case n.PARAMETER:""!==o?o===u&&(r=n.PARAMETER_END,i.arguments.push(t.substring(s,h)),o=""):","===u?(r=n.PARAMETER_START,i.arguments.push(t.substring(s,h).trim()),o=""):")"===u&&(r=n.END,i.arguments.push(t.substring(s,h).trim()),o="");break;case n.PARAMETER_END:if(this.isBlank(u))break;","===u?r=n.PARAMETER_START:")"===u&&(r=n.END);break;case n.END:if(!this.isBlank(u))return void(e||console.warn("invalid function:"+t))}}if(r===n.END)return i;e||console.warn("invalid function:"+t)},t}();e.FunctionParser=r},function(t,e,i){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.START=0]="START",t[t.VALUE=1]="VALUE",t[t.FUNC=2]="FUNC"}(n||(n={}));var r=function(){function t(t){void 0===t&&(t=""),this.stopLetters="",this.stopLetters=t}return t.prototype.isSplitter=function(t){return" "===t||"\t"===t||"\r"===t||"\n"===t},t.prototype.isStopLetter=function(t){return this.stopLetters&&this.stopLetters.indexOf(t)>=0},t.prototype.tokenize=function(t){for(var e=t.length,i=[],r=n.START,o="",s=0,a=0;a<e;++a){var h=t[a];switch(r){case n.START:this.isStopLetter(h)?i.push(h):this.isSplitter(h)||(s=a,r=n.VALUE,o="'"===h||'"'===h?h:"");break;case n.VALUE:""!==o?h===o&&(r=n.START,i.push(t.substring(s+1,a))):"("===h?r=n.FUNC:this.isSplitter(h)?(r=n.START,i.push(t.substring(s,a))):this.isStopLetter(h)&&(r=n.START,i.push(t.substring(s,a)),i.push(h));break;case n.FUNC:")"===h&&(r=n.START,i.push(t.substring(s,a+1)))}}return r!==n.START&&(""===o?i.push(t.substring(s)):i.push(t.substring(s+1))),i},t}();e.CSSTokenizer=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(12);!function(t){t.SOLID="solid"}(n=e.BorderStyle||(e.BorderStyle={}));var o=/^[\s]*([^\s]+)[\s]+([\w]+)[\s]+(.*)$/,s=function(){function t(t,e,i){this.width=0,this.style=n.SOLID,this.color=r.Color.NONE,this.width=t,this.style=e,this.color=i}return t.of=function(e,i){void 0===i&&(i=!1);var s=e.match(o);if(s){var a=r.Color.of(s[3],i);if(a)return new t(parseFloat(s[1]),n.SOLID,a);i||console.warn("invalid border:"+e)}else i||console.warn("invalid border:"+e)},t.prototype.toString=function(){return this.width.toString()+" "+this.style+" "+this.color.toString()},t.prototype.equals=function(t){return this.width===t.width&&this.style===t.style&&this.color.equals(t.color)},t.prototype.isEnable=function(){return this.width>0&&this.color.a>0},t.prototype.clone=function(){return new t(this.width,this.style,this.color.clone())},t.prototype.update=function(e,i){return new t(this.width+(e.width-this.width)*i,this.style,this.color.update(e.color,i))},t.prototype.convertFrom=function(e){var i=t.of(e+"");return void 0===i?new t(0,n.SOLID,r.Color.BLACK):i},t.prototype.isAnimatable=function(){return!0},t.DEFAULT=new t(0,n.SOLID,r.Color.BLACK),t}();e.Border=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.isAbsolute=function(t){return t.indexOf("://")>0||t.startsWith("//")},t}();e.URLUtils=n},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(6),s=i(4),a=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.now=i,r.delay=n,r}return r(e,t),e}(o.Event);e.TickerEvent=a;var h=function(t){function e(e){void 0===e&&(e=60);var i=t.call(this)||this;return i.duration=1e3/60,i.stopped=!0,e<=0&&(console.warn("invalid fps:"+e+", reset to 60"),e=60),i.setFps(e),i.lastTickTime=0,i.start(),i}return r(e,t),e.prototype.setFps=function(t){this.duration=1e3/t},e.prototype.start=function(){if(this.stopped){this.stopped=!1,s.Runtime.get().requestAnimationFrame(this.onAnimationFrame.bind(this));var t=Date.now();this.dispatchEvent(new a("start",t,t-this.lastTickTime))}},e.prototype.stop=function(){this.stopped=!0;var t=Date.now();this.dispatchEvent(new a("stop",t,t-this.lastTickTime))},e.prototype.onAnimationFrame=function(t){this.stopped||(t-this.lastTickTime>=this.duration&&(this.dispatchEvent(new a("tick",t,0===this.lastTickTime?0:t-this.lastTickTime)),this.lastTickTime=t),s.Runtime.get().requestAnimationFrame(this.onAnimationFrame.bind(this)))},e}(o.EventDispatcher);e.Ticker=h},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(6),s=i(2),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.animations=[],e}return r(e,t),e.prototype.create=function(t,e){(e||"number"!=typeof t)&&this.removeByTarget(t);var i=new s.Animation(t);return this.animations.push(i),i},e.prototype.removeByTarget=function(t){for(var e=0,i=this.animations;e<i.length;e++){var n=i[e];n.target===t&&n.state===s.AnimationState.RUNNING&&n.cancel()}},e.prototype.clear=function(){for(var t=0,e=this.animations;t<e.length;t++){e[t].cancel()}},e.prototype.onInterval=function(){var t=this.animations.length;if(0===t)return!1;for(var e=!1,i=0;i<t;++i)this.animations[i].onInterval()&&(e=!0);e&&this.dispatchEvent(new o.Event("update",!1,!0));for(i=this.animations.length-1;i>=0;--i){var n=this.animations[i];n.state!==s.AnimationState.COMPLETED&&n.state!==s.AnimationState.CANCELLED||this.animations.splice(i,1)}return e},e}(o.EventDispatcher);e.AnimationFactory=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(27),r=Math.PI/180,o=function(){function t(t,e,i,n,r,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===r&&(r=0),void 0===o&&(o=0),this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.setValues(t,e,i,n,r,o)}return t.prototype.setValues=function(t,e,i,n,r,o){return void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===r&&(r=0),void 0===o&&(o=0),this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=o,this},t.prototype.append=function(t,e,i,n,r,o){var s=this.a,a=this.b,h=this.c,u=this.d;return 1===t&&0===e&&0===i&&1===n||(this.a=s*t+h*e,this.b=a*t+u*e,this.c=s*i+h*n,this.d=a*i+u*n),this.tx=s*r+h*o+this.tx,this.ty=a*r+u*o+this.ty,this},t.prototype.prepend=function(t,e,i,n,r,o){var s=this.a,a=this.c,h=this.tx;return this.a=t*s+i*this.b,this.b=e*s+n*this.b,this.c=t*a+i*this.d,this.d=e*a+n*this.d,this.tx=t*h+i*this.ty+r,this.ty=e*h+n*this.ty+o,this},t.prototype.appendMatrix=function(t){return this.append(t.a,t.b,t.c,t.d,t.tx,t.ty)},t.prototype.prependMatrix=function(t){return this.prepend(t.a,t.b,t.c,t.d,t.tx,t.ty)},t.prototype.appendTransform=function(t,e,i,n,o,s,a,h,u){var c,l;if(o%360){var p=o*r;c=Math.cos(p),l=Math.sin(p)}else c=1,l=0;return s||a?(s*=r,a*=r,this.append(Math.cos(a),Math.sin(a),-Math.sin(s),Math.cos(s),t,e),this.append(c*i,l*i,-l*n,c*n,0,0)):this.append(c*i,l*i,-l*n,c*n,t,e),(h||u)&&(this.tx-=h*this.a+u*this.c,this.ty-=h*this.b+u*this.d),this},t.prototype.prependTransform=function(t,e,i,n,o,s,a,h,u){var c,l;if(o%360){var p=o*r;c=Math.cos(p),l=Math.sin(p)}else c=1,l=0;return(h||u)&&(this.tx-=h,this.ty-=u),s||a?(s*=r,a*=r,this.prepend(c*i,l*i,-l*n,c*n,0,0),this.prepend(Math.cos(a),Math.sin(a),-Math.sin(s),Math.cos(s),t,e)):this.prepend(c*i,l*i,-l*n,c*n,t,e),this},t.prototype.rotate=function(t){t*=r;var e=Math.cos(t),i=Math.sin(t),n=this.a,o=this.b;return this.a=n*e+this.c*i,this.b=o*e+this.d*i,this.c=-n*i+this.c*e,this.d=-o*i+this.d*e,this},t.prototype.skew=function(t,e){return t*=r,e*=r,this.append(Math.cos(e),Math.sin(e),-Math.sin(t),Math.cos(t),0,0),this},t.prototype.scale=function(t,e){return this.a*=t,this.b*=t,this.c*=e,this.d*=e,this},t.prototype.translate=function(t,e){return this.tx+=this.a*t+this.c*e,this.ty+=this.b*t+this.d*e,this},t.prototype.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},t.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,r=this.tx,o=t*n-e*i;return this.a=n/o,this.b=-e/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-n*r)/o,this.ty=-(t*this.ty-e*r)/o,this},t.prototype.isIdentity=function(){return 0===this.tx&&0===this.ty&&1===this.a&&0===this.b&&0===this.c&&1===this.d},t.prototype.equals=function(t){return this.tx===t.tx&&this.ty===t.ty&&this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d},t.prototype.transformPoint=function(t,e){var i=new n.Point(0,0);return i.x=t*this.a+e*this.c+this.tx,i.y=t*this.b+e*this.d+this.ty,i},t.prototype.copy=function(t){return this.setValues(t.a,t.b,t.c,t.d,t.tx,t.ty)},t.prototype.clone=function(){return new t(this.a,this.b,this.c,this.d,this.tx,this.ty)},t.prototype.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},t}();e.Matrix2D=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.equals=function(t){return this.x===t.x&&this.y==this.y},t.prototype.clone=function(){return new t(this.x,this.y)},t}();e.Point=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.matchAll=function(t,e){for(var i=[],n=new RegExp(e,e.flags.includes("g")?e.flags:e.flags+"g"),r=n.exec(t);r;)i.push(r),r=n.exec(t);return i},t}();e.StringUtils=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=function(){function t(){}return t.tripletToBase64=function(t){return n[t>>18&63]+n[t>>12&63]+n[t>>6&63]+n[63&t]},t.next=function(t,e){if(t[e.i].length>e.j)return t[e.i][e.j++];for(;0===t[++e.i].length;);return e.j=1,t[e.i][0]},t.encode=function(t){for(var e=[],i=0,r=0,o=t;r<o.length;r++){var s=o[r];i+=s.length,e.push({size:s.length,current:0})}for(var a={i:0,j:0},h=i%3,u=[],c=Math.floor(i/3),l=0;l<c;++l)u.push(this.tripletToBase64((this.next(t,a)<<16&16711680)+(this.next(t,a)<<8&65280)+(255&this.next(t,a))));if(1===h){var p=this.next(t,a);u.push(n[p>>2]+n[p<<4&63]+"==")}else if(2===h){p=(this.next(t,a)<<8)+this.next(t,a);u.push(n[p>>10]+n[p>>4&63]+n[p<<2&63]+"=")}return u.join("")},t}();e.Base64=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});for(var n=new Uint32Array(256),r=0;r<256;r++){for(var o=r,s=0;s<8;s++)o=0!=(1&o)?3988292384^o>>>1:o>>>1;n[r]=o}var a=function(){function t(){}return t.calculate=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=t.length-e);for(var r=-1,o=e,s=e+i;o<s;o++)r=r>>>8^n[255&(r^t[o])];return-1^r},t}();e.CRC32=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(12),r=i(21),o=function(){function t(t,e,i,n){this.offsetX=t,this.offsetY=e,this.blur=i,this.color=n}return t.of=function(e,i){void 0===i&&(i=!1);var o=(new r.CSSTokenizer).tokenize(e);if(4===o.length){var s=parseFloat(o[0]),a=parseFloat(o[1]),h=parseFloat(o[2]),u=n.Color.of(o[3],i);if(!(isNaN(s)||isNaN(a)||isNaN(h)||void 0===u))return new t(s,a,h,u);i||console.warn("invalid shadow:"+e)}else i||console.warn("invalid shadow:"+e)},t.prototype.toString=function(){return"[Shadow ("+this.color.toString()+" "+this.offsetX+" "+this.offsetY+" "+this.blur+")]"},t.prototype.clone=function(){return new t(this.offsetX,this.offsetY,this.blur,this.color)},t.prototype.isEnable=function(){return this.color.a>0&&(0!==this.offsetX||0!==this.offsetY||0!==this.blur)},t.prototype.update=function(e,i){return new t(this.offsetX+(e.offsetX-this.offsetX)*i,this.offsetY+(e.offsetY-this.offsetY)*i,this.blur+(e.blur-this.blur)*i,this.color.update(e.color,i))},t.prototype.convertFrom=function(e){var i=t.of(e+"");return void 0===i?new t(0,0,0,n.Color.BLACK):i},t.prototype.isAnimatable=function(){return!0},t}();e.Shadow=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(33),r=i(1),o=function(){function t(){}return t.drawElement=function(t,e){var i=t.style;i.compositeOperation&&(e.globalCompositeOperation=i.compositeOperation);var o,s=i.borderTop?i.borderTop.width:0,a=i.borderRight?i.borderRight.width:0,h=i.borderBottom?i.borderBottom.width:0,u=i.borderLeft?i.borderLeft.width:0,c=(new n.RoundRect).applySize(t.rect.width,t.rect.height).applyRadius(i.borderTopLeftRadius,i.borderTopRightRadius,i.borderBottomLeftRadius,i.borderBottomRightRadius);if(o=s>0||a>0||h>0||u>0?c.applyBorder(s,a,h,u):c,i.shadow&&i.shadow.isEnable()){e.save(),e.shadowBlur=i.shadow.blur,e.shadowColor=i.shadow.color.toString(),e.shadowOffsetX=i.shadow.offsetX,e.shadowOffsetY=i.shadow.offsetY;var l=Math.abs(i.shadow.offsetX)+i.shadow.blur,p=Math.abs(i.shadow.offsetY)+i.shadow.blur,f=new n.RoundRect(c.x1-l,c.y1-p,c.x2+l,c.y2+p);e.beginPath(),f.makePath(e,!0,!0),c.makePath(e,!1,!1),e.closePath(),e.clip(),e.fillStyle="black",e.beginPath(),c.makePath(e,!0,!0),e.closePath(),e.fill(),e.restore()}if(e.save(),t.drawBackground(e,c,o),e.restore(),s>0||a>0||h>0||u>0){var d=i.borderTop?i.borderTop.color:void 0,g=i.borderRight?i.borderRight.color:void 0,v=i.borderBottom?i.borderBottom.color:void 0,y=i.borderLeft?i.borderLeft.color:void 0,m=[];d&&m.push(d),g&&m.push(g),v&&m.push(v),y&&m.push(y);for(var E=m[0],T=!0,R=1;R<m.length;++R)E.equals(m[R])||(T=!1);T?(e.beginPath(),c.makePath(e,!0,!0),o.makePath(e,!1,!1),e.closePath(),e.fillStyle=E.toString(),e.fill()):(y&&(e.save(),e.beginPath(),e.moveTo(c.x1,c.y1),d||e.lineTo(o.x1+o.leftTopRadiusX,c.y1),e.lineTo(o.x1+o.leftTopRadiusX,o.y1+o.leftTopRadiusY),e.lineTo(o.x1+o.leftBottomRadiusX,o.y2-o.leftBottomRadiusY),v||e.lineTo(o.x1+o.leftBottomRadiusX,c.y2),e.lineTo(c.x1,c.y2),e.closePath(),e.clip(),e.beginPath(),c.makePath(e,!0,!0),o.makePath(e,!1,!1),e.closePath(),e.fillStyle=y.toString(),e.fill(),e.restore()),d&&(e.save(),e.beginPath(),e.moveTo(c.x2,c.y1),g||e.lineTo(c.x2,c.y1+c.rightTopRadiusY),e.lineTo(o.x2-o.rightTopRadiusX,o.y1+o.rightTopRadiusY),e.lineTo(o.x1+o.leftTopRadiusX,o.y1+o.leftTopRadiusY),y||e.lineTo(c.x1,c.y1+c.leftTopRadiusY),e.lineTo(c.x1,c.y1),e.closePath(),e.clip(),e.beginPath(),c.makePath(e,!0,!0),o.makePath(e,!1,!1),e.closePath(),e.fillStyle=d.toString(),e.fill(),e.restore()),g&&(e.save(),e.beginPath(),e.moveTo(c.x2,c.y2),v||e.lineTo(c.x2-c.rightBottomRadiusX,c.y2),e.lineTo(o.x2-o.rightBottomRadiusX,o.y2-o.rightBottomRadiusY),e.lineTo(o.x2-o.rightTopRadiusX,o.y1+o.rightTopRadiusY),d||e.lineTo(o.x2-o.rightTopRadiusX,c.y1),e.lineTo(c.x2,c.y1),e.closePath(),e.clip(),e.beginPath(),c.makePath(e,!0,!0),o.makePath(e,!1,!1),e.closePath(),e.fillStyle=g.toString(),e.fill(),e.restore()),v&&(e.save(),e.beginPath(),e.moveTo(c.x1,c.y2),y||e.lineTo(c.x1,c.y2-c.leftBottomRadiusY),e.lineTo(o.x1+o.leftBottomRadiusX,o.y2-o.leftBottomRadiusY),e.lineTo(o.x2-o.rightBottomRadiusX,o.y2-o.rightBottomRadiusY),g||e.lineTo(c.x2,c.y2-c.rightBottomRadiusY),e.lineTo(c.x2,c.y2),e.closePath(),e.clip(),e.beginPath(),c.makePath(e,!0,!0),o.makePath(e,!1,!1),e.closePath(),e.fillStyle=v.toString(),e.fill(),e.restore()))}t.style.overflow===r.Overflow.HIDDEN?(e.save(),o.clip(e),t.drawContent(e),e.restore()):t.drawContent(e)},t}();e.DrawUtils=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(8),r=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.leftTopRadiusX=0,this.leftTopRadiusY=0,this.rightTopRadiusX=0,this.rightTopRadiusY=0,this.rightBottomRadiusX=0,this.rightBottomRadiusY=0,this.leftBottomRadiusX=0,this.leftBottomRadiusY=0,this.x1=t,this.y1=e,this.x2=i,this.y2=n}return t.prototype.toRect=function(){return new n.Rect(this.x1,this.y1,this.x2-this.x1+1,this.y2-this.y1+1)},t.prototype.applySize=function(t,e){return this.x2=this.x1+t-1,this.y2=this.y1+e-1,this},t.prototype.applyRadius=function(t,e,i,n){var r=this.x2-this.x1+1,o=this.y2-this.y1+1;if(t&&(this.leftTopRadiusX=t.value1.getValue(r),this.leftTopRadiusY=t.value2.getValue(o)),e&&(this.rightTopRadiusX=e.value1.getValue(r),this.rightTopRadiusY=e.value2.getValue(o)),i&&(this.leftBottomRadiusX=i.value1.getValue(r),this.leftBottomRadiusY=i.value1.getValue(o)),n&&(this.rightBottomRadiusX=n.value1.getValue(r),this.rightBottomRadiusY=n.value2.getValue(o)),this.leftTopRadiusX+this.rightTopRadiusX>r){var s=r/(this.leftTopRadiusX+this.rightTopRadiusX);this.leftTopRadiusX*=s,this.rightTopRadiusX*=s}if(this.leftBottomRadiusX+this.rightBottomRadiusX>r){s=r/(this.leftBottomRadiusX+this.rightBottomRadiusX);this.leftBottomRadiusX*=s,this.rightBottomRadiusX*=s}if(this.leftTopRadiusY+this.leftBottomRadiusY>o){s=o/(this.leftTopRadiusY+this.leftBottomRadiusY);this.leftTopRadiusY*=s,this.leftBottomRadiusY*=s}if(this.rightTopRadiusY+this.rightBottomRadiusY>o){s=o/(this.rightTopRadiusY+this.rightBottomRadiusY);this.rightTopRadiusY*=s,this.rightBottomRadiusY*=s}return this},t.prototype.applyBorder=function(e,i,n,r){if(0===e&&0===i&&0===n&&0===r)return this;var o=new t;return o.x1=this.x1+r,o.y1=this.y1+e,o.x2=this.x2-i,o.y2=this.y2-n,o.leftTopRadiusX=Math.max(0,this.leftTopRadiusX-r),o.leftTopRadiusY=Math.max(0,this.leftTopRadiusY-e),0!==o.leftTopRadiusX&&0!==o.leftTopRadiusY||(o.leftTopRadiusX=o.leftTopRadiusY=0),o.rightTopRadiusX=Math.max(0,this.rightTopRadiusX-i),o.rightTopRadiusY=Math.max(0,this.rightTopRadiusY-e),0!==o.rightTopRadiusX&&0!==o.rightTopRadiusY||(o.rightTopRadiusX=o.rightTopRadiusY=0),o.rightBottomRadiusX=Math.max(0,this.rightBottomRadiusX-i),o.rightBottomRadiusY=Math.max(0,this.rightBottomRadiusY-n),0!==o.rightBottomRadiusX&&0!==o.rightBottomRadiusY||(o.rightBottomRadiusX=o.rightBottomRadiusY=0),o.leftBottomRadiusX=Math.max(0,this.leftBottomRadiusX-r),o.leftBottomRadiusY=Math.max(0,this.leftBottomRadiusY-n),0!==o.leftBottomRadiusX&&0!==o.leftBottomRadiusY||(o.leftBottomRadiusX=o.leftBottomRadiusY=0),o},t.prototype.makePath=function(t,e,i){var n=this.x1,r=this.y1,o=this.x2+1,s=this.y2+1;i?(e?t.moveTo(n,r+this.leftTopRadiusY):t.lineTo(n,r+this.leftTopRadiusY),this.arcTo(n,r+this.leftTopRadiusY,n,r,n+this.leftTopRadiusX,r,t),this.arcTo(o-this.rightTopRadiusX,r,o,r,o,r+this.rightTopRadiusY,t),this.arcTo(o,s-this.rightBottomRadiusY,o,s,o-this.rightBottomRadiusX,s,t),this.arcTo(n+this.leftBottomRadiusX,s,n,s,n,s-this.leftBottomRadiusY,t),0!==this.leftTopRadiusX&&0!==this.leftTopRadiusY?t.lineTo(n,r+this.leftTopRadiusY):t.lineTo(n,r)):(e?t.moveTo(n,r+this.leftTopRadiusY):t.lineTo(n,r+this.leftTopRadiusY),this.arcTo(n,s-this.leftBottomRadiusY,n,s,n+this.leftBottomRadiusX,s,t),this.arcTo(o-this.rightBottomRadiusX,s,o,s,o,s-this.rightBottomRadiusY,t),this.arcTo(o,r+this.rightTopRadiusY,o,r,o-this.rightTopRadiusX,r,t),this.arcTo(n+this.leftTopRadiusX,r,n,r,n,r+this.leftTopRadiusY,t))},t.prototype.clip=function(t){return t.beginPath(),this.makePath(t,!0,!0),t.closePath(),t.clip(),this},t.prototype.arcTo=function(t,e,i,n,r,o,s){s.lineTo(t,e);var a=Math.abs(t-r),h=Math.abs(e-o),u=1e-6;a<u&&h<u||(a<u||h<u?s.lineTo(r,o):Math.abs(a-h)<u?s.arcTo(i,n,r,o,a):s.quadraticCurveTo(i,n,r,o))},t}();e.RoundRect=r},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(2),s=i(7),a=i(5),h=i(18),u=i(3),c=function(t){function e(e){var i=t.call(this,e,1e3*e.spriteSheet.frames.length/e.spriteSheet.fps)||this;return i.sprite=e,i}return r(e,t),e.prototype.onUpdate=function(t){if(this.sprite.spriteSheet&&0!==this.sprite.spriteSheet.frames.length){var e=Math.min(this.sprite.spriteSheet.frames.length-1,Math.floor(this.sprite.spriteSheet.frames.length*t));return e===this.sprite.currentFrame?void 0:(this.sprite.currentFrame=e,this.sprite.dispatchEvent(new u.XObjectEvent("update",!0,!0,this.sprite)),{currentFrame:e})}},e}(o.AnimationStep),l=function(t){function e(e){var i=t.call(this,e)||this;return i.currentFrame=0,i}return r(e,t),e.prototype.setSpriteSheet=function(t){return this.spriteSheet=t,this.spriteSheet&&this.spriteSheet.url&&a.ResourceRegistry.DefaultInstance.add(this.spriteSheet.url,a.ResourceType.IMAGE),this.dispatchEvent(new u.XObjectEvent("update",!0,!0,this)),this},e.prototype.getStage=function(){for(var t=this;t;){if(t instanceof h.Stage)return t;t=t.parent}},e.prototype.play=function(t){var e=this;void 0===t&&(t=-1),this.animation&&(this.animation.cancel(),this.animation=void 0);var i=this.getStage();return i&&(this.animation=i.animate(this).addStep(new c(this)).times(t),this.animation.addEventListener("complete",(function(){return e.dispatchEvent(new u.XObjectEvent("stop",!1,!0,e))})),this.dispatchEvent(new u.XObjectEvent("play",!1,!0,this))),this},e.prototype.pause=function(){return this.animation&&this.animation.pause()&&this.dispatchEvent(new u.XObjectEvent("pause",!1,!0,this)),this},e.prototype.resume=function(){return this.animation&&this.animation.resume()&&this.dispatchEvent(new u.XObjectEvent("resume",!1,!0,this)),this},e.prototype.stop=function(){return this.animation&&(this.animation.cancel(),this.animation=void 0),this},e.prototype.times=function(t){return this.play(t)},e.prototype.setCurrentFrame=function(t){return this.currentFrame=t,this},e.prototype.toNextFrame=function(){return this.currentFrame=(this.currentFrame+1)%this.spriteSheet.frames.length,this},e.prototype.toPreviousFrame=function(){return this.currentFrame=(this.currentFrame-1+this.spriteSheet.frames.length)%this.spriteSheet.frames.length,this},e.prototype.drawContent=function(t){if(this.spriteSheet&&0!==this.spriteSheet.frames.length){var e,i=this.spriteSheet.frames[this.currentFrame],n=this.getContentRect();if(e=i.image?i.image:this.spriteSheet.image||this.spriteSheet.url&&a.ResourceRegistry.DefaultInstance.get(this.spriteSheet.url)){var r=n.width/this.spriteSheet.width,o=n.height/this.spriteSheet.height,s=void 0!==i.destX?i.destX:0,h=void 0!==i.destY?i.destY:0,u=void 0!==i.destWidth?i.destWidth:this.spriteSheet.width-s,c=void 0!==i.destHeight?i.destHeight:this.spriteSheet.height-h,l=void 0!==i.srcX?i.srcX:0,p=void 0!==i.srcY?i.srcY:0,f=void 0!==i.srcWidth?i.srcWidth:u,d=void 0!==i.srcHeight?i.srcHeight:c;try{t.drawImage(e,l,p,f,d,s*r,h*o,u*r,c*o)}catch(t){return}}}},e}(u.XObject);e.Sprite=l,s.HtmlParser.registerTag("sprite",l)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4);e.Runtime=n.Runtime;var r=i(24);e.Ticker=r.Ticker;var o=i(25);e.AnimationFactory=o.AnimationFactory;var s=i(2);e.AnimationValueType=s.AnimationValueType;var a=i(2);e.AnimateEventType=a.AnimateEventType;var h=i(2);e.AnimateEvent=h.AnimateEvent;var u=i(2);e.AnimationStep=u.AnimationStep;var c=i(2);e.AnimationState=c.AnimationState;var l=i(2);e.Animation=l.Animation;var p=i(0);e.Linear=p.Linear;var f=i(0);e.PowIn=f.PowIn;var d=i(0);e.PowOut=d.PowOut;var g=i(0);e.PowInOut=g.PowInOut;var v=i(0);e.SineIn=v.SineIn;var y=i(0);e.SineOut=y.SineOut;var m=i(0);e.SineInOut=m.SineInOut;var E=i(0);e.BackIn=E.BackIn;var T=i(0);e.BackOut=T.BackOut;var R=i(0);e.BackInOut=R.BackInOut;var b=i(0);e.CircIn=b.CircIn;var w=i(0);e.CircOut=w.CircOut;var A=i(0);e.CircInOut=A.CircInOut;var O=i(0);e.BounceOut=O.BounceOut;var B=i(0);e.BounceIn=B.BounceIn;var S=i(0);e.BounceInOut=S.BounceInOut;var L=i(0);e.ElasticIn=L.ElasticIn;var I=i(0);e.ElasticOut=I.ElasticOut;var x=i(0);e.ElasticInOut=x.ElasticInOut;var P=i(0);e.AlgorithmFactory=P.AlgorithmFactory;var C=i(33);e.RoundRect=C.RoundRect;var F=i(26);e.Matrix2D=F.Matrix2D;var M=i(27);e.Point=M.Point;var N=i(8);e.Rect=N.Rect;var D=i(11);e.BaseValueUnit=D.BaseValueUnit;var k=i(11);e.BaseValue=k.BaseValue;var _=i(12);e.Color=_.Color;var U=i(6);e.Event=U.Event;var V=i(6);e.EventDispatcher=V.EventDispatcher;var X=i(3);e.TouchEvent=X.XObjectEvent;var Y=i(3);e.XObject=Y.XObject;var H=i(18);e.StageLayoutPolicy=H.StageLayoutPolicy;var G=i(18);e.StageUpdatePolicy=G.StageUpdatePolicy;var j=i(41);e.Scrollable=j.Scrollable;var W=i(18);e.Stage=W.Stage;var z=i(42);e.Text=z.Text;var K=i(34);e.Sprite=K.Sprite;var q=i(19);e.Container=q.Container;var Z=i(43);e.Img=Z.Img;var Q=i(10);e.TouchItem=Q.TouchItem;var $=i(44);e.Apng=$.Apng;var J=i(20);e.FunctionParser=J.FunctionParser;var tt=i(21);e.CSSTokenizer=tt.CSSTokenizer;var et=i(16);e.ApngData=et.ApngData;var it=i(16);e.ApngFrame=it.ApngFrame;var nt=i(16);e.ApngParser=nt.ApngParser;var rt=i(7);e.HtmlParser=rt.HtmlParser;var ot=i(5);e.ResourceType=ot.ResourceType;var st=i(5);e.ResourceRegistryEvent=st.ResourceRegistryEvent;var at=i(5);e.ResourceRegistry=at.ResourceRegistry;var ht=i(22);e.BorderStyle=ht.BorderStyle;var ut=i(22);e.Border=ut.Border;var ct=i(31);e.Shadow=ct.Shadow;var lt=i(17);e.LineHeightType=lt.LineHeightType;var pt=i(17);e.LineHeight=pt.LineHeight;var ft=i(13);e.FontStyle=ft.FontStyle;var dt=i(13);e.FontVariant=dt.FontVariant;var gt=i(13);e.FontWeight=gt.FontWeight;var vt=i(13);e.Font=vt.Font;var yt=i(9);e.BackgroundAttachment=yt.BackgroundAttachment;var mt=i(9);e.BackgroundRepeatType=mt.BackgroundRepeatType;var Et=i(9);e.BackgroundClip=Et.BackgroundClip;var Tt=i(9);e.BackgroundSizeType=Tt.BackgroundSizeType;var Rt=i(9);e.Background=Rt.Background;var bt=i(1);e.BoxSizing=bt.BoxSizing;var wt=i(1);e.TextAlign=wt.TextAlign;var At=i(1);e.Position=At.Position;var Ot=i(1);e.Display=Ot.Display;var Bt=i(1);e.Overflow=Bt.Overflow;var St=i(1);e.TextBorderPosition=St.TextBorderPosition;var Lt=i(1);e.PointerEvents=Lt.PointerEvents;var It=i(1);e.Style=It.Style;var xt=i(15);e.EnumUtils=xt.EnumUtils;var Pt=i(45);e.Delay=Pt.Delay;var Ct=i(14);e.LayoutUtils=Ct.LayoutUtils;var Ft=i(28);e.StringUtils=Ft.StringUtils;var Mt=i(30);e.CRC32=Mt.CRC32;var Nt=i(29);e.Base64=Nt.Base64;var Dt=i(32);e.DrawUtils=Dt.DrawUtils},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(10),r=function(){function t(){this.canvasCache=[]}return t.prototype.newCanvas=function(){return this.canvasCache.length>0?this.canvasCache.shift():document.createElement("canvas")},t.prototype.releaseCanvas=function(t){this.canvasCache.push(t)},t.prototype.newImage=function(){return new Image},t.prototype.loadArrayBuffer=function(t){var e=new XMLHttpRequest;e.responseType="arraybuffer",e.open(t.method||"GET",t.url,!0),e.onload=function(){200===e.status&&t.onLoad(e.response)},e.onerror=function(e){t.onError(e)},e.onprogress=function(e){e.lengthComputable&&t.onProgress({loadedBytes:e.loaded,totalBytes:e.total})},e.send()},t.prototype.loadImage=function(t){var e=new XMLHttpRequest;e.responseType="blob",e.open(t.method||"GET",t.url,!0),e.onload=function(){if(200===e.status){var i=URL.createObjectURL(e.response),n=new Image;n.src=i,n.onload=function(){URL.revokeObjectURL(i),t.onLoad(n)},n.onerror=function(e){URL.revokeObjectURL(i),t.onError(e)}}},e.onerror=function(e){t.onError(e)},e.onprogress=function(e){e.lengthComputable&&t.onProgress({loadedBytes:e.loaded,totalBytes:e.total})},e.send()},t.prototype.enableEvents=function(t){var e=this;t.canvas.onpointerdown=function(e){t.canvas.setPointerCapture(e.pointerId)},t.canvas.onpointerup=function(e){t.canvas.releasePointerCapture(e.pointerId)},t.canvas.addEventListener("mousedown",(function(i){e.handleMouseEvent("mousedown",t,i)})),t.canvas.addEventListener("mousemove",(function(i){e.handleMouseEvent("mousemove",t,i)})),t.canvas.addEventListener("pressmove",(function(i){e.handleMouseEvent("mousemove",t,i)})),t.canvas.addEventListener("mouseup",(function(i){e.handleMouseEvent("mouseup",t,i)})),t.canvas.addEventListener("mouseenter",(function(i){e.handleMouseEvent("mouseenter",t,i)})),t.canvas.addEventListener("mouseleave",(function(i){e.handleMouseEvent("mouseleave",t,i)})),t.canvas.addEventListener("mousewheel",(function(i){e.handleMouseWheelEvent(t,i)})),t.canvas.addEventListener("touchstart",(function(i){e.handleTouchEvent("touchstart",t,i)})),t.canvas.addEventListener("touchend",(function(i){e.handleTouchEvent("touchend",t,i)})),t.canvas.addEventListener("touchmove",(function(i){e.handleTouchEvent("touchmove",t,i)})),t.canvas.addEventListener("touchcancel",(function(i){e.handleTouchEvent("touchcancel",t,i)}))},t.prototype.requestAnimationFrame=function(t){requestAnimationFrame(t)},t.prototype.handleMouseEvent=function(t,e,i){i.preventDefault();var r=e.canvas.width/e.canvas.clientWidth,o=e.canvas.height/e.canvas.clientHeight,s=i.offsetX*r,a=i.offsetY*o;e.handleMouseOrTouchEvent(t,[new n.TouchItem(0,e,s,a,Date.now())],i)},t.prototype.handleMouseWheelEvent=function(t,e){e.preventDefault();var i=t.canvas.width/t.canvas.clientWidth,n=t.canvas.height/t.canvas.clientHeight;t.handleMouseWheelEvent(e.offsetX*i,e.offsetY*n,e.deltaX,e.deltaY,e)},t.prototype.handleTouchEvent=function(t,e,i){i.preventDefault();for(var r=e.canvas.width/e.canvas.clientWidth,o=e.canvas.height/e.canvas.clientHeight,s=[],a=Date.now(),h=0,u=i.touches;h<u.length;h++){var c=u[h];s.push(new n.TouchItem(c.identifier,e,c.clientX*r,c.clientY*o,a))}e.handleMouseOrTouchEvent(t,s,i)},t}();e.WebpageRuntime=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(10),r=i(23),o=function(){function t(){this.canvasCache=[],this.systemInfo=wx.getSystemInfoSync()}return t.prototype.newCanvas=function(){return this.gameCanvas||(this.gameCanvas=wx.createCanvas()),this.canvasCache.length>0?this.canvasCache.shift():wx.createCanvas()},t.prototype.releaseCanvas=function(t){this.canvasCache.push(t)},t.prototype.newImage=function(){return wx.createImage()},t.prototype.loadArrayBuffer=function(t){r.URLUtils.isAbsolute(t.url)?wx.request({url:t.url,method:t.method||"GET",responseType:"arraybuffer",success:function(e){t.onLoad(e.data)},fail:function(e){t.onError(e)}}):wx.getFileSystemManager().readFile({filePath:t.url,success:function(e){t.onLoad(e.data)},fail:function(e){t.onError(e)}})},t.prototype.loadImage=function(t){var e=this;if(r.URLUtils.isAbsolute(t.url)){wx.downloadFile({url:t.url,success:function(i){if(200===i.statusCode){var n=e.newImage();n.src=i.tempFilePath,n.onload=function(){t.onLoad(n)},n.onerror=function(e){t.onError(e)}}else t.onError({msg:"download failed, code:"+i.statusCode})},fail:function(e){t.onError(e)}}).onProgressUpdate=function(e){t.onProgress({loadedBytes:e.totalBytesWritten,totalBytes:e.totalBytesExpectedToWrite})}}else{var i=this.newImage();i.src=t.url,i.onload=function(){t.onLoad(i)},i.onerror=function(e){t.onError(e)}}},t.prototype.getGameCanvas=function(){return this.gameCanvas||(this.gameCanvas=wx.createCanvas()),this.gameCanvas},t.prototype.enableEvents=function(t){var e=this;wx.onTouchStart((function(i){e.handleTouchEvent("touchstart",t,i)})),wx.onTouchMove((function(i){e.handleTouchEvent("touchmove",t,i)})),wx.onTouchEnd((function(i){e.handleTouchEvent("touchend",t,i)})),wx.onTouchCancel((function(i){e.handleTouchEvent("touchcancel",t,i)}))},t.prototype.requestAnimationFrame=function(t){requestAnimationFrame(t)},t.prototype.handleTouchEvent=function(t,e,i){for(var r=e.canvas.width/this.systemInfo.windowWidth,o=e.canvas.height/this.systemInfo.windowHeight,s=[],a=Date.now(),h=0,u=i.touches;h<u.length;h++){var c=u[h];s.push(new n.TouchItem(c.identifier,e,c.clientX*r,c.clientY*o,a))}e.handleMouseOrTouchEvent(t,s,i)},t}();e.WechatMiniGameRuntime=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(10),r=i(23),o=function(){function t(){this.canvasCache=[]}return t.prototype.setWxCanvas=function(t){this.wxCanvas=t},t.prototype.newCanvas=function(){return this.canvasCache.length>0?this.canvasCache.shift():wx.createOffscreenCanvas()},t.prototype.releaseCanvas=function(t){this.canvasCache.push(t)},t.prototype.newImage=function(){return this.wxCanvas.createImage()},t.prototype.loadArrayBuffer=function(t){r.URLUtils.isAbsolute(t.url)?wx.request({url:t.url,method:t.method||"GET",responseType:"arraybuffer",success:function(e){t.onLoad(e.data)},fail:function(e){t.onError(e)}}):wx.getFileSystemManager().readFile({filePath:t.url,success:function(e){t.onLoad(e.data)},fail:function(e){t.onError(e)}})},t.prototype.loadImage=function(t){var e=this;if(r.URLUtils.isAbsolute(t.url)){wx.downloadFile({url:t.url,success:function(i){if(200===i.statusCode){var n=e.newImage();n.src=i.tempFilePath,n.onload=function(){t.onLoad(n)},n.onerror=function(e){t.onError(e)}}else t.onError({msg:"download failed, code:"+i.statusCode})},fail:function(e){t.onError(e)}}).onProgressUpdate=function(e){t.onProgress({loadedBytes:e.totalBytesWritten,totalBytes:e.totalBytesExpectedToWrite})}}else{var i=this.newImage();i.src=t.url,i.onload=function(){t.onLoad(i)},i.onerror=function(e){t.onError(e)}}},t.prototype.enableEvents=function(t){},t.prototype.requestAnimationFrame=function(t){this.wxCanvas.requestAnimationFrame(t)},t.prototype.handleTouchEvent=function(t,e,i){for(var r=e.canvas.clientWidth?e.canvas.width/e.canvas.clientWidth:1,o=e.canvas.clientHeight?e.canvas.height/e.canvas.clientHeight:1,s=[],a=Date.now(),h=0,u=i.touches;h<u.length;h++){var c=u[h];s.push(new n.TouchItem(c.identifier,e,c.x*r,c.y*o,a))}e.handleMouseOrTouchEvent(t,s,i)},t}();e.WechatMiniProgramRuntime=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(11),r=function(){function t(t,e){void 0===e&&(e=t),this.value1=t,this.value2=e}return t.of=function(e,i){if(void 0===i&&(i=!1),"number"==typeof e)return new t(n.BaseValue.of(e));var r=e.split(/\s+/),o=void 0,s=void 0;return 1===r.length?o=s=n.BaseValue.of(r[0]):2===r.length&&(o=n.BaseValue.of(r[0]),s=n.BaseValue.of(r[1])),o&&s?new t(o,s):void(i||console.warn("invalid border:"+e))},t.prototype.toString=function(){return this.value1.toString()+" "+this.value2.toString()},t.prototype.clone=function(){return new t(this.value1,this.value2)},t.prototype.update=function(e,i){return new t(this.value1.update(e.value1,i),this.value2.update(e.value2,i))},t.prototype.convertFrom=function(e){var i=t.of(e+"");return void 0===i?new t(n.BaseValue.ZERO,n.BaseValue.ZERO):i},t.prototype.isAnimatable=function(){return!0},t}();e.BorderRadius=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.isEmpty=function(t){if(!t)return!0;for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},t}();e.ContainerUtils=n},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(8),s=i(7),a=i(19),h=i(3),u=function(t){function e(e){var i=t.call(this,e)||this;return i.viewRect=new o.Rect(0,0,0,0),i.verticalSnappingSize=0,i.horizontalSnappingSize=200,i.on("pressmove",(function(t){i.scroll(t.touchItem.getDelta()),t.stage.updateOnce()})),i.on("mousewheel",(function(t){var e=t.touchItem.getDelta();e.x=-e.x,e.y=-e.y,i.scroll(e,!1),t.stage.updateOnce()})),i.on("pressup",(function(t){0===t.stage.getPressedTouchItems(i).length&&(i.onRelease(t.stage),t.stage.updateOnce())})),i}return r(e,t),e.prototype.getDefaultStyle=function(){return{overflow:"hidden"}},e.prototype.fixPosition=function(t,e,i){return t>i?i:t<e?e:t},e.prototype.scroll=function(t,e){void 0===e&&(e=!0),this.viewRect.x=this.fixPosition(this.viewRect.x+t.x,Math.min(0,this.getContentWidth()-this.viewRect.width)-(e?this.horizontalSnappingSize:0),e?this.horizontalSnappingSize:0),this.viewRect.y=this.fixPosition(this.viewRect.y+t.y,Math.min(0,this.getContentHeight()-this.viewRect.height)-(e?this.verticalSnappingSize:0),e?this.verticalSnappingSize:0)},e.prototype.onRelease=function(t){var e=this,i={x:this.fixPosition(this.viewRect.x,Math.min(0,this.getContentWidth()-this.viewRect.width),0),y:this.fixPosition(this.viewRect.y,Math.min(0,this.getContentHeight()-this.viewRect.height),0)};i.x===this.viewRect.x&&i.y===this.viewRect.y||t.animate({x:this.viewRect.x,y:this.viewRect.y},!0).to(i,200,"quadIn").on("update",(function(t){void 0!==i.x&&(e.viewRect.x=t.value.x),void 0!==i.y&&(e.viewRect.y=t.value.y),e.dispatchEvent(new h.XObjectEvent("update",!0,!0,e))}))},e.prototype.layoutChildren=function(){t.prototype.layoutChildren.call(this),this.viewRect.width=0,this.viewRect.height=0;for(var e=this.getPaddingRect(),i=0,n=this.children;i<n.length;i++){var r=n[i];this.viewRect.width=Math.max(this.viewRect.width,r.rect.x+r.getOuterWidth()-e.x),this.viewRect.height=Math.max(this.viewRect.height,r.rect.y+r.getOuterHeight()-e.y),r.rect.x+=this.viewRect.x,r.rect.y+=this.viewRect.y}},e}(a.Container);e.Scrollable=u,s.HtmlParser.registerTag("scrollable",u)},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(7),s=i(1),a=i(3),h=function(t){function e(e){var i=t.call(this,e)||this;return i.text="",i.text=e&&e.text||"",i}return r(e,t),e.prototype.getDefaultStyle=function(){return{color:"black",fontSize:26}},e.prototype.setText=function(t){this.text!==t&&(this.text=t,this.dispatchEvent(new a.XObjectEvent("update",!0,!0,this)))},e.prototype.getText=function(){return this.text},e.prototype.drawContent=function(t){if(""!==this.text&&this.style.font){var e=this.getContentRect();t.save(),t.textBaseline="middle",t.textAlign=this.style.textAlign,t.fillStyle=this.style.color.toString(),t.font=this.style.font.toString();var i,n=this.style.textBorder&&this.style.textBorder.isEnable();n&&(t.strokeStyle=this.style.textBorder.color.toString(),t.lineWidth=this.style.textBorder.width),this.style.textShadow&&this.style.textShadow.isEnable()&&(t.shadowBlur=this.style.textShadow.blur,t.shadowColor=this.style.textShadow.color.toString(),t.shadowOffsetX=this.style.textShadow.offsetX,t.shadowOffsetY=this.style.textShadow.offsetY),i=this.style.textAlign===s.TextAlign.RIGHT?e.x+e.width:this.style.textAlign===s.TextAlign.CENTER?e.x+e.width/2:e.x;var r=e.y,o=this.text.split("\n"),a=this.getLineHeight();r+=a/2;for(var h=0,u=o;h<u.length;h++){var c=u[h];""!==c.trim()&&(n?this.style.textBorderPosition===s.TextBorderPosition.OUTER?(t.strokeText(c,i,r),t.fillText(c,i,r)):(t.fillText(c,i,r),t.strokeText(c,i,r)):t.fillText(c,i,r)),r+=a}return t.restore(),!0}},e.prototype.layout=function(){if(t.prototype.layout.call(this),this.style.font){for(var e=this.text.split("\n"),i=this.getContentRect(),n=0,r=0,o=e;r<o.length;r++){var s=o[r];n=Math.max(n,this.style.font.measureTextWidth(s))}n>i.width&&(this.rect.width+=n-i.width);var a=this.getLineHeight()*e.length;a>i.height&&(this.rect.height+=a-i.height)}},e}(a.XObject);e.Text=h,o.HtmlParser.registerTag("text",h)},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(8),s=i(7),a=i(5),h=i(3),u=function(t){function e(e){var i=t.call(this,e)||this;return e&&e.attributes&&(e.attributes.src&&i.setSrc(e.attributes.src),e.attributes.sourcerect&&(i.sourceRect=o.Rect.of(e.attributes.sourcerect))),i}return r(e,t),e.prototype.setSrc=function(t){var e=this;return this.src!==t&&(this.src=t,a.ResourceRegistry.DefaultInstance.add(this.src,a.ResourceType.IMAGE).then((function(t){e.dispatchEvent(new h.XObjectEvent("update",!0,!0,e))}))),this},e.prototype.setImage=function(t){return this.image!==t&&(this.image=t,this.dispatchEvent(new h.XObjectEvent("update",!0,!0,this))),this},e.prototype.setSourceRect=function(t){return this.sourceRect=t,this},e.prototype.calculateSize=function(){if(t.prototype.calculateSize.call(this),!this.style.width)if(this.sourceRect)this.rect.width=this.sourceRect.width;else if(this.image)this.rect.width=this.image.width;else if(this.src){(e=a.ResourceRegistry.DefaultInstance.get(this.src))&&(this.rect.width=e.width)}if(!this.style.height)if(this.sourceRect)this.rect.height=this.sourceRect.height;else if(this.image)this.rect.height=this.image.height;else if(this.src){var e;(e=a.ResourceRegistry.DefaultInstance.get(this.src))&&(this.rect.height=e.height)}},e.prototype.drawContent=function(t){var e;if(this.image?e=this.image:this.src&&(e=a.ResourceRegistry.DefaultInstance.get(this.src)),e){var i=this.getContentRect();this.sourceRect?t.drawImage(e,this.sourceRect.x,this.sourceRect.y,this.sourceRect.width,this.sourceRect.height,i.x,i.y,i.width,i.height):t.drawImage(e,i.x,i.y,i.width,i.height)}},e}(h.XObject);e.Img=u,s.HtmlParser.registerTag("img",u),s.HtmlParser.registerTag("image",u)},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(7),s=i(5),a=function(t){function e(e){var i=t.call(this,e)||this;return e&&e.attributes&&e.attributes.src&&s.ResourceRegistry.DefaultInstance.add(e.attributes.src,s.ResourceType.APNG).then((function(t){i.setSpriteSheet(t).play()})).catch((function(t){console.warn("failed to load:"+e.attributes.src,t)})),i}return r(e,t),e}(i(34).Sprite);e.Apng=a,o.HtmlParser.registerTag("apng",a)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.delayHandler=0,this.paused=!1,this.delayTime=t}return t.prototype.call=function(t){this.func=t,this.paused||(this.delayHandler&&(clearTimeout(this.delayHandler),this.delayHandler=0),this.start())},t.prototype.pause=function(){this.delayHandler&&(clearTimeout(this.delayHandler),this.delayHandler=0),this.paused=!0},t.prototype.resume=function(){this.paused&&(this.paused=!1,this.func&&this.start())},t.prototype.cancel=function(){this.delayHandler&&(clearTimeout(this.delayHandler),this.delayHandler=0),this.func=void 0,this.paused=!1},t.prototype.start=function(){var t=this;this.func&&(this.delayHandler=setTimeout((function(){t.delayHandler=0,t.func&&(t.func(),t.func=void 0)}),this.delayTime))},t}();e.Delay=n}])}));