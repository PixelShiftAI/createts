!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.createts=e():t.createts=e()}(window,(function(){return function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=31)}([function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.prototype.calculate=function(t){return t},t}();e.Linear=o;var s=function(){function t(t){this.pow=t}return t.prototype.calculate=function(t){return Math.pow(t,this.pow)},t}();e.PowIn=s;var a=function(){function t(t){this.pow=t}return t.prototype.calculate=function(t){return 1-Math.pow(1-t,this.pow)},t}();e.PowOut=a;var h=function(){function t(t){this.pow=t}return t.prototype.calculate=function(t){return(t*=2)<1?.5*Math.pow(t,this.pow):1-.5*Math.abs(Math.pow(2-t,this.pow))},t}();e.PowInOut=h;var u=function(){function t(){}return t.prototype.calculate=function(t){return 1-Math.cos(t*Math.PI/2)},t}();e.SineIn=u;var c=function(){function t(){}return t.prototype.calculate=function(t){return Math.sin(t*Math.PI/2)},t}();e.SineOut=c;var l=function(){function t(){}return t.prototype.calculate=function(t){return-.5*(Math.cos(Math.PI*t)-1)},t}();e.SineInOut=l;var p=function(){function t(t){this.amount=t}return t.prototype.calculate=function(t){return t*t*((this.amount+1)*t-this.amount)},t}();e.BackIn=p;var d=function(){function t(t){this.amount=t}return t.prototype.calculate=function(t){return--t*t*((this.amount+1)*t+this.amount)+1},t}();e.BackOut=d;var f=function(){function t(t){this.amount=t}return t.prototype.calculate=function(t){return(t*=2)<1?t*t*((this.amount+1)*t-this.amount)*.5:.5*((t-=2)*t*((this.amount+1)*t+this.amount)+2)},t}();e.BackInOut=f;var g=function(){function t(){}return t.prototype.calculate=function(t){return-(Math.sqrt(1-t*t)-1)},t}();e.CircIn=g;var E=function(){function t(){}return t.prototype.calculate=function(t){return Math.sqrt(1- --t*t)},t}();e.CircOut=E;var v=function(){function t(){}return t.prototype.calculate=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},t}();e.CircInOut=v;var y=function(){function t(){}return t.prototype.calculateOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},t}(),R=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.calculate=function(e){return t.prototype.calculateOut.call(this,e)},e}(y);e.BounceOut=R;var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.calculate=function(e){return 1-t.prototype.calculateOut.call(this,1-e)},e}(y);e.BounceIn=m;var A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.calculate=function(e){return e<.5?.5*t.prototype.calculate.call(this,2*e):.5*t.prototype.calculateOut.call(this,2*e-1)+.5},e}(m);e.BounceInOut=A;var T=2*Math.PI,b=function(){function t(t,e){this.amplitude=t,this.period=e,this.s=this.period/T*Math.asin(1/this.amplitude)}return t.prototype.calculate=function(t){return 0===t||1===t?t:-this.amplitude*Math.pow(2,10*(t-=1))*Math.sin((t-this.s)*T/this.period)},t}();e.ElasticIn=b;var O=function(){function t(t,e){this.amplitude=t,this.period=e,this.s=this.period/T*Math.asin(1/this.amplitude)}return t.prototype.calculate=function(t){return 0===t||1===t?t:this.amplitude*Math.pow(2,-10*t)*Math.sin((t-this.s)*T/this.period)+1},t}();e.ElasticOut=O;var L=function(){function t(t,e){this.amplitude=t,this.period=e,this.s=this.period/T*Math.asin(1/this.amplitude)}return t.prototype.calculate=function(t){return(t*=2)<1?this.amplitude*Math.pow(2,10*(t-=1))*Math.sin((t-this.s)*T/this.period)*-.5:this.amplitude*Math.pow(2,-10*(t-=1))*Math.sin((t-this.s)*T/this.period)*.5+1},t}();e.ElasticInOut=L;var w=function(){function t(){}return t.register=function(t,e){this.algorithms.set(t,e)},t.get=function(t){return this.algorithms.get(t)},t.algorithms=new Map,t}();e.AlgorithmFactory=w,w.register("linear",new o),w.register("quadIn",new s(2)),w.register("quadOut",new a(2)),w.register("quadInOut",new h(2)),w.register("cubicIn",new s(3)),w.register("cubicOut",new a(3)),w.register("cubicInOut",new h(3)),w.register("quartIn",new s(4)),w.register("quartOut",new a(4)),w.register("quartInOut",new h(4)),w.register("quintIn",new s(5)),w.register("quintOut",new a(5)),w.register("quintInOut",new h(5)),w.register("sineIn",new u),w.register("sineOut",new c),w.register("sineInOut",new l),w.register("backIn",new p(1.7)),w.register("backOut",new d(1.7)),w.register("backInOut",new f(1.7)),w.register("circIn",new g),w.register("circOut",new E),w.register("circInOut",new v),w.register("bounceIn",new m),w.register("bounceOut",new R),w.register("bounceInOut",new A),w.register("elasticIn",new b(1,.3)),w.register("elasticOut",new O(1,.3)),w.register("elasticInOut",new L(1,.3))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!0),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.bubbles=!1,this.cancelable=!1,this.type=t,this.bubbles=e,this.cancelable=i,this.timeStamp=Date.now()}return t.prototype.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},t.prototype.toString=function(){return"[Event (type="+this.type+")]"},t}();e.Event=r;var n=function(){function t(){this.listeners={}}return t.prototype.addEventListener=function(t,e){var i=this.listeners[t];return i&&this.removeEventListener(t,e),(i=this.listeners[t])?i.push(e):this.listeners[t]=[e],this},t.prototype.on=function(t,e){return this.addEventListener(t,e)},t.prototype.removeEventListener=function(t,e){var i=this.listeners[t];if(i)for(var r=0,n=i.length;r<n;r++)if(i[r]===e){1===n?delete this.listeners[t]:i.splice(r,1);break}},t.prototype.off=function(t,e){this.removeEventListener(t,e)},t.prototype.removeAllEventListeners=function(t){t?this.listeners&&delete this.listeners[t]:this.listeners={}},t.prototype.hasEventListener=function(t){return!!this.listeners[t]},t.prototype.willTrigger=function(t){return this.hasEventListener(t)},t.prototype.dispatchEvent=function(t){var e=this.listeners[t.type];if(e){e=e.slice();for(var i=0;i<e.length&&!t.immediatePropagationStopped;i++)e[i](t)}return!t.defaultPrevented},t}();e.EventDispatcher=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,n,o,s,a,h,u,c=i(7),l=i(9),p=i(5),d=i(10),f=i(13),g=i(12),E=i(14),v=i(24),y=i(16),R=i(15);!function(t){t.CONTENT_BOX="content-box",t.BORDER_BOX="border-box"}(r=e.BoxSizing||(e.BoxSizing={})),function(t){t.LEFT="left",t.RIGHT="right",t.CENTER="center"}(n=e.TextAlign||(e.TextAlign={})),function(t){t.STATIC="static",t.RELATIVE="relative",t.ABSOLUTE="absolute",t.FIXED="fixed"}(o=e.Position||(e.Position={})),function(t){t.INLINE="inline",t.BLOCK="block",t.NONE="none"}(s=e.Display||(e.Display={})),function(t){t.VISIBLE="visible",t.HIDDEN="hidden"}(a=e.Overflow||(e.Overflow={})),function(t){t.OUTER="outer",t.INNER="inner"}(h=e.TextBorderPosition||(e.TextBorderPosition={})),function(t){t.AUTO="auto",t.NONE="none"}(u=e.PointerEvents||(e.PointerEvents={}));var m=/([^\s:;]+)[\s]*:[\s]*([^;]+)/gm,A=function(){function t(){this.position=o.STATIC,this.display=s.INLINE,this.perspectiveOriginX=l.BaseValue.of("50%"),this.perspectiveOriginY=l.BaseValue.of("50%"),this.transformX=l.BaseValue.of("0"),this.transformY=l.BaseValue.of("0"),this.alpha=1,this.rotation=0,this.scaleX=1,this.scaleY=1,this.skewX=0,this.skewY=0,this.visible=!0,this.boxSizing=r.CONTENT_BOX,this.color=p.Color.BLACK,this.textAlign=n.LEFT,this.overflow=a.VISIBLE,this.pointerEvents=u.AUTO,this.textBorderPosition=h.OUTER}return t.of=function(e){for(var i=new t,r={},n=0,o=f.StringUtils.matchAll(e,m);n<o.length;n++){var s=o[n];r[s[1].toLowerCase()]=s[2]}return i.apply(r)},t.prototype.apply=function(e){for(var i in e){var c=this.normalize(i),f=e[i]+"";switch(c){case"width":case"height":this[c]=l.BaseValue.of(f);break;case"position":this.position=d.EnumUtils.fromString(o,f,o.STATIC);break;case"display":this.display=d.EnumUtils.fromString(s,f,s.INLINE);break;case"left":case"right":case"top":case"bottom":this[c]=l.BaseValue.of(f);break;case"padding":var m=t.parse4Dirs(f);m&&(this.paddingTop=m[0],this.paddingRight=m[1],this.paddingBottom=m[2],this.paddingLeft=m[3]);break;case"paddingTop":case"paddingRight":case"paddingBottom":case"paddingLeft":this[c]=l.BaseValue.of(f);break;case"margin":var A=t.parse4Dirs(f);A&&(this.marginTop=A[0],this.marginRight=A[1],this.marginBottom=A[2],this.marginLeft=A[3]);break;case"marginTop":case"marginRight":case"marginBottom":case"marginLeft":this[c]=l.BaseValue.of(f);break;case"perspectiveOrigin":1===(T=f.split(/\s+/)).length?"auto"===f?(this.perspectiveOriginX=l.BaseValue.of("50%"),this.perspectiveOriginY=l.BaseValue.of("50%")):(this.perspectiveOriginX=l.BaseValue.of(f),this.perspectiveOriginY=l.BaseValue.of(f)):T.length>1&&(this.perspectiveOriginX="auto"===T[0]?l.BaseValue.of("50%"):l.BaseValue.of(T[0]),this.perspectiveOriginY="auto"===T[1]?l.BaseValue.of("50%"):l.BaseValue.of(T[1]));break;case"transform":var T;1===(T=f.split(/\s+/)).length?"auto"===f?(this.transformX=l.BaseValue.of("50%"),this.transformY=l.BaseValue.of("50%")):(this.transformX=l.BaseValue.of(f),this.transformY=l.BaseValue.of(f)):T.length>1&&(this.transformX="auto"===T[0]?l.BaseValue.of("50%"):l.BaseValue.of(T[0]),this.transformY="auto"===T[1]?l.BaseValue.of("50%"):l.BaseValue.of(T[1]));break;case"perspectiveOriginX":case"perspectiveOriginY":case"transformX":case"transformY":this[c]="auto"===f?l.BaseValue.of("50%"):l.BaseValue.of(f);break;case"scaleX":case"scaleY":case"skewX":case"skewY":case"alpha":case"aspectRatio":case"rotation":var b=parseFloat(f);isNaN(b)?console.warn("invalid "+c+" value: "+f):this[c]=b;break;case"scale":b=parseFloat(f);isNaN(b)?console.warn("invalid "+c+" value: "+f):this.scaleX=this.scaleY=b;break;case"visible":this.visible="true"===f;break;case"background":this.background=g.Background.of(f);break;case"backgroundClip":this.background||(this.background=new g.Background),this.background.setClip(f);break;case"backgroundColor":this.background||(this.background=new g.Background),this.background.setColor(f);break;case"backgroundAttachment":this.background||(this.background=new g.Background),this.background.setAttachment(f);break;case"backgroundImage":this.background||(this.background=new g.Background),this.background.setImage(f);break;case"backgroundRepeat":this.background||(this.background=new g.Background),this.background.setRepeat(f);break;case"backgroundOrigin":this.background||(this.background=new g.Background),this.background.setOrigin(f);break;case"backgroundSize":this.background||(this.background=new g.Background),this.background.setSize(f);break;case"backgroundPosition":this.background||(this.background=new g.Background),this.background.setPosition(f);break;case"boxSizing":this.boxSizing=d.EnumUtils.fromString(r,f,r.CONTENT_BOX);break;case"color":var O=p.Color.of(f);O&&(this.color=O);break;case"font":this.font=v.Font.of(f);break;case"fontFamily":this.font||(this.font=new v.Font),this.font.family=f;break;case"fontWeight":this.font||(this.font=new v.Font),this.font.weight=d.EnumUtils.fromString(v.FontWeight,f,v.FontWeight.NORMAL);break;case"fontStyle":this.font||(this.font=new v.Font),this.font.style=d.EnumUtils.fromString(v.FontStyle,f,v.FontStyle.NORMAL);break;case"fontVariant":this.font||(this.font=new v.Font),this.font.variant=d.EnumUtils.fromString(v.FontVariant,f,v.FontVariant.NORMAL);break;case"fontSize":b=parseFloat(f);isNaN(b)?console.warn("invalid "+c+" value: "+f):(this.font||(this.font=new v.Font),this.font.size=b);break;case"lineHeight":this.lineHeight=y.LineHeight.of(f);case"textAlign":this.textAlign=d.EnumUtils.fromString(n,f,n.LEFT);break;case"borderRadius":var L=t.parse4Dirs(f);L&&(this.borderRadiusTop=L[0],this.borderRadiusRight=L[1],this.borderRadiusBottom=L[2],this.borderRadiusLeft=L[3]);break;case"borderRadiusTop":case"borderRadiusRight":case"borderRadiusBottom":case"borderRadiusLeft":this[c]=l.BaseValue.of(f);break;case"border":this.borderTop=this.borderRight=this.borderLeft=this.borderBottom=E.Border.of(f);break;case"borderTop":case"borderRight":case"borderLeft":case"borderBottom":case"textBorder":this[c]=E.Border.of(f);break;case"overflow":this.overflow=d.EnumUtils.fromString(a,f,a.VISIBLE);break;case"compositeOperation":this.compositeOperation=f;break;case"filter":this.filter=f;break;case"shadow":case"textShadow":this[c]=R.Shadow.of(f);break;case"textBorderPosition":this.textBorderPosition=d.EnumUtils.fromString(h,f,h.OUTER);break;case"pointerEvents":this.pointerEvents=d.EnumUtils.fromString(u,f,u.AUTO);break;case"cursor":this.cursor=f;break;default:console.warn("unknown style:"+i+" value:"+f)}}return this},t.prototype.getSnapshotForAnimation=function(t,e){var i={};for(var r in e)this.fillSnapshotForAnimation(t,r,e[r],i);return i},t.prototype.clone=function(){var e=new t;return e.width=this.width,e.height=this.height,e.position=this.position,e.display=this.display,e.left=this.left,e.right=this.right,e.top=this.top,e.bottom=this.bottom,this.paddingTop&&(e.paddingTop=this.paddingTop.clone()),this.paddingRight&&(e.paddingRight=this.paddingRight.clone()),this.paddingBottom&&(e.paddingBottom=this.paddingBottom.clone()),this.paddingLeft&&(e.paddingLeft=this.paddingLeft.clone()),this.marginTop&&(e.marginTop=this.marginTop.clone()),this.marginRight&&(e.marginRight=this.marginRight.clone()),this.marginBottom&&(e.marginBottom=this.marginBottom.clone()),this.marginLeft&&(e.marginLeft=this.marginLeft.clone()),e.perspectiveOriginX=this.perspectiveOriginX,e.perspectiveOriginY=this.perspectiveOriginY,e.transformX=this.transformX,e.transformY=this.transformY,e.alpha=this.alpha,e.rotation=this.rotation,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.skewX=this.skewX,e.skewY=this.skewY,this.shadow&&(e.shadow=this.shadow.clone()),this.textShadow&&(e.textShadow=this.textShadow.clone()),e.textBorderPosition=this.textBorderPosition,this.textBorder&&(e.textBorder=this.textBorder.clone()),e.visible=this.visible,this.background&&(e.background=this.background.clone()),e.boxSizing=this.boxSizing,e.color=this.color.clone(),this.font&&(e.font=this.font.clone()),e.lineHeight=this.lineHeight,e.textAlign=this.textAlign,this.borderTop&&(e.borderTop=this.borderTop.clone()),this.borderRight&&(e.borderRight=this.borderRight.clone()),this.borderBottom&&(e.borderBottom=this.borderBottom.clone()),this.borderLeft&&(e.borderLeft=this.borderLeft.clone()),this.borderRadiusTop&&(e.borderRadiusTop=this.borderRadiusTop.clone()),this.borderRadiusRight&&(e.borderRadiusRight=this.borderRadiusRight.clone()),this.borderRadiusBottom&&(e.borderRadiusBottom=this.borderRadiusBottom.clone()),this.borderRadiusLeft&&(e.borderRadiusLeft=this.borderRadiusLeft.clone()),e.overflow=this.overflow,e.compositeOperation=this.compositeOperation,e.aspectRatio=this.aspectRatio,e.filter=this.filter,e.cursor=this.cursor,e.pointerEvents=this.pointerEvents,e},t.prototype.fillSnapshotForAnimation=function(t,e,i,r){var n=this.normalize(e);switch(n){case"scaleX":case"scaleY":case"alpha":case"rotation":case"skewX":case"skewY":case"aspectRatio":var o="string"==typeof i?parseFloat(i):i;isNaN(o)||(r[n]={from:this[n],to:o,type:c.AnimationValueType.NUMBER});break;case"transformX":case"width":case"left":case"right":case"perspectiveOriginX":var s=l.BaseValue.of(i),a=this[n]||l.BaseValue.of(0);s.unit===l.BaseValueUnit.PERCENTAGE?r[n]={from:a.toPercentage(t.getWidth()),to:s,type:c.AnimationValueType.BASEVALUE}:r[n]={from:a.toAbsolute(t.getWidth()),to:s,type:c.AnimationValueType.BASEVALUE};break;case"transformY":case"height":case"top":case"bottom":case"perspectiveOriginY":s=l.BaseValue.of(i),a=this[n]||l.BaseValue.of(0);s.unit===l.BaseValueUnit.PERCENTAGE?r[n]={from:a.toPercentage(t.getHeight()),to:s,type:c.AnimationValueType.BASEVALUE}:r[n]={from:a.toAbsolute(t.getHeight()),to:s,type:c.AnimationValueType.BASEVALUE};break;case"color":(h=p.Color.of(i+""))&&(r[n]={from:this[n],to:h,type:c.AnimationValueType.COLOR});break;case"backgroundColor":var h;(h=p.Color.of(i+""))&&(r[n]={from:this.background&&this.background.color||p.Color.WHITE,to:h,type:c.AnimationValueType.COLOR});break;case"paddingTop":case"paddingRight":case"paddingBottom":case"paddingLeft":case"marginTop":case"marginRight":case"marginBottom":case"marginLeft":case"borderRadiusTop":case"borderRadiusRight":case"borderRadiusBottom":case"borderRadiusLeft":r[n]={from:this[n],to:l.BaseValue.of(i+""),type:c.AnimationValueType.BASEVALUE};break;case"padding":this.fillSnapshotForAnimation(t,"paddingTop",i,r),this.fillSnapshotForAnimation(t,"paddingRight",i,r),this.fillSnapshotForAnimation(t,"paddingBottom",i,r),this.fillSnapshotForAnimation(t,"paddingLeft",i,r);break;case"margin":this.fillSnapshotForAnimation(t,"marginTop",i,r),this.fillSnapshotForAnimation(t,"marginRight",i,r),this.fillSnapshotForAnimation(t,"marginBottom",i,r),this.fillSnapshotForAnimation(t,"marginLeft",i,r);break;case"perspectiveOrigin":this.fillSnapshotForAnimation(t,"perspectiveOriginX",i,r),this.fillSnapshotForAnimation(t,"perspectiveOriginY",i,r);break;case"transform":this.fillSnapshotForAnimation(t,"transformX",i,r),this.fillSnapshotForAnimation(t,"transformY",i,r);break;case"scale":this.fillSnapshotForAnimation(t,"scaleX",i,r),this.fillSnapshotForAnimation(t,"scaleY",i,r);break;case"borderRadius":this.fillSnapshotForAnimation(t,"borderRadiusTop",i,r),this.fillSnapshotForAnimation(t,"borderRadiusRight",i,r),this.fillSnapshotForAnimation(t,"borderRadiusBottom",i,r),this.fillSnapshotForAnimation(t,"borderRadiusLeft",i,r);break;case"borderLeft":case"borderRight":case"borderTop":case"borderBottom":case"textBorder":r[n]={from:this[n]||E.Border.DEFAULT,to:E.Border.of(i+"")||E.Border.DEFAULT,type:c.AnimationValueType.BORDER};break;case"border":this.fillSnapshotForAnimation(t,"borderLeft",i,r),this.fillSnapshotForAnimation(t,"borderRight",i,r),this.fillSnapshotForAnimation(t,"borderTop",i,r),this.fillSnapshotForAnimation(t,"borderBottom",i,r);break;case"shadow":case"textShadow":r[n]={from:this[n]||new R.Shadow(0,0,0,p.Color.WHITE),to:R.Shadow.of(i+"")||new R.Shadow(0,0,0,p.Color.WHITE),type:c.AnimationValueType.SHADOW};break;default:console.warn("unsupported animation attribute:"+e)}},t.parse4Dirs=function(t){var e=t.split(/\s+/);return 1===e.length?[l.BaseValue.of(e[0]),l.BaseValue.of(e[0]),l.BaseValue.of(e[0]),l.BaseValue.of(e[0])]:2===e.length?[l.BaseValue.of(e[0]),l.BaseValue.of(e[1]),l.BaseValue.of(e[0]),l.BaseValue.of(e[1])]:3===e.length?[l.BaseValue.of(e[0]),l.BaseValue.of(e[1]),l.BaseValue.of(e[2]),l.BaseValue.of(e[1])]:4===e.length?[l.BaseValue.of(e[0]),l.BaseValue.of(e[1]),l.BaseValue.of(e[2]),l.BaseValue.of(e[3])]:void 0},t.prototype.normalize=function(t){for(var e="",i=0,r=t.split(/-/);i<r.length;i++){var n=r[i];""===e?e=n:e+=n.substring(0,1).toUpperCase()+n.substring(1)}return e},t}();e.Style=A},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(1),a=i(25),h=i(8),u=i(4),c=i(2),l=i(27),p=i(11),d=function(t){function e(e,i,r,n,o){void 0===r&&(r=!0),void 0===o&&(o=!0);var s=t.call(this,i,r,o)||this;return s.nativeEvent=null,s.srcElement=e,n&&(s.identifier=n.identifier,s.stageX=n.stageX,s.stageY=n.stageY,s.x=n.x,s.y=n.y),s.currentTarget=e,s}return n(e,t),e.prototype.toString=function(){return"[TouchEvent (type="+this.type+")]"},e}(s.Event);e.TouchEvent=d,function(t){t[t.DISABLED=1]="DISABLED",t[t.CACHED=2]="CACHED",t[t.INVALIDATE=3]="INVALIDATE"}(o||(o={}));var f=function(t){function e(e){var i=t.call(this)||this;return i.id=void 0,i.rect=new h.Rect(0,0,0,0),i.cacheState=o.DISABLED,i.style=e&&e.style?e.style:new c.Style,e&&e.attributes.id&&(i.id=e.attributes.id),i}return n(e,t),e.prototype.remove=function(){this.parent&&this.parent.removeChild(this)},e.prototype.dispatchEvent=function(t){if(t.bubbles&&this.parent){for(var e=this,i=[e];e.parent;)i.push(e.parent),e=e.parent;for(var r=0,n=i;r<n.length;r++){var o=n[r];if(t.currentTarget=o,t.propagationStopped)break;o.doDispatchEvent(t)}}else this.doDispatchEvent(t);return!t.defaultPrevented},e.prototype.isVisible=function(){return!!(this.style.visible&&this.style.display!==c.Display.NONE&&this.style.alpha>0&&this.style.scaleX>0&&this.style.scaleY>0)},e.prototype.isPointerEventsEnabled=function(){return this.style.pointerEvents!==c.PointerEvents.NONE},e.prototype.getCacheCanvas=function(){return this.cacheCanvas},e.prototype.isCached=function(){return this.cacheState!==o.DISABLED},e.prototype.cache=function(){this.cacheState!==o.CACHED&&(this.cacheState=o.INVALIDATE)},e.prototype.uncache=function(){this.cacheState=o.DISABLED,delete this.cacheCanvas},e.prototype.invalidateCache=function(){this.cacheState!==o.DISABLED?this.cacheState=o.INVALIDATE:console.warn("Cache does not enabled for "+this.toString())},e.prototype.draw=function(t,e){if(void 0===e&&(e=!1),t.filter=this.style.filter||"none",e||this.cacheState===o.DISABLED)l.DrawUtils.drawElement(this,t);else{if(this.cacheCanvas||(this.cacheCanvas=u.Runtime.get().newCanvas()),this.cacheState!==o.CACHED){this.cacheCanvas.width=this.rect.width,this.cacheCanvas.height=this.rect.height;var i=this.cacheCanvas.getContext("2d");i&&l.DrawUtils.drawElement(this,i),this.cacheState=o.CACHED}t.drawImage(this.cacheCanvas,0,0,this.rect.width,this.rect.height)}},e.prototype.drawBackground=function(t,e,i){this.style.background&&this.style.background.draw(this,t,e,i)},e.prototype.drawContent=function(t){},e.prototype.updateContext=function(t){var e=this.getMatrix();t.transform(e.a,e.b,e.c,e.d,e.tx,e.ty),t.globalAlpha*=this.style.alpha},e.prototype.localToGlobal=function(t,e){return this.getConcatenatedMatrix().transformPoint(t,e)},e.prototype.globalToLocal=function(t,e){return this.getConcatenatedMatrix().invert().transformPoint(t,e)},e.prototype.localToLocal=function(t,e,i){var r=this.localToGlobal(t,e);return i.globalToLocal(r.x,r.y)},e.prototype.getMatrix=function(t){var e=t&&t.identity()||new a.Matrix2D,i=this.style.perspectiveOriginX.getValue(this.rect.width),r=this.style.perspectiveOriginY.getValue(this.rect.height);return e.appendTransform(this.rect.x+i+this.style.transformX.getValue(this.rect.width),this.rect.y+r+this.style.transformY.getValue(this.rect.height),this.style.scaleX,this.style.scaleY,this.style.rotation,this.style.skewX,this.style.skewY,i,r)},e.prototype.getConcatenatedMatrix=function(t){for(var e=this.getMatrix(t),i=this.parent;i;)e.prependMatrix(i.getMatrix()),i=i.parent;return e},e.prototype.hitTest=function(t,e){return t>=0&&t<this.rect.width&&e>=0&&e<this.rect.height},e.prototype.layout=function(){this.calculateSize()},e.prototype.calculateSize=function(){this.parent&&p.LayoutUtils.updateSize(this,this.parent.getWidth(),this.parent.getHeight())},e.prototype.css=function(t){return this.style.apply(t),this},e.prototype.getLineHeight=function(){return this.style.font?this.style.lineHeight?this.style.lineHeight.getValue(this.style.font.size):this.style.font.lineHeight?this.style.font.lineHeight.getValue(this.style.font.size):this.style.font.size:this.style.lineHeight?this.style.lineHeight.getValue(0):0},e.prototype.getWidth=function(){return this.rect.width},e.prototype.getHeight=function(){return this.rect.height},e.prototype.getPaddingWidth=function(){return this.rect.width-(this.style.borderLeft?this.style.borderLeft.width:0)-(this.style.borderRight?this.style.borderRight.width:0)},e.prototype.getPaddingHeight=function(){return this.rect.height-(this.style.borderTop?this.style.borderTop.width:0)-(this.style.borderBottom?this.style.borderBottom.width:0)},e.prototype.getPaddingRect=function(){var t=new h.Rect(0,0,this.rect.width,this.rect.height);return this.style.borderLeft&&(t.x+=this.style.borderLeft.width,t.width-=this.style.borderLeft.width),this.style.borderRight&&(t.width-=this.style.borderRight.width),this.style.borderTop&&(t.y+=this.style.borderTop.width,t.height-=this.style.borderTop.width),this.style.borderBottom&&(t.height-=this.style.borderBottom.width),t},e.prototype.getContentWidth=function(){return this.rect.width-(this.style.paddingLeft?this.style.paddingLeft.getValue(this.rect.width):0)-(this.style.paddingRight?this.style.paddingRight.getValue(this.rect.width):0)-(this.style.borderLeft?this.style.borderLeft.width:0)-(this.style.borderRight?this.style.borderRight.width:0)},e.prototype.getContentHeight=function(){return this.rect.height-(this.style.paddingTop?this.style.paddingTop.getValue(this.rect.height):0)-(this.style.paddingBottom?this.style.paddingBottom.getValue(this.rect.height):0)-(this.style.borderTop?this.style.borderTop.width:0)-(this.style.borderBottom?this.style.borderBottom.width:0)},e.prototype.getContentRect=function(){var t=new h.Rect(0,0,this.rect.width,this.rect.height);if(this.style.paddingLeft){var e=this.style.paddingLeft.getValue(this.rect.width);t.x+=e,t.width-=e}if(this.style.paddingRight&&(t.width-=this.style.paddingRight.getValue(this.rect.width)),this.style.paddingTop){var i=this.style.paddingTop.getValue(this.rect.height);t.y+=i,t.height-=i}return this.style.paddingBottom&&(t.height-=this.style.paddingBottom.getValue(this.rect.height)),this.style.borderLeft&&(t.x+=this.style.borderLeft.width,t.width-=this.style.borderLeft.width),this.style.borderRight&&(t.width-=this.style.borderRight.width),this.style.borderTop&&(t.y+=this.style.borderTop.width,t.height-=this.style.borderTop.width),this.style.borderBottom&&(t.height-=this.style.borderBottom.width),t},e.prototype.getOuterWidth=function(){var t=this.parent?this.parent.getWidth():0;return this.rect.width+(this.style.marginLeft?this.style.marginLeft.getValue(t):0)+(this.style.marginRight?this.style.marginRight.getValue(t):0)},e.prototype.getOuterHeight=function(){var t=this.parent?this.parent.getHeight():0;return this.rect.height+(this.style.marginTop?this.style.marginTop.getValue(t):0)+(this.style.marginBottom?this.style.marginBottom.getValue(t):0)},e.prototype.isChildOf=function(t){for(var e=this.parent;e;){if(e===t)return!0;e=e.parent}return!1},e.prototype.toString=function(){return"[XObject (id="+this.id+")]"},e.prototype.doDispatchEvent=function(e){if(e.currentTarget=this,e.stage&&this.willTrigger(e.type)){var i=e.stage.localToLocal(e.stageX,e.stageY,this);e.x=i.x,e.y=i.y}t.prototype.dispatchEvent.call(this,e)},e}(s.EventDispatcher);e.XObject=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(32),n=function(){function t(){}return t.prototype.newCanvas=function(){return document.createElement("canvas")},t.prototype.releaseCanvas=function(t){},t.prototype.enableEvents=function(t){var e=this;t.canvas.addEventListener("mousedown",(function(i){e.handleMouseEvent("mousedown",t,i)})),t.canvas.addEventListener("mousemove",(function(i){e.handleMouseEvent("mousemove",t,i)})),t.canvas.addEventListener("pressmove",(function(i){e.handleMouseEvent("mousemove",t,i)})),t.canvas.addEventListener("mouseup",(function(i){e.handleMouseEvent("mouseup",t,i)})),t.canvas.addEventListener("mouseenter",(function(i){e.handleMouseEvent("mouseenter",t,i)})),t.canvas.addEventListener("mouseleave",(function(i){e.handleMouseEvent("mouseleave",t,i)})),t.canvas.addEventListener("touchstart",(function(i){e.handleTouchEvent("touchstart",t,i)})),t.canvas.addEventListener("touchend",(function(i){e.handleTouchEvent("touchend",t,i)})),t.canvas.addEventListener("touchmove",(function(i){e.handleTouchEvent("touchmove",t,i)}))},t.prototype.requestAnimationFrame=function(t){window.requestAnimationFrame(t)},t.prototype.measureTextWidth=function(t,e){if(0===t.length)return 0;var i=this.getGlobalCanvas().getContext("2d");if(i){i.save(),i.font=e.toString();var r=i.measureText(t).width;return i.restore(),r}return 0},t.prototype.getGlobalCanvas=function(){return this.globalCanvas||(this.globalCanvas=this.newCanvas()),this.globalCanvas},t.prototype.handleMouseEvent=function(t,e,i){var n=e.canvas.width/e.canvas.clientWidth,o=e.canvas.height/e.canvas.clientHeight,s=i.offsetX*n,a=i.offsetY*o;e.handleMouseOrTouchEvent(t,[new r.TouchItem(0,void 0,s,a,0,0)],i)},t.prototype.handleTouchEvent=function(t,e,i){for(var n=e.canvas.width/e.canvas.clientWidth,o=e.canvas.height/e.canvas.clientHeight,s=[],a=0,h=i.touches;a<h.length;a++){var u=h[a];s.push(new r.TouchItem(u.identifier,void 0,u.clientX*n,u.clientY*o,0,0))}e.handleMouseOrTouchEvent(t,s,i)},t}(),o=function(){function t(){}return t.get=function(){return this.runtime},t.runtime=new n,t}();e.Runtime=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(33),n=/^([0-9]+|[0-9]+\.[0-9]*|[0-9]*\.[0-9]+)%?$/,o=/^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i,s=function(){function t(t,e,i,r){void 0===r&&(r=1),this.r=0,this.g=0,this.b=0,this.a=1,this.r=Math.min(255,Math.max(0,t)),this.g=Math.min(255,Math.max(0,e)),this.b=Math.min(255,Math.max(0,i)),this.a=Math.min(1,Math.max(0,r))}return t.of=function(e,i){if(void 0===i&&(i=!1),o.test(e))return this.fromHex(e,i);var n=e.toUpperCase();if(a[n])return a[n];var s=r.FunctionParser.parse(e,i);if(s){var h=s.name.toLowerCase();if("rgb"===h&&3===s.arguments.length){var u=this.parseColorValue(s.arguments[0],255),c=this.parseColorValue(s.arguments[1],255),l=this.parseColorValue(s.arguments[2],255);return void 0===u||void 0===c||void 0===l?void console.warn("invalid color value:"+e):new t(u,c,l,1)}if("rgba"===h&&4===s.arguments.length){u=this.parseColorValue(s.arguments[0],255),c=this.parseColorValue(s.arguments[1],255),l=this.parseColorValue(s.arguments[2],255);var p=this.parseColorValue(s.arguments[3],1);return void 0===u||void 0===c||void 0===l||void 0===p?void console.warn("invalid color value:"+e):new t(u,c,l,p)}i||console.warn("invalid color value:"+e)}else i||console.warn("invalid color value:"+e)},t.random=function(e){return new t(255*Math.random(),255*Math.random(),255*Math.random(),e?1*Math.random():1)},t.parseColorValue=function(t,e){if(n.test(t))return t.endsWith("%")?parseFloat(t)*e/100:parseFloat(t)},t.fromHex=function(e,i){return 4===e.length?new t(16*parseInt(e[1],16)+parseInt(e[1],16),16*parseInt(e[2],16)+parseInt(e[2],16),16*parseInt(e[3],16)+parseInt(e[3],16),1):5===e.length?new t(16*parseInt(e[1],16)+parseInt(e[1],16),16*parseInt(e[2],16)+parseInt(e[2],16),16*parseInt(e[3],16)+parseInt(e[3],16),(16*parseInt(e[4],16)+parseInt(e[4],16))/255):7===e.length?new t(parseInt(e.substring(1,3),16),parseInt(e.substring(3,5),16),parseInt(e.substring(5,7),16),1):9===e.length?new t(parseInt(e.substring(1,3),16),parseInt(e.substring(3,5),16),parseInt(e.substring(5,7),16),parseInt(e.substring(7,9),16)/255):void(i||console.warn("invalid color value:"+e))},t.prototype.equals=function(t){return this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a},t.prototype.clone=function(){return new t(this.r,this.g,this.b,this.a)},t.prototype.toString=function(){return"rgba("+this.r+","+this.g+","+this.b+","+this.a+")"},t.TRANSPARENT=t.of("#0000"),t.ALICEBLUE=t.of("#F0F8FF"),t.ANTIQUEWHITE=t.of("#FAEBD7"),t.AQUA=t.of("#00FFFF"),t.AQUAMARINE=t.of("#7FFFD4"),t.AZURE=t.of("#F0FFFF"),t.BEIGE=t.of("#F5F5DC"),t.BISQUE=t.of("#FFE4C4"),t.BLACK=t.of("#000000"),t.BLANCHEDALMOND=t.of("#FFEBCD"),t.BLUE=t.of("#0000FF"),t.BLUEVIOLET=t.of("#8A2BE2"),t.BROWN=t.of("#A52A2A"),t.BURLYWOOD=t.of("#DEB887"),t.CADETBLUE=t.of("#5F9EA0"),t.CHARTREUSE=t.of("#7FFF00"),t.CHOCOLATE=t.of("#D2691E"),t.CORAL=t.of("#FF7F50"),t.CORNFLOWERBLUE=t.of("#6495ED"),t.CORNSILK=t.of("#FFF8DC"),t.CRIMSON=t.of("#DC143C"),t.CYAN=t.of("#00FFFF"),t.DARKBLUE=t.of("#00008B"),t.DARKCYAN=t.of("#008B8B"),t.DARKGOLDENROD=t.of("#B8860B"),t.DARKGRAY=t.of("#A9A9A9"),t.DARKGREY=t.of("#A9A9A9"),t.DARKGREEN=t.of("#006400"),t.DARKKHAKI=t.of("#BDB76B"),t.DARKMAGENTA=t.of("#8B008B"),t.DARKOLIVEGREEN=t.of("#556B2F"),t.DARKORANGE=t.of("#FF8C00"),t.DARKORCHID=t.of("#9932CC"),t.DARKRED=t.of("#8B0000"),t.DARKSALMON=t.of("#E9967A"),t.DARKSEAGREEN=t.of("#8FBC8F"),t.DARKSLATEBLUE=t.of("#483D8B"),t.DARKSLATEGRAY=t.of("#2F4F4F"),t.DARKSLATEGREY=t.of("#2F4F4F"),t.DARKTURQUOISE=t.of("#00CED1"),t.DARKVIOLET=t.of("#9400D3"),t.DEEPPINK=t.of("#FF1493"),t.DEEPSKYBLUE=t.of("#00BFFF"),t.DIMGRAY=t.of("#696969"),t.DIMGREY=t.of("#696969"),t.DODGERBLUE=t.of("#1E90FF"),t.FIREBRICK=t.of("#B22222"),t.FLORALWHITE=t.of("#FFFAF0"),t.FORESTGREEN=t.of("#228B22"),t.FUCHSIA=t.of("#FF00FF"),t.GAINSBORO=t.of("#DCDCDC"),t.GHOSTWHITE=t.of("#F8F8FF"),t.GOLD=t.of("#FFD700"),t.GOLDENROD=t.of("#DAA520"),t.GRAY=t.of("#808080"),t.GREY=t.of("#808080"),t.GREEN=t.of("#008000"),t.GREENYELLOW=t.of("#ADFF2F"),t.HONEYDEW=t.of("#F0FFF0"),t.HOTPINK=t.of("#FF69B4"),t.INDIANRED=t.of("#CD5C5C"),t.INDIGO=t.of("#4B0082"),t.IVORY=t.of("#FFFFF0"),t.KHAKI=t.of("#F0E68C"),t.LAVENDER=t.of("#E6E6FA"),t.LAVENDERBLUSH=t.of("#FFF0F5"),t.LAWNGREEN=t.of("#7CFC00"),t.LEMONCHIFFON=t.of("#FFFACD"),t.LIGHTBLUE=t.of("#ADD8E6"),t.LIGHTCORAL=t.of("#F08080"),t.LIGHTCYAN=t.of("#E0FFFF"),t.LIGHTGOLDENRODYELLOW=t.of("#FAFAD2"),t.LIGHTGRAY=t.of("#D3D3D3"),t.LIGHTGREY=t.of("#D3D3D3"),t.LIGHTGREEN=t.of("#90EE90"),t.LIGHTPINK=t.of("#FFB6C1"),t.LIGHTSALMON=t.of("#FFA07A"),t.LIGHTSEAGREEN=t.of("#20B2AA"),t.LIGHTSKYBLUE=t.of("#87CEFA"),t.LIGHTSLATEGRAY=t.of("#778899"),t.LIGHTSLATEGREY=t.of("#778899"),t.LIGHTSTEELBLUE=t.of("#B0C4DE"),t.LIGHTYELLOW=t.of("#FFFFE0"),t.LIME=t.of("#00FF00"),t.LIMEGREEN=t.of("#32CD32"),t.LINEN=t.of("#FAF0E6"),t.MAGENTA=t.of("#FF00FF"),t.MAROON=t.of("#800000"),t.MEDIUMAQUAMARINE=t.of("#66CDAA"),t.MEDIUMBLUE=t.of("#0000CD"),t.MEDIUMORCHID=t.of("#BA55D3"),t.MEDIUMPURPLE=t.of("#9370DB"),t.MEDIUMSEAGREEN=t.of("#3CB371"),t.MEDIUMSLATEBLUE=t.of("#7B68EE"),t.MEDIUMSPRINGGREEN=t.of("#00FA9A"),t.MEDIUMTURQUOISE=t.of("#48D1CC"),t.MEDIUMVIOLETRED=t.of("#C71585"),t.MIDNIGHTBLUE=t.of("#191970"),t.MINTCREAM=t.of("#F5FFFA"),t.MISTYROSE=t.of("#FFE4E1"),t.MOCCASIN=t.of("#FFE4B5"),t.NAVAJOWHITE=t.of("#FFDEAD"),t.NAVY=t.of("#000080"),t.OLDLACE=t.of("#FDF5E6"),t.OLIVE=t.of("#808000"),t.OLIVEDRAB=t.of("#6B8E23"),t.ORANGE=t.of("#FFA500"),t.ORANGERED=t.of("#FF4500"),t.ORCHID=t.of("#DA70D6"),t.PALEGOLDENROD=t.of("#EEE8AA"),t.PALEGREEN=t.of("#98FB98"),t.PALETURQUOISE=t.of("#AFEEEE"),t.PALEVIOLETRED=t.of("#DB7093"),t.PAPAYAWHIP=t.of("#FFEFD5"),t.PEACHPUFF=t.of("#FFDAB9"),t.PERU=t.of("#CD853F"),t.PINK=t.of("#FFC0CB"),t.PLUM=t.of("#DDA0DD"),t.POWDERBLUE=t.of("#B0E0E6"),t.PURPLE=t.of("#800080"),t.REBECCAPURPLE=t.of("#663399"),t.RED=t.of("#FF0000"),t.ROSYBROWN=t.of("#BC8F8F"),t.ROYALBLUE=t.of("#4169E1"),t.SADDLEBROWN=t.of("#8B4513"),t.SALMON=t.of("#FA8072"),t.SANDYBROWN=t.of("#F4A460"),t.SEAGREEN=t.of("#2E8B57"),t.SEASHELL=t.of("#FFF5EE"),t.SIENNA=t.of("#A0522D"),t.SILVER=t.of("#C0C0C0"),t.SKYBLUE=t.of("#87CEEB"),t.SLATEBLUE=t.of("#6A5ACD"),t.SLATEGRAY=t.of("#708090"),t.SLATEGREY=t.of("#708090"),t.SNOW=t.of("#FFFAFA"),t.SPRINGGREEN=t.of("#00FF7F"),t.STEELBLUE=t.of("#4682B4"),t.TAN=t.of("#D2B48C"),t.TEAL=t.of("#008080"),t.THISTLE=t.of("#D8BFD8"),t.TOMATO=t.of("#FF6347"),t.TURQUOISE=t.of("#40E0D0"),t.VIOLET=t.of("#EE82EE"),t.WHEAT=t.of("#F5DEB3"),t.WHITE=t.of("#FFFFFF"),t.WHITESMOKE=t.of("#F5F5F5"),t.YELLOW=t.of("#FFFF00"),t.YELLOWGREEN=t.of("#9ACD32"),t.NONE=t.of("#FFFF00"),t}();e.Color=s;var a={TRANSPARENT:s.TRANSPARENT,ALICEBLUE:s.ALICEBLUE,ANTIQUEWHITE:s.ANTIQUEWHITE,AQUA:s.AQUA,AQUAMARINE:s.AQUAMARINE,AZURE:s.AZURE,BEIGE:s.BEIGE,BISQUE:s.BISQUE,BLACK:s.BLACK,BLANCHEDALMOND:s.BLANCHEDALMOND,BLUE:s.BLUE,BLUEVIOLET:s.BLUEVIOLET,BROWN:s.BROWN,BURLYWOOD:s.BURLYWOOD,CADETBLUE:s.CADETBLUE,CHARTREUSE:s.CHARTREUSE,CHOCOLATE:s.CHOCOLATE,CORAL:s.CORAL,CORNFLOWERBLUE:s.CORNFLOWERBLUE,CORNSILK:s.CORNSILK,CRIMSON:s.CRIMSON,CYAN:s.CYAN,DARKBLUE:s.DARKBLUE,DARKCYAN:s.DARKCYAN,DARKGOLDENROD:s.DARKGOLDENROD,DARKGRAY:s.DARKGRAY,DARKGREY:s.DARKGREY,DARKGREEN:s.DARKGREEN,DARKKHAKI:s.DARKKHAKI,DARKMAGENTA:s.DARKMAGENTA,DARKOLIVEGREEN:s.DARKOLIVEGREEN,DARKORANGE:s.DARKORANGE,DARKORCHID:s.DARKORCHID,DARKRED:s.DARKRED,DARKSALMON:s.DARKSALMON,DARKSEAGREEN:s.DARKSEAGREEN,DARKSLATEBLUE:s.DARKSLATEBLUE,DARKSLATEGRAY:s.DARKSLATEGRAY,DARKSLATEGREY:s.DARKSLATEGREY,DARKTURQUOISE:s.DARKTURQUOISE,DARKVIOLET:s.DARKVIOLET,DEEPPINK:s.DEEPPINK,DEEPSKYBLUE:s.DEEPSKYBLUE,DIMGRAY:s.DIMGRAY,DIMGREY:s.DIMGREY,DODGERBLUE:s.DODGERBLUE,FIREBRICK:s.FIREBRICK,FLORALWHITE:s.FLORALWHITE,FORESTGREEN:s.FORESTGREEN,FUCHSIA:s.FUCHSIA,GAINSBORO:s.GAINSBORO,GHOSTWHITE:s.GHOSTWHITE,GOLD:s.GOLD,GOLDENROD:s.GOLDENROD,GRAY:s.GRAY,GREY:s.GREY,GREEN:s.GREEN,GREENYELLOW:s.GREENYELLOW,HONEYDEW:s.HONEYDEW,HOTPINK:s.HOTPINK,INDIANRED:s.INDIANRED,INDIGO:s.INDIGO,IVORY:s.IVORY,KHAKI:s.KHAKI,LAVENDER:s.LAVENDER,LAVENDERBLUSH:s.LAVENDERBLUSH,LAWNGREEN:s.LAWNGREEN,LEMONCHIFFON:s.LEMONCHIFFON,LIGHTBLUE:s.LIGHTBLUE,LIGHTCORAL:s.LIGHTCORAL,LIGHTCYAN:s.LIGHTCYAN,LIGHTGOLDENRODYELLOW:s.LIGHTGOLDENRODYELLOW,LIGHTGRAY:s.LIGHTGRAY,LIGHTGREY:s.LIGHTGREY,LIGHTGREEN:s.LIGHTGREEN,LIGHTPINK:s.LIGHTPINK,LIGHTSALMON:s.LIGHTSALMON,LIGHTSEAGREEN:s.LIGHTSEAGREEN,LIGHTSKYBLUE:s.LIGHTSKYBLUE,LIGHTSLATEGRAY:s.LIGHTSLATEGRAY,LIGHTSLATEGREY:s.LIGHTSLATEGREY,LIGHTSTEELBLUE:s.LIGHTSTEELBLUE,LIGHTYELLOW:s.LIGHTYELLOW,LIME:s.LIME,LIMEGREEN:s.LIMEGREEN,LINEN:s.LINEN,MAGENTA:s.MAGENTA,MAROON:s.MAROON,MEDIUMAQUAMARINE:s.MEDIUMAQUAMARINE,MEDIUMBLUE:s.MEDIUMBLUE,MEDIUMORCHID:s.MEDIUMORCHID,MEDIUMPURPLE:s.MEDIUMPURPLE,MEDIUMSEAGREEN:s.MEDIUMSEAGREEN,MEDIUMSLATEBLUE:s.MEDIUMSLATEBLUE,MEDIUMSPRINGGREEN:s.MEDIUMSPRINGGREEN,MEDIUMTURQUOISE:s.MEDIUMTURQUOISE,MEDIUMVIOLETRED:s.MEDIUMVIOLETRED,MIDNIGHTBLUE:s.MIDNIGHTBLUE,MINTCREAM:s.MINTCREAM,MISTYROSE:s.MISTYROSE,MOCCASIN:s.MOCCASIN,NAVAJOWHITE:s.NAVAJOWHITE,NAVY:s.NAVY,OLDLACE:s.OLDLACE,OLIVE:s.OLIVE,OLIVEDRAB:s.OLIVEDRAB,ORANGE:s.ORANGE,ORANGERED:s.ORANGERED,ORCHID:s.ORCHID,PALEGOLDENROD:s.PALEGOLDENROD,PALEGREEN:s.PALEGREEN,PALETURQUOISE:s.PALETURQUOISE,PALEVIOLETRED:s.PALEVIOLETRED,PAPAYAWHIP:s.PAPAYAWHIP,PEACHPUFF:s.PEACHPUFF,PERU:s.PERU,PINK:s.PINK,PLUM:s.PLUM,POWDERBLUE:s.POWDERBLUE,PURPLE:s.PURPLE,REBECCAPURPLE:s.REBECCAPURPLE,RED:s.RED,ROSYBROWN:s.ROSYBROWN,ROYALBLUE:s.ROYALBLUE,SADDLEBROWN:s.SADDLEBROWN,SALMON:s.SALMON,SANDYBROWN:s.SANDYBROWN,SEAGREEN:s.SEAGREEN,SEASHELL:s.SEASHELL,SIENNA:s.SIENNA,SILVER:s.SILVER,SKYBLUE:s.SKYBLUE,SLATEBLUE:s.SLATEBLUE,SLATEGRAY:s.SLATEGRAY,SLATEGREY:s.SLATEGREY,SNOW:s.SNOW,SPRINGGREEN:s.SPRINGGREEN,STEELBLUE:s.STEELBLUE,TAN:s.TAN,TEAL:s.TEAL,THISTLE:s.THISTLE,TOMATO:s.TOMATO,TURQUOISE:s.TURQUOISE,VIOLET:s.VIOLET,WHEAT:s.WHEAT,WHITE:s.WHITE,WHITESMOKE:s.WHITESMOKE,YELLOW:s.YELLOW,YELLOWGREEN:s.YELLOWGREEN}},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s,a=i(1),h=i(21),u=i(34);!function(t){t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t[t.ERROR=3]="ERROR"}(o=e.LoadState||(e.LoadState={})),function(t){t[t.IMAGE=1]="IMAGE",t[t.APNG=2]="APNG"}(s=e.ResourceType||(e.ResourceType={}));var c=function(t){function e(e,i){var r=t.call(this,e)||this;return r.progress=i,r}return n(e,t),e}(a.Event),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.items=[],e}return n(e,t),e.prototype.add=function(t,e){var i=this;return new Promise((function(r,n){for(var s=0,a=i.items;s<a.length;s++){var h=a[s];if(h.url===t)return void(h.state===o.LOADED?r(h.resource):h.state===o.ERROR?n(h.error):h.promiseHandlers.push({resolve:r,reject:n}))}var u={url:t,type:e,resource:void 0,state:o.LOADING,progress:0,loadedBytes:0,totalBytes:0,promiseHandlers:[{resolve:r,reject:n}]};i.items.push(u),i.load(u)}))},e.prototype.load=function(t){switch(t.type){case s.IMAGE:this.loadImage(t);break;case s.APNG:this.loadApng(t)}},e.prototype.loadImage=function(t){var e=this;new u.Loader(t.url,"GET","blob").on("load",(function(i){var r=URL.createObjectURL(i.response);t.resource=new Image,t.resource.src=r,t.resource.onload=function(){URL.revokeObjectURL(r),e.onLoad(t)}})).on("progress",(function(i){t.loadedBytes=i.target.loadedBytes,t.totalBytes=i.target.totalBytes,e.onProgress(t)})).on("error",(function(i){t.error=i,e.onError(t)}))},e.prototype.loadApng=function(t){var e=this;new u.Loader(t.url,"GET","arraybuffer").on("load",(function(i){for(var r=h.ApngParser.parse(i.response),n={width:r.width,height:r.height,fps:1e3*r.frames.length/r.duration,frames:[],url:void 0,image:void 0},o=0,s=r.frames;o<s.length;o++){var a=s[o];n.frames.push({destX:a.left,destY:a.top,destWidth:a.width,destHeight:a.height,image:a.image})}t.resource=n,e.onLoad(t)})).on("progress",(function(i){t.loadedBytes=i.target.loadedBytes,t.totalBytes=i.target.totalBytes,e.onProgress(t)})).on("error",(function(i){t.error=i,e.onError(t)}))},e.prototype.getTotalProgress=function(){for(var t=0,e=0,i=this.items;e<i.length;e++){t+=i[e].progress}return t/this.items.length},e.prototype.onProgress=function(t){t.progress=t.totalBytes>0?t.loadedBytes/t.totalBytes:0,this.dispatchEvent(new c("progress",this.getTotalProgress()))},e.prototype.onLoad=function(t){t.state=o.LOADED,t.progress=1,t.loadedBytes=t.totalBytes;for(var e=0,i=t.promiseHandlers;e<i.length;e++){i[e].resolve(t.resource)}t.promiseHandlers=[];for(var r=!0,n=0,s=this.items;n<s.length;n++){if(s[n].state!==o.LOADED){r=!1;break}}r&&this.dispatchEvent(new c("done",1))},e.prototype.onError=function(t){t.state=o.ERROR;for(var e=0,i=t.promiseHandlers;e<i.length;e++){i[e].reject(t.error)}t.promiseHandlers=[],this.dispatchEvent(new c("error",this.getTotalProgress()))},e.prototype.get=function(t){for(var e=0,i=this.items;e<i.length;e++){var r=i[e];if(r.url===t)return r.state===o.LOADED?r.resource:void 0}},e.prototype.release=function(t){for(var e=0;e<this.items.length;++e){var i=this.items[e];if(i.url===t)return this.items.splice(e,1),i}},e.DefaultInstance=new e,e}(a.EventDispatcher);e.ResourceRegistry=l},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s,a=i(9),h=i(5),u=i(1),c=i(12),l=i(14),p=i(15),d=i(0);!function(t){t[t.NUMBER=1]="NUMBER",t[t.BASEVALUE=2]="BASEVALUE",t[t.COLOR=3]="COLOR",t[t.BORDER=4]="BORDER",t[t.SHADOW=5]="SHADOW"}(o=e.AnimationValueType||(e.AnimationValueType={})),function(t){t.UPDATE="update",t.COMPLETE="complete"}(s=e.AnimateEventType||(e.AnimateEventType={}));var f=function(t){function e(e,i,r,n){var o=t.call(this,e,!1,!0)||this;return o.progress=i,o.currentStep=r,o.currentProgress=n,o}return n(e,t),e.prototype.toString=function(){return"[AnimateEvent (type="+this.type+")]"},e}(u.Event);e.AnimateEvent=f;var g=function(){function t(t,e){this.endTime=0,this.target=t,this.duration=e}return t.prototype.onStart=function(){},t.prototype.onUpdate=function(t){return!1},t.prototype.onEnd=function(){},t}();e.AnimationStep=g;var E,v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(g),y=function(t){function e(e,i,r,n){var o=t.call(this,e,n)||this;if("string"==typeof r){var s=d.AlgorithmFactory.get(r);if(!s)throw new Error("unknown algorithm:"+r);o.algorithm=s}else o.algorithm=r;return o.props=i,o}return n(e,t),e.prototype.onStart=function(){this.computed=this.target.style.getSnapshotForAnimation(this.target,this.props)},e.prototype.onUpdate=function(t){if(!this.computed)return!1;for(var e in this.computed){var i=this.computed[e];switch(i.type){case o.NUMBER:var r=i.from,n=i.to;this.target.style[e]=r+(n-r)*this.algorithm.calculate(t);break;case o.BASEVALUE:r=i.from,n=i.to;this.target.style[e]=new a.BaseValue(r.numberValue+(n.numberValue-r.numberValue)*this.algorithm.calculate(t),n.unit);break;case o.COLOR:r=i.from,n=i.to;var s=this.algorithm.calculate(t),u=new h.Color(r.r+(n.r-r.r)*s,r.g+(n.g-r.g)*s,r.b+(n.b-r.b)*s,r.a+(n.a-r.a)*s);"backgroundColor"===e?(this.target.style.background||(this.target.style.background=new c.Background),this.target.style.background.color=u):this.target.style[e]=u;break;case o.BORDER:r=i.from,n=i.to,s=this.algorithm.calculate(t);this.target.style[e]=new l.Border(r.width+(n.width-r.width)*s,r.style,new h.Color(r.color.r+(n.color.r-r.color.r)*s,r.color.g+(n.color.g-r.color.g)*s,r.color.b+(n.color.b-r.color.b)*s,r.color.a+(n.color.a-r.color.a)*s));break;case o.SHADOW:r=i.from,n=i.to,s=this.algorithm.calculate(t);this.target.style[e]=new p.Shadow(r.offsetX+(n.offsetX-r.offsetX)*s,r.offsetY+(n.offsetY-r.offsetY)*s,r.blur+(n.blur-r.blur)*s,new h.Color(r.color.r+(n.color.r-r.color.r)*s,r.color.g+(n.color.g-r.color.g)*s,r.color.b+(n.color.b-r.color.b)*s,r.color.a+(n.color.a-r.color.a)*s))}}return!0},e}(g),R=function(t){function e(e,i){var r=t.call(this,e,0)||this;return r.call=i,r}return n(e,t),e.prototype.onEnd=function(){this.call()},e}(g);!function(t){t[t.RUNNING=1]="RUNNING",t[t.PAUSED=2]="PAUSED",t[t.COMPLETED=3]="COMPLETED",t[t.CANCELLED=4]="CANCELLED"}(E=e.AnimationState||(e.AnimationState={}));var m=function(t){function e(e,i){var r=t.call(this)||this;return r.playTimes=1,r.state=E.RUNNING,r.steps=[],r.roundStartTime=0,r.duration=0,r.currentStepIndex=0,r.currentStepProgress=0,r.totalProgress=0,r.target=e,r.playTimes=i?0:1,r.roundStartTime=r.beginTime=Date.now(),r.currentStepIndex=0,r.state=E.RUNNING,r}return n(e,t),e.prototype.toPromise=function(){var t=this;return new Promise((function(e,i){t.addEventListener(s.COMPLETE,(function(t){e(t)}))}))},e.prototype.pause=function(){return this.state===E.RUNNING&&(this.state=E.PAUSED,this.pauseTime=Date.now(),!0)},e.prototype.resume=function(){if(this.state===E.PAUSED){var t=Date.now()-this.pauseTime;return this.roundStartTime+=t,this.beginTime+=t,this.state=E.RUNNING,!0}return!1},e.prototype.loop=function(t){return this.playTimes=t?0:1,this},e.prototype.times=function(t){return this.playTimes=t,this},e.prototype.to=function(t,e,i){return void 0===i&&(i="linear"),this.addStep(new y(this.target,t,i,e)),this},e.prototype.call=function(t){return this.addStep(new R(this.target,t))},e.prototype.wait=function(t){return this.addStep(new v(this.target,t))},e.prototype.onInterval=function(){if(this.duration<=0)return!1;var t=Date.now();if(t<this.roundStartTime)return!1;var e=t-this.roundStartTime,i=this.steps[this.currentStepIndex];if(e>=this.duration){for(i.onUpdate(1),i.onEnd(),++this.currentStepIndex;this.currentStepIndex<this.steps.length;++this.currentStepIndex){(o=this.steps[this.currentStepIndex]).onStart(),o.onUpdate(1),o.onEnd()}var r=!0;if(this.playTimes>0&&(r=this.playTimes*this.duration>t-this.beginTime),r)for(e%=this.duration,this.roundStartTime=t-e,this.currentStepIndex=0;;){if((o=this.steps[this.currentStepIndex]).onStart(),o.endTime>e){var n=1-(o.endTime-e)/o.duration;this.onUpdateInternal(n,e/this.duration);break}o.onUpdate(1),o.onEnd(),++this.currentStepIndex}else this.currentStepIndex=this.steps.length-1,this.onUpdateInternal(1,1),this.state=E.COMPLETED,this.dispatchEvent(new f(s.COMPLETE,this.totalProgress,this.currentStepIndex,this.currentStepProgress))}else if(i.endTime>e){n=1-(i.endTime-e)/i.duration;this.onUpdateInternal(n,e/this.duration)}else for(i.onUpdate(1),i.onEnd(),++this.currentStepIndex;;){var o;if((o=this.steps[this.currentStepIndex]).onStart(),o.endTime>e&&o.duration>0){n=1-(o.endTime-e)/o.duration;this.onUpdateInternal(n,e/this.duration);break}o.onUpdate(1),o.onEnd(),++this.currentStepIndex}return!0},e.prototype.cancel=function(){this.state=E.CANCELLED,this.dispatchEvent(new f(s.COMPLETE,this.totalProgress,this.currentStepIndex,this.currentStepProgress))},e.prototype.onUpdateInternal=function(t,e){this.currentStepProgress=t,this.totalProgress=e,this.steps[this.currentStepIndex].onUpdate(t),this.dispatchEvent(new f(s.UPDATE,this.totalProgress,this.currentStepIndex,this.currentStepProgress))},e.prototype.addStep=function(t){return this.steps.push(t),this.duration+=t.duration,t.endTime=this.duration,1===this.steps.length&&t.onStart(),this},e}(u.EventDispatcher);e.Animation=m},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=/^\s*[0-9]+\s+[0-9]+\s+[0-9]+\s+[0-9]+\s*$/,n=function(){function t(t,e,i,r){this.x=t,this.y=e,this.width=i,this.height=r}return t.of=function(e){if(r.test(e)){var i=e.split(/\s+/),n=parseFloat(i[0]);if(!isNaN(n)){var o=parseFloat(i[1]);if(!isNaN(o)){var s=parseFloat(i[2]);if(!isNaN(s)){var a=parseFloat(i[3]);if(!isNaN(a))return new t(n,o,s,a)}}}}},t.prototype.in=function(t,e){return t>=this.x&&e>=this.y&&t<this.x+this.width&&e<this.y+this.height},t.prototype.equals=function(t){return this.x===t.x&&this.y==this.y&&this.width===t.width&&this.height===t.height},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t}();e.Rect=n},function(t,e,i){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.PX=1]="PX",t[t.PERCENTAGE=2]="PERCENTAGE"}(r=e.BaseValueUnit||(e.BaseValueUnit={}));var n=function(){function t(t,e){void 0===e&&(e=r.PX),this.numberValue=0,this.unit=e,this.numberValue=t}return t.of=function(e,i){if(void 0===i&&(i=!1),"string"==typeof e){var n=parseFloat(e);return isNaN(n)?void(i||console.warn("invalid value:"+e)):e.endsWith("%")?new t(n,r.PERCENTAGE):new t(n,r.PX)}return new t(e,r.PX)},t.prototype.getValue=function(t){switch(this.unit){case r.PERCENTAGE:return this.numberValue*t/100;case r.PX:return this.numberValue}},t.prototype.toAbsolute=function(e){switch(this.unit){case r.PERCENTAGE:return new t(this.numberValue*e/100,r.PX);case r.PX:return this}},t.prototype.toPercentage=function(e){switch(this.unit){case r.PX:return new t(this.numberValue/e*100,r.PERCENTAGE);case r.PERCENTAGE:return this}},t.prototype.toString=function(){switch(this.unit){case r.PERCENTAGE:return this.numberValue+"%";case r.PX:return this.numberValue+""}},t.prototype.equals=function(t){return this.numberValue===t.numberValue&&this.unit==this.unit},t.prototype.clone=function(){return new t(this.numberValue,this.unit)},t}();e.BaseValue=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.fromString=function(t,e,i){for(var r in t)if(t[r]===e)return e;return i},t.fromStringOrUndefined=function(t,e){for(var i in t)if(t[i]===e)return e},t}();e.EnumUtils=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(2),n=function(){function t(){}return t.updateSize=function(t,e,i){t.style.width&&t.style.height?(t.rect.width=t.style.width.getValue(e),t.rect.height=t.style.height.getValue(i)):t.style.width?(t.rect.width=t.style.width.getValue(e),t.rect.height=void 0===t.style.aspectRatio?0:t.rect.width/t.style.aspectRatio):t.style.height?(t.rect.height=t.style.height.getValue(i),t.rect.width=void 0===t.style.aspectRatio?0:t.rect.height*t.style.aspectRatio):t.rect.height=t.rect.width=0,t.style.boxSizing===r.BoxSizing.CONTENT_BOX&&(t.rect.width+=(t.style.paddingLeft?t.style.paddingLeft.getValue(t.rect.width):0)+(t.style.paddingRight?t.style.paddingRight.getValue(t.rect.width):0)+(t.style.borderLeft?t.style.borderLeft.width:0)+(t.style.borderRight?t.style.borderRight.width:0),t.rect.height+=(t.style.paddingTop?t.style.paddingTop.getValue(t.rect.height):0)+(t.style.paddingBottom?t.style.paddingBottom.getValue(t.rect.height):0)+(t.style.borderTop?t.style.borderTop.width:0)+(t.style.borderBottom?t.style.borderBottom.width:0))},t.updatePositionForAbsoluteElement=function(t,e,i){t.style.right?t.rect.x=e-t.rect.width-t.style.right.getValue(e)-(t.style.marginRight?t.style.marginRight.getValue(e):0):t.style.left?t.rect.x=t.style.left.getValue(e)+(t.style.marginLeft?t.style.marginLeft.getValue(e):0):t.rect.x=t.style.marginLeft?t.style.marginLeft.getValue(e):0,t.style.bottom?t.rect.y=i-t.rect.height-t.style.bottom.getValue(i)-(t.style.marginBottom?t.style.marginBottom.getValue(i):0):t.style.top?t.rect.y=t.style.top.getValue(i)+(t.style.marginTop?t.style.marginTop.getValue(i):0):t.rect.y=t.style.marginTop?t.style.marginTop.getValue(i):0},t}();e.LayoutUtils=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,n,o=i(9),s=i(5),a=i(8),h=i(6),u=i(4),c=i(10),l=i(13);!function(t){t.SCROLL="scroll"}(r=e.BackgroundAttachment||(e.BackgroundAttachment={})),function(t){t.REPEAT="repeat",t.NO_REPEAT="no-repeat",t.SPACE="space",t.ROUND="round"}(n=e.BackgroundRepeat||(e.BackgroundRepeat={}));var p,d,f=function(){function t(t){this.url=t,h.ResourceRegistry.DefaultInstance.add(t,h.ResourceType.IMAGE)}return t.of=function(e){return new t(e[0])},t.prototype.getSource=function(t,e){return h.ResourceRegistry.DefaultInstance.get(this.url)},t.prototype.toString=function(){return"url("+this.url+")"},t.prototype.clone=function(){return new t(this.url)},t.prototype.destory=function(){},t}(),g=function(){function t(t){this.parameters=t}return t.of=function(e){return new t(e)},t.prototype.getSource=function(t,e){if(0!==this.parameters.length){if(t=Math.round(t),e=Math.round(e),this.canvas&&this.canvas.width===t&&this.canvas.height===e)return this.canvas;this.canvas||(this.canvas=u.Runtime.get().newCanvas()),this.canvas.width!==t&&(this.canvas.width=t),this.canvas.height!==e&&(this.canvas.height=e);var i=this.canvas.getContext("2d");if(i){var r,n=0;if(this.parameters[0].startsWith("to")){var o=this.parameters[0].substring(2).replace(/\s+/g,"");r="left"===o?i.createLinearGradient(t-1,0,0,0):"right"===o?i.createLinearGradient(0,0,t-1,0):"top"===o?i.createLinearGradient(0,e-1,0,0):"bottom"===o?i.createLinearGradient(0,0,0,e-1):"lefttop"===o?i.createLinearGradient(t-1,e-1,0,0):"leftbottom"===o?i.createLinearGradient(t-1,0,0,e-1):"righttop"===o?i.createLinearGradient(0,e-1,t-1,0):"rightbottom"===o?i.createLinearGradient(0,0,t-1,e-1):i.createLinearGradient(0,0,0,e-1),n++}else this.parameters[0].endsWith("deg")&&(r=i.createLinearGradient(0,0,t-1,e-1),n++);r||(r=i.createLinearGradient(0,0,0,e-1));for(var s=-1;n<this.parameters.length;++n){var a=this.parameters[n].split(/\s+/),h=a[0];if(a.length<2)if(-1===s)s=0,r.addColorStop(0,h);else{for(var c=1,l=0,p=n+1;p<this.parameters.length;++p){++l;var d=this.parameters[p].split(/\s+/);if(d.length>1){c=parseFloat(d[1])/100;break}}0===l?s=1:s+=(c-s)/(l+1),r.addColorStop(s,h)}else for(p=1;p<a.length;++p)s=parseFloat(a[p])/100,r.addColorStop(s,h)}return i.fillStyle=r,i.fillRect(0,0,t,e),this.canvas}}},t.prototype.toString=function(){return"linear-gradient("+this.parameters.join(",")+")"},t.prototype.clone=function(){return new t(this.parameters)},t.prototype.destory=function(){this.canvas&&(u.Runtime.get().releaseCanvas(this.canvas),this.canvas=void 0)},t}(),E=function(){function t(t,e){this.x=t,this.y=e}return t.of=function(e){if("repeat-x"===e)return new t(n.REPEAT,n.NO_REPEAT);if("repeat-y"===e)return new t(n.NO_REPEAT,n.REPEAT);var i=e.split(/\s+/),r=c.EnumUtils.fromStringOrUndefined(n,i[0]);return r?i.length>1?new t(r,c.EnumUtils.fromString(n,i[1],n.NO_REPEAT)):new t(r,r):void 0},t.toBaseValue=function(t){return"left"===(t=t.toLowerCase())||"top"===t?o.BaseValue.of("0%"):"right"===t||"bottom"===t?o.BaseValue.of("100%"):"center"===t?o.BaseValue.of("50%"):o.BaseValue.of(t)},t.prototype.clone=function(){return new t(this.x,this.y)},t}();!function(t){t.BORDER_BOX="border-box",t.PADDING_BOX="padding-box",t.CONTENT_BOX="content-box"}(p=e.BackgroundClip||(e.BackgroundClip={})),function(t){t.BORDER_BOX="border-box",t.PADDING_BOX="padding-box",t.CONTENT_BOX="content-box"}(d=e.BackgroundOrigin||(e.BackgroundOrigin={})),function(t){t[t.AUTO=0]="AUTO",t[t.LENGTH=1]="LENGTH",t[t.PERCENTAGE=2]="PERCENTAGE",t[t.COVER=3]="COVER",t[t.CONTAIN=4]="CONTAIN"}(e.BackgroundSizeType||(e.BackgroundSizeType={}));var v=function(){function t(t,e){this.x=t,this.y=e}return t.of=function(e){var i=e.split(/\s+/);return new t(this.toBaseValue(i[0]),i.length>1?this.toBaseValue(i[1]):o.BaseValue.of("50%"))},t.toBaseValue=function(t){return"left"===(t=t.toLowerCase())||"top"===t?o.BaseValue.of("0%"):"right"===t||"bottom"===t?o.BaseValue.of("100%"):"center"===t?o.BaseValue.of("50%"):o.BaseValue.of(t)},t.prototype.clone=function(){return new t(this.x.clone(),this.y.clone())},t}(),y=/([^\s]+\([^\)]+\)|[^\s]+)/g,R=/("[^"]+"|'[^']+'|[^,]+)/g,m=/^(url|linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient)\(([^\)]+)\)$/i,A=/^(left|right|[0-9\.]+px|[0-9\.]+%)$/i,T=/^(top|bottom|[0-9\.]+px|[0-9\.]+%)$/i,b=function(){function t(){this.attachment=[],this.image=[],this.repeat=[],this.clip=[],this.origin=[],this.size=[],this.position=[],this.blendMode=[]}return t.of=function(e){for(var i=this.split(e),r=new t,n=0,a=i;n<a.length;n++){for(var h=a[n],u=void 0,d=void 0,f=void 0,g=void 0,R=void 0,m=0,b=l.StringUtils.matchAll(h,y);m<b.length;m++){var O=b[m][1].trim();if(r.color)if(u){if((d||!(d=E.of(O)))&&(f||!(f=c.EnumUtils.fromStringOrUndefined(p,O)))){if(g){if(!R&&T.test(O)){R=v.toBaseValue(O);continue}}else if(A.test(O)){g=v.toBaseValue(O);continue}console.warn("unknow part: "+O)}}else u=this.parseImage(O);else{var L=s.Color.of(O,!0);r.color=L}}u&&r.image.push(u),d&&r.repeat.push(d),f&&r.clip.push(f),g&&(R||(R=o.BaseValue.of("50%")),r.position.push(new v(g,R)))}return r},t.trimParameter=function(t){return(t=t.trim()).length>1&&('"'===t[0]&&'"'===t[t.length-1]||"'"===t[0]&&"'"===t[t.length-1])?t.substring(1,t.length-1):t},t.parseParameters=function(t){for(var e=[],i=0,r=l.StringUtils.matchAll(t,R);i<r.length;i++){var n=r[i][1].trim();e.push(this.trimParameter(n))}return e},t.parseImage=function(t){var e=t.match(m);if(e){var i=e[1],r=e[2];switch(i){case"url":return f.of(this.parseParameters(r));case"linear-gradient":return g.of(this.parseParameters(r))}}},t.split=function(t){for(var e=[],i=0,r=!1,n=t.length,o=0;o<n;++o){var s=t[o];r?")"===s&&(r=!1):"("===s?r=!0:","===s&&(i<o&&e.push(t.substring(i,o).trim()),i=o+1)}return i<n&&e.push(t.substring(i).trim()),e},t.copyArray=function(t,e){for(var i=0,r=t;i<r.length;i++){var n=r[i];e.push(n)}},t.cloneArray=function(t,e){for(var i=0,r=t;i<r.length;i++){var n=r[i];n?e.push(n.clone()):e.push(void 0)}},t.getFromArray=function(t,e,i){return e>=t.length?i:t[e]},t.prototype.setColor=function(t){this.color=t instanceof s.Color?t:s.Color.of(t)},t.prototype.setAttachment=function(e){var i=t.split(e);this.attachment.length=0;for(var n=0,o=i;n<o.length;n++){o[n];this.attachment.push(r.SCROLL)}},t.prototype.setImage=function(e){var i=t.split(e);this.image.length=0;for(var r=0,n=i;r<n.length;r++){var o=n[r];this.image.push(t.parseImage(o))}},t.prototype.setBlendMode=function(e){var i=t.split(e);this.blendMode.length=0;for(var r=0,n=i;r<n.length;r++){var o=n[r];this.blendMode.push(o)}},t.prototype.setRepeat=function(e){var i=t.split(e);this.repeat.length=0;for(var r=0,o=i;r<o.length;r++){var s=o[r],a=E.of(s)||new E(n.NO_REPEAT,n.NO_REPEAT);this.repeat.push(a)}},t.prototype.setClip=function(e){var i=t.split(e);this.clip.length=0;for(var r=0,n=i;r<n.length;r++){var o=n[r],s=c.EnumUtils.fromString(p,o,p.BORDER_BOX);this.clip.push(s)}},t.prototype.setOrigin=function(e){var i=t.split(e);this.origin.length=0;for(var r=0,n=i;r<n.length;r++){var o=n[r],s=c.EnumUtils.fromString(d,o,d.BORDER_BOX);this.origin.push(s)}},t.prototype.setSize=function(e){var i=t.split(e);this.size.length=0;for(var r=0,n=i;r<n.length;r++){var o=n[r];this.size.push(v.of(o))}},t.prototype.setPosition=function(e){var i=t.split(e);this.position.length=0;for(var r=0,n=i;r<n.length;r++){var o=n[r];this.position.push(v.of(o))}},t.prototype.draw=function(e,i,r,s){if(0===this.image.length&&this.color){i.fillStyle=this.color.toString();var h=void 0;switch(v=t.getFromArray(this.clip,0,p.BORDER_BOX)){case p.PADDING_BOX:h=e.getPaddingRect();break;case p.CONTENT_BOX:h=e.getContentRect();break;default:h=new a.Rect(0,0,e.rect.width,e.rect.height)}return v===p.BORDER_BOX?r.clip(i):s.clip(i),void i.fillRect(h.x,h.y,h.width,h.height)}for(var u=this.image.length-1;u>=0;--u){var c=this.image[u];if(c){var l=void 0;switch(t.getFromArray(this.origin,u,d.BORDER_BOX)){case d.PADDING_BOX:l=e.getPaddingRect();break;case d.CONTENT_BOX:l=e.getContentRect();break;default:l=new a.Rect(0,0,e.rect.width,e.rect.height)}var f=l.width,g=l.height;if(this.size.length>u)f=(R=this.size[u]).x.getValue(l.width),g=R.y.getValue(l.height);var E=c.getSource(f,g);if(E){var v,y=void 0;switch(v=t.getFromArray(this.clip,u,p.BORDER_BOX)){case p.PADDING_BOX:y=e.getPaddingRect();break;case p.CONTENT_BOX:y=e.getContentRect();break;default:y=new a.Rect(0,0,e.rect.width,e.rect.height)}v===p.BORDER_BOX?r.clip(i):s.clip(i),this.color&&u===this.image.length-1&&(i.fillStyle=this.color.toString(),i.fillRect(y.x,y.y,y.width,y.height));var R,m=E.width,A=E.height,T=m,b=A,O=1,L=1,w=l.x,S=l.y;if(this.size.length>u)O=(T=(R=this.size[u]).x.getValue(l.width))/m,L=(b=R.y.getValue(l.height))/A;if(!(T<1||b<1)){var B=n.NO_REPEAT,I=n.NO_REPEAT;this.repeat.length>u&&(B=this.repeat[u].x,I=this.repeat[u].y);var N=0,D=0;if(B===n.SPACE)for(N=1===(C=Math.floor(l.width/T))?l.width:(l.width-C*T)/(C-1),w=l.x;w>y.x;)w-=N+T;else if(B===n.ROUND){var C=Math.max(1,Math.floor(l.width/T+.5));for(O=(T=l.width/C)/m,w=l.x;w>y.x;)w-=T}else{if(this.position.length>u)(P=this.position[u]).x.unit===o.BaseValueUnit.PERCENTAGE?w+=(l.width-T)*P.x.numberValue/100:w+=P.x.numberValue;if(B===n.REPEAT)for(;w>y.x;)w-=T}if(I===n.SPACE)for(D=1===(C=Math.floor(l.height/b))?l.height:(l.height-C*b)/(C-1),S=l.y;S>y.y;)S-=D+b;else if(I===n.ROUND){C=Math.max(1,Math.floor(l.height/b+.5));for(L=(b=l.height/C)/A,S=l.y;S>y.y;)S-=b}else{var P;if(this.position.length>u)(P=this.position[u]).y.unit===o.BaseValueUnit.PERCENTAGE?S+=(l.height-b)*P.y.numberValue/100:S+=P.y.numberValue;if(I===n.REPEAT)for(;S>y.y;)S-=b}var M=y.y+y.height,x=y.x+y.width;do{var F=w;do{this.drawImage(i,E,T,b,O,L,F,S,y),F+=N+T}while(F<x&&B!==n.NO_REPEAT);S+=D+b}while(S<M&&I!==n.NO_REPEAT)}}}}},t.prototype.clone=function(){var e=new t;return e.color=this.color,t.copyArray(this.attachment,e.attachment),t.cloneArray(this.image,e.image),t.copyArray(this.blendMode,e.blendMode),t.copyArray(this.clip,e.clip),t.copyArray(this.origin,e.origin),t.cloneArray(this.repeat,e.repeat),t.cloneArray(this.size,e.size),t.cloneArray(this.position,e.position),e},t.prototype.drawImage=function(t,e,i,r,n,o,s,a,h){var u=0,c=0;s<h.x&&(u=h.x-s,s=h.x),a<h.y&&(c=h.y-a,a=h.y);var l=i-u,p=r-c;l+s>h.width+h.x&&(l=h.width+h.x-s),p+a>h.height+h.y&&(p=h.height+h.y-a),t.drawImage(e,u/n,c/o,l/n,p/o,s,a,l,p)},t}();e.Background=b},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.matchAll=function(t,e){for(var i=[],r=new RegExp(e,e.flags.includes("g")?e.flags:e.flags+"g"),n=r.exec(t);n;)i.push(n),n=r.exec(t);return i},t}();e.StringUtils=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,n=i(5);!function(t){t.SOLID="solid"}(r=e.BorderStyle||(e.BorderStyle={}));var o=/^[\s]*([^\s]+)[\s]+([\w]+)[\s]+(.*)$/,s=function(){function t(t,e,i){this.width=0,this.style=r.SOLID,this.color=n.Color.NONE,this.width=t,this.style=e,this.color=i}return t.of=function(e,i){void 0===i&&(i=!1);var s=e.match(o);if(s){var a=n.Color.of(s[3],i);if(a)return new t(parseFloat(s[1]),r.SOLID,a);i||console.warn("invalid border:"+e)}else i||console.warn("invalid border:"+e)},t.prototype.toString=function(){return this.width.toString()+" "+this.style+" "+this.color.toString()},t.prototype.equals=function(t){return this.width===t.width&&this.style===t.style&&this.color.equals(t.color)},t.prototype.isEnable=function(){return this.width>0&&this.color.a>0},t.prototype.clone=function(){return new t(this.width,this.style,this.color.clone())},t.DEFAULT=new t(0,r.SOLID,n.Color.BLACK),t}();e.Border=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(5),n=i(35),o=function(){function t(t,e,i,r){this.offsetX=t,this.offsetY=e,this.blur=i,this.color=r}return t.of=function(e,i){void 0===i&&(i=!1);var o=(new n.CSSTokenizer).tokenize(e);if(4===o.length){var s=parseFloat(o[0]),a=parseFloat(o[1]),h=parseFloat(o[2]),u=r.Color.of(o[3],i);if(!(isNaN(s)||isNaN(a)||isNaN(h)||void 0===u))return new t(s,a,h,u);i||console.warn("invalid shadow:"+e)}else i||console.warn("invalid shadow:"+e)},t.prototype.toString=function(){return"[Shadow ("+this.color.toString()+" "+this.offsetX+" "+this.offsetY+" "+this.blur+")]"},t.prototype.clone=function(){return new t(this.offsetX,this.offsetY,this.blur,this.color)},t.prototype.isEnable=function(){return this.color.a>0&&(0!==this.offsetX||0!==this.offsetY||0!==this.blur)},t}();e.Shadow=o},function(t,e,i){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.NORMAL=0]="NORMAL",t[t.NUMBER=1]="NUMBER",t[t.LENGTH=2]="LENGTH",t[t.PERCENT=3]="PERCENT"}(r=e.LineHeightType||(e.LineHeightType={}));var n=/^([0-9]*\.?[0-9]*)$/,o=/^([0-9]*\.?[0-9]*)px$/i,s=/^([0-9]*\.?[0-9]*)%$/,a=function(){function t(t,e){this.type=r.NORMAL,this.value=0,this.type=t,this.value=e}return t.of=function(e,i){return void 0===i&&(i=!1),"normal"===(e=e.toLowerCase())?new t(r.NORMAL,0):n.test(e)?new t(r.NUMBER,parseFloat(e)):o.test(e)?new t(r.LENGTH,parseFloat(e)):s.test(e)?new t(r.PERCENT,parseFloat(e)):void(i||console.warn("invalid line height:"+e))},t.prototype.getValue=function(t){switch(this.type){case r.NORMAL:return 1.2*t;case r.NUMBER:return t*this.value;case r.LENGTH:return this.value;case r.PERCENT:return this.value*t/100}},t.prototype.toString=function(){switch(this.type){case r.NORMAL:return"normal";case r.NUMBER:return this.value;case r.LENGTH:return this.value+"px";case r.PERCENT:return this.value+"%"}},t.prototype.clone=function(){return new t(this.type,this.value)},t}();e.LineHeight=a},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(2),s=i(11),a=i(3),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.children=[],e}return n(e,t),e.prototype.findById=function(t){if(this.id===t)return this;for(var i=0,r=this.children;i<r.length;i++){var n=r[i];if(n.id===t)return n;if(n instanceof e){var o=n.findById(t);if(o)return o}}},e.prototype.drawContent=function(t){for(var e=0,i=this.children.slice();e<i.length;e++){var r=i[e];r.isVisible()&&(t.save(),r.updateContext(t),r.draw(t),t.restore())}},e.prototype.addChild=function(t){var e=t.parent;if(e===this){if(this.children.length>0&&this.children[this.children.length-1]===t)return this;var i=this.children.indexOf(t);return this.children.splice(i,1),this.children.push(t),t.dispatchEvent(new a.TouchEvent(t,"moved",!1)),this}return e&&e.removeChild(t),t.parent=this,this.children.push(t),t.dispatchEvent(new a.TouchEvent(t,"added",!1)),this},e.prototype.addChildren=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0,r=t;i<r.length;i++){var n=r[i];this.addChild(n)}return this},e.prototype.addChildAt=function(t,e){var i=t.parent;if(i===this){if(this.children[e]===t)return this;var r=this.children.indexOf(t);return r>e?(this.children.splice(r,1),this.children.splice(e,0,t)):(this.children.splice(e,0,t),this.children.splice(r,1)),t.dispatchEvent(new a.TouchEvent(t,"moved",!1)),this}return i&&i.removeChild(t),t.parent=this,this.children.splice(e,0,t),t.dispatchEvent(new a.TouchEvent(t,"added",!1)),this},e.prototype.removeChild=function(t){var e=this.children.indexOf(t);return e<0?void 0:(this.children.splice(e,1),t.parent=void 0,t.dispatchEvent(new a.TouchEvent(t,"removed",!1)),t)},e.prototype.removeChildAt=function(t){if(t<0||t>=this.children.length)return null;var e=this.children[t];return this.children.splice(t,1),e.dispatchEvent(new a.TouchEvent(e,"removed",!1)),e},e.prototype.removeAllChildren=function(){for(;this.children.length>0;)this.removeChildAt(0);return this},e.prototype.getChildAt=function(t){return this.children[t]},e.prototype.sortChildren=function(t){return this.children.sort(t),this},e.prototype.getChildIndex=function(t){return this.children.indexOf(t)},e.prototype.swapChildrenAt=function(t,e){if(t<0||t>=this.children.length)throw new Error("invalid index:"+t);if(e<0||e>=this.children.length)throw new Error("invalid index:"+e);if(t===e)return this;var i=this.children[t],r=this.children[e];return this.children[t]=r,this.children[e]=i,i.dispatchEvent(new a.TouchEvent(i,"moved",!1)),r.dispatchEvent(new a.TouchEvent(r,"moved",!1)),this},e.prototype.swapChildren=function(t,e){return this.swapChildrenAt(this.getChildIndex(t),this.getChildIndex(e))},e.prototype.layout=function(){this.calculateSize(),this.layoutChildren()},e.prototype.layoutChildren=function(){this.calculateSize();for(var t=[],e=[],i=this.getContentRect(),r=i.width,n=0,a=this.children;n<a.length;n++){(d=a[n]).isVisible()&&(d.layout(),d.style.position===o.Position.ABSOLUTE||d.style.position===o.Position.FIXED?t.push(d):(e.push(d),r=Math.max(r,d.getOuterWidth())))}for(var h=[],u=[],c=0,l=0,p=e;l<p.length;l++){var d=p[l];(u.length>0&&d.style.display===o.Display.BLOCK||c+d.getOuterWidth()>r)&&(h.push(u),u=[],c=0),u.push(d),c+=d.getOuterWidth()}u.length>0&&h.push(u);for(var f=this.getLineHeight(),g=0,E=0,v=h;E<v.length;E++){var y=v[E],R=0;c=0;for(var m=0,A=y;m<A.length;m++){(d=A[m]).rect.y=g+i.y+(d.style.marginTop?d.style.marginTop.getValue(this.rect.height):0),R=Math.max(R,d.getOuterHeight()),c+=d.getOuterWidth()}g+=Math.max(f,R);var T=i.x;switch(this.style.textAlign){case o.TextAlign.RIGHT:T=i.x+r-c;break;case o.TextAlign.CENTER:T=i.x+(r-c)/2;break;default:T=i.x}for(var b=0,O=y;b<O.length;b++){(d=O[b]).rect.x=T+(d.style.marginLeft?d.style.marginLeft.getValue(this.rect.width):0),T+=d.getOuterWidth()}}r>i.width&&(this.rect.width+=r-i.width),g>i.height&&(this.rect.height+=g-i.height);for(var L=0,w=t;L<w.length;L++){d=w[L];s.LayoutUtils.updatePositionForAbsoluteElement(d,this.rect.width,this.rect.height)}},e.prototype.getObjectUnderPoint=function(t,i,r){for(var n=this.children,o=n.length-1;o>=0;o--){var s=n[o];if(s.isVisible()&&(!r||s.isPointerEventsEnabled())){var a=this.localToLocal(t,i,s);if(s instanceof e){var h=s.getObjectUnderPoint(a.x,a.y,r);if(h)return h}else if(s.hitTest(a.x,a.y))return s}}if(this.hitTest(t,i))return this},e.prototype.toString=function(){return"[Container (id="+this.id+")]"},e}(a.XObject);e.Container=h},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(7),s=i(6),a=i(19),h=i(3),u=function(t){function e(e){var i=t.call(this,e,1e3*e.spriteSheet.frames.length/e.spriteSheet.fps)||this;return i.sprite=e,i}return n(e,t),e.prototype.onUpdate=function(t){if(!this.sprite.spriteSheet||0===this.sprite.spriteSheet.frames.length)return!1;var e=Math.min(this.sprite.spriteSheet.frames.length-1,Math.floor(this.sprite.spriteSheet.frames.length*t));return e!==this.sprite.currentFrame&&(this.sprite.currentFrame=e,!0)},e}(o.AnimationStep),c=function(t){function e(e){var i=t.call(this,e)||this;return i.currentFrame=0,i}return n(e,t),e.prototype.setSpriteSheet=function(t){return this.spriteSheet=t,this.spriteSheet&&this.spriteSheet.url&&s.ResourceRegistry.DefaultInstance.add(this.spriteSheet.url,s.ResourceType.IMAGE),this},e.prototype.getStage=function(){for(var t=this;t;){if(t instanceof a.Stage)return t;t=t.parent}},e.prototype.play=function(t){var e=this;void 0===t&&(t=-1),this.animation&&(this.animation.cancel(),this.animation=void 0);var i=this.getStage();return i&&(this.animation=i.animate(this).addStep(new u(this)).times(t),this.animation.addEventListener("complete",(function(){return e.dispatchEvent(new h.TouchEvent(e,"stop"))})),this.dispatchEvent(new h.TouchEvent(this,"play"))),this},e.prototype.pause=function(){return this.animation&&this.animation.pause()&&this.dispatchEvent(new h.TouchEvent(this,"pause")),this},e.prototype.resume=function(){return this.animation&&this.animation.resume()&&this.dispatchEvent(new h.TouchEvent(this,"resume")),this},e.prototype.stop=function(){return this.animation&&(this.animation.cancel(),this.animation=void 0),this},e.prototype.times=function(t){return this.play(t)},e.prototype.setCurrentFrame=function(t){return this.currentFrame=t,this},e.prototype.toNextFrame=function(){return this.currentFrame=(this.currentFrame+1)%this.spriteSheet.frames.length,this},e.prototype.toPreviousFrame=function(){return this.currentFrame=(this.currentFrame-1+this.spriteSheet.frames.length)%this.spriteSheet.frames.length,this},e.prototype.drawContent=function(t){if(this.spriteSheet&&0!==this.spriteSheet.frames.length){var e,i=this.spriteSheet.frames[this.currentFrame],r=this.getContentRect();if(e=i.image?i.image:this.spriteSheet.image||this.spriteSheet.url&&s.ResourceRegistry.DefaultInstance.get(this.spriteSheet.url)){var n=r.width/this.spriteSheet.width,o=r.height/this.spriteSheet.height,a=void 0!==i.destX?i.destX:0,h=void 0!==i.destY?i.destY:0,u=void 0!==i.destWidth?i.destWidth:this.spriteSheet.width-a,c=void 0!==i.destHeight?i.destHeight:this.spriteSheet.height-h,l=void 0!==i.srcX?i.srcX:0,p=void 0!==i.srcY?i.srcY:0,d=void 0!==i.srcWidth?i.srcWidth:u,f=void 0!==i.srcHeight?i.srcHeight:c;try{t.drawImage(e,l,p,d,f,a*n,h*o,u*n,c*o)}catch(t){console.warn(this.currentFrame,t)}}}},e}(h.XObject);e.Sprite=c},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s,a=i(20),h=i(6),u=i(4),c=i(23),l=i(11),p=i(17),d=i(3);!function(t){t.NEVER="never",t.ALWAYS="always"}(o=e.StageLayoutPolicy||(e.StageLayoutPolicy={})),function(t){t.NEVER="never",t.IN_ANIMATION="in_animation",t.ALWAYS="always"}(s=e.StageUpdatePolicy||(e.StageUpdatePolicy={}));var f=function(){function t(){this.touchItems=[]}return t.prototype.contains=function(t){for(var e=0,i=this.touchItems;e<i.length;e++){if(i[e].identifier===t)return!0}return!1},t.prototype.get=function(t){for(var e=0,i=this.touchItems;e<i.length;e++){var r=i[e];if(r.identifier===t)return r}},t.prototype.add=function(t){this.touchItems.push(t)},t.prototype.remove=function(t){for(var e=0;e<this.touchItems.length;++e)if(this.touchItems[e].identifier===t)return void this.touchItems.splice(e,1)},t.prototype.getTouches=function(t){for(var e=[],i=0,r=this.touchItems;i<r.length;i++){var n=r[i];(n.srcElement===t||n.srcElement.isChildOf(t))&&e.push(n)}return e},t}(),g=function(t){function e(e,i){void 0===i&&(i={});var r=t.call(this)||this;for(var n in r.option={fps:60,layoutPolicy:o.ALWAYS,updatePolicy:s.IN_ANIMATION,autoClear:!0},r.touchedChildren=new f,r.hoverChildren=new f,r.started=!1,r.needUpdate=!1,i)r.option[n]=i[n];return r.canvas=e,r.css({width:"100%",height:"100%",left:0,top:0}),i.style&&r.css(i.style),r.enableEvents(),r.ticker=new c.Ticker(r.option.fps),r.animationFactory=new a.AnimationFactory,r.resourceRegistry=new h.ResourceRegistry,r}return n(e,t),e.prototype.updateOnce=function(){this.needUpdate=!0},e.prototype.start=function(){var t=this;this.started||(this.started=!0,this.layout(),this.needUpdate=!0,this.ticker.addEventListener("tick",(function(e){t.animationFactory.onInterval()&&(t.needUpdate=!0),(t.needUpdate||t.option.updatePolicy===s.ALWAYS)&&(t.update(),t.needUpdate=!1)})))},e.prototype.enableEvents=function(){u.Runtime.get().enableEvents(this)},e.prototype.getPressedTouchItems=function(t){t||(t=this);for(var e=[],i=0,r=this.touchedChildren.getTouches(t);i<r.length;i++){var n=r[i],o=n.clone(),s=this.localToLocal(n.stageX,n.stageY,t);o.x=s.x,o.y=s.y,e.push(o)}return e},e.prototype.handleMouseOrTouchEvent=function(t,e,i){if(this.isVisible())switch(t){case"mousedown":case"touchstart":this.handleTouchStartEvent(e,i);break;case"mouseup":this.onTouchMove(e,i),this.handleTouchEndEvent([],i);break;case"touchend":this.handleTouchEndEvent(e,i);break;case"mousemove":case"touchmove":case"mouseleave":this.onTouchMove(e,i)}},e.prototype.update=function(){if(this.canvas&&this.isVisible()){var t=this.canvas.getContext("2d");t&&(this.option.layoutPolicy===o.ALWAYS&&this.layout(),this.option.autoClear&&t.clearRect(0,0,this.getWidth(),this.getHeight()),t.save(),this.updateContext(t),this.draw(t,!1),t.restore())}},e.prototype.calculateSize=function(){if(this.canvas&&this.isVisible()){var t=this.canvas.width,e=this.canvas.height;l.LayoutUtils.updateSize(this,t,e),l.LayoutUtils.updatePositionForAbsoluteElement(this,t,e)}},e.prototype.animate=function(t,e){return void 0===e&&(e=!0),this.animationFactory.create(t,e)},e.prototype.stopAnimation=function(t){this.animationFactory.removeByTarget(t)},e.prototype.toString=function(){return"[Stage (id="+this.id+")]"},e.prototype.dispatchTouchEvent=function(t,e,i,r,n,o){var s=new d.TouchEvent(t,e,r,i,n);s.stage=this,s.nativeEvent=o,t.dispatchEvent(s)},e.prototype.onTouchMove=function(t,e){for(var i=[],r=0,n=t;r<n.length;r++){var o=n[r],s=this.touchedChildren.get(o.identifier);s?s.stageX===o.stageX&&s.stageY===o.stageY||(s.stageX=o.stageX,s.stageY=o.stageY,i.push(s)):i.push(o)}for(var a=0,h=i;a<h.length;a++){o=h[a];var u=this.globalToLocal(o.stageX,o.stageY),c=this.getObjectUnderPoint(u.x,u.y,!0);c&&this.dispatchTouchEvent(c,"move",o,!0,!0,e);var l=this.touchedChildren.get(o.identifier);l&&this.dispatchTouchEvent(l.srcElement,"pressmove",o,!0,!0,e);var p=this.hoverChildren.get(o.identifier);if(p&&c){if(p.srcElement!==c){var d=c,f=p.srcElement;for(p.srcElement=c,p.stageX=o.stageX,p.stageY=o.stageY;f&&!d.isChildOf(f)&&d!==f;)this.dispatchTouchEvent(f,"leave",p,!1,!0,e),f=f.parent;for(;d&&d!==f;)this.dispatchTouchEvent(d,"enter",p,!1,!0,e),d=d.parent}}else if(c){var g=o.clone();g.srcElement=c,this.hoverChildren.add(g),this.dispatchTouchEvent(c,"enter",g,!0,!1,e)}else p&&(this.hoverChildren.remove(o.identifier),this.dispatchTouchEvent(p.srcElement,"leave",p,!0,!1,e))}},e.prototype.handleTouchStartEvent=function(t,e){for(var i=new f,r=0,n=t;r<n.length;r++){var o=n[r];if(!this.touchedChildren.contains(o.identifier)){var s=this.getObjectUnderPoint(o.stageX,o.stageY,!0);s&&(o.srcElement=s,i.add(o),this.touchedChildren.add(o))}}for(var a=0,h=i.touchItems;a<h.length;a++){var u=h[a];this.dispatchTouchEvent(u.srcElement,"touchdown",u,!0,!0,e)}this.onTouchMove(t,e)},e.prototype.handleTouchEndEvent=function(t,e){this.onTouchMove(t,e);for(var i=new f,r=0,n=this.touchedChildren.touchItems;r<n.length;r++){for(var o=n[r],s=!1,a=0,h=t;a<h.length;a++){if(h[a].identifier===o.identifier){s=!0;break}}s||i.add(o)}for(var u=0,c=i.touchItems;u<c.length;u++){o=c[u];this.touchedChildren.remove(o.identifier),this.hoverChildren.remove(o.identifier)}for(var l=0,p=i.touchItems;l<p.length;l++){o=p[l];var d=this.getObjectUnderPoint(o.stageX,o.stageY,!0);d&&this.dispatchTouchEvent(d,"touchup",o,!0,!0,e),this.dispatchTouchEvent(o.srcElement,"pressup",o,!0,!0,e),(d===o.srcElement||o.srcElement.isChildOf(d))&&this.dispatchTouchEvent(d,"click",o,!0,!0,e)}},e}(p.Container);e.Stage=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(7),n=function(){function t(){this.animations=[]}return t.prototype.create=function(t,e){e&&this.removeByTarget(t);var i=new r.Animation(t);return this.animations.push(i),i},t.prototype.removeByTarget=function(t){for(var e=0,i=this.animations;e<i.length;e++){var n=i[e];n.target===t&&n.state===r.AnimationState.RUNNING&&n.cancel()}},t.prototype.onInterval=function(){var t=this.animations.length;if(0===t)return!1;for(var e=!1,i=0;i<t;++i)this.animations[i].onInterval()&&(e=!0);for(i=this.animations.length-1;i>=0;--i){var n=this.animations[i];n.state!==r.AnimationState.COMPLETED&&n.state!==r.AnimationState.CANCELLED||this.animations.splice(i,1)}return e},t}();e.AnimationFactory=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(22),n=function(){this.duration=0,this.numPlays=0,this.frames=[]};e.ApngData=n;var o=function(){this.left=0,this.top=0,this.width=0,this.height=0,this.delay=0,this.disposeOp=0,this.blendOp=0,this.dataParts=[]};e.ApngFrame=o;var s=new Uint8Array([137,80,78,71,13,10,26,10]);function a(t){return t.charCodeAt(0)<<24|t.charCodeAt(1)<<16|t.charCodeAt(2)<<8|t.charCodeAt(3)}function h(t){return[t>>>24&255,t>>>16&255,t>>>8&255,255&t]}var u=a("IHDR"),c=a("acTL"),l=a("IDAT"),p=a("fcTL"),d=a("fdAT"),f=a("IEND"),g=function(){function t(){}return t.parse=function(t,e){void 0===e&&(e=!1);for(var i=new Uint8Array(t),r=0;r<s.length;++r)if(s[r]!==i[r])return void(e||console.warn("not a png file"));for(var a=this.toChunks(i),g=[],E=[],v=null,y=null,R=new n,m=new DataView(i.buffer),A=0,T=a;A<T.length;A++){var b=T[A];switch(b.type){case u:v=i.subarray(b.start+8,b.end-4),R.width=m.getUint32(b.start+8),R.height=m.getUint32(b.start+8+4);break;case c:R.numPlays=m.getUint32(b.start+8);break;case p:y=new o,R.frames.push(y),y.width=m.getUint32(b.start+8+4),y.height=m.getUint32(b.start+8+8),y.left=m.getUint32(b.start+8+12),y.top=m.getUint32(b.start+8+16);var O=m.getUint16(b.start+8+20),L=m.getUint16(b.start+8+22);0===L&&(L=100),y.delay=1e3*O/L,y.delay<=10&&(y.delay=100),R.duration+=y.delay,y.disposeOp=m.getUint8(b.start+8+24),y.blendOp=m.getUint8(b.start+8+25),y.dataParts=[],1===R.frames.length&&2===y.disposeOp&&(y.disposeOp=1);break;case d:y?y.dataParts.push(this.makeChunk(l,i.subarray(b.start+12,b.end-4))):e||console.warn("invalid fdAT chunk before frame");break;case l:y?y.dataParts.push(this.makeChunk(l,i.subarray(b.start+8,b.end-4))):e||console.warn("invalid IDAT chunk before frame");break;case f:E.push(i.subarray(b.start,b.end));break;default:g.push(i.subarray(b.start,b.end))}}if(0!==R.frames.length){for(var w=new Blob(g),S=new Blob(E),B=function(t){var e=[];e.push(s),v.set(h(t.width),0),v.set(h(t.height),4),e.push(I.makeChunk(u,v)),e.push(w);for(var i=0,r=t.dataParts;i<r.length;i++){var n=r[i];e.push(n)}e.push(S),delete t.dataParts;var o=URL.createObjectURL(new Blob(e,{type:"image/png"}));e=null;var a=new Image;t.image=a,a.onload=function(){URL.revokeObjectURL(a.src)},a.src=o},I=this,N=0,D=R.frames;N<D.length;N++){B(D[N])}return R}e||console.warn("not a png file")},t.toChunks=function(t){for(var e=[],i=new DataView(t.buffer),r=8;r<=t.length-12;){var n=i.getUint32(r);if(n<0||r+12+n>t.length)return void console.warn("invalid chunk length, position="+r+" length="+n+" total="+t.length);var o=i.getUint32(r+4);if(e.push({type:o,start:r,end:r+n+12}),r+=12+n,o===f)break}return e},t.makeChunk=function(t,e){var i=new Uint8Array(e.length+12),n=new DataView(i.buffer);n.setUint32(0,e.length),n.setUint32(4,t),i.set(e,8);var o=r.CRC32.calculate(i,4,e.length+4);return n.setUint32(e.length+8,o),i},t}();e.ApngParser=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.init=function(){for(var t=0;t<256;t++){for(var e=t,i=0;i<8;i++)e=0!=(1&e)?3988292384^e>>>1:e>>>1;this.TABLE[t]=e}},t.calculate=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=t.length-e);for(var r=-1,n=e,o=e+i;n<o;n++)r=r>>>8^this.TABLE[255&(r^t[n])];return-1^r},t.TABLE=new Uint32Array(256),t}();e.CRC32=r,r.init()},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(1),s=i(4),a=function(t){function e(e){void 0===e&&(e=60);var i=t.call(this)||this;return i.duration=1e3/60,i.stopped=!0,e<=0&&(console.warn("invalid fps:"+e+", reset to 60"),e=60),i.setFps(e),i.lastTickTime=0,i.start(),i}return n(e,t),e.prototype.start=function(){this.stopped&&(this.stopped=!1,s.Runtime.get().requestAnimationFrame(this.onAnimationFrame.bind(this)))},e.prototype.setFps=function(t){this.duration=1e3/t},e.prototype.stop=function(){this.stopped=!0},e.prototype.onAnimationFrame=function(t){this.stopped||(t-this.lastTickTime>=this.duration&&(this.lastTickTime=t,this.dispatchEvent(new o.Event("tick"))),s.Runtime.get().requestAnimationFrame(this.onAnimationFrame.bind(this)))},e}(o.EventDispatcher);e.Ticker=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,n,o,s=i(4),a=i(10),h=i(16);!function(t){t.NORMAL="normal",t.ITALIC="italic",t.OBLIQUE="oblique"}(r=e.FontStyle||(e.FontStyle={})),function(t){t.NORMAL="normal",t.SMALL_CAPS="small-caps"}(n=e.FontVariant||(e.FontVariant={})),function(t){t.NORMAL="normal",t.BOLD="bold",t.BOLDER="bolder",t.W100="100",t.W200="200",t.W300="300",t.W400="400",t.W500="500",t.W600="600",t.W700="700",t.W800="800",t.W900="900"}(o=e.FontWeight||(e.FontWeight={}));var u=/(^|^.*\s+)([0-9]+[a-z]+[^\s]+)($|\s+(.*)$)/,c=function(){function t(t,e,i,s,a,h){this.style=t||r.NORMAL,this.variant=e||n.NORMAL,this.weight=i||o.NORMAL,this.size=s||16,this.lineHeight=a,this.family=h}return t.of=function(e,i){void 0===i&&(i=!1);var s=e.match(u);if(s){for(var c=new t,l=0,p=s[1].split(/\s+/);l<p.length;l++){var d=p[l];if("normal"!==(d=d.toLowerCase())){var f=a.EnumUtils.fromString(r,d,r.NORMAL);if(f===r.NORMAL){var g=a.EnumUtils.fromString(o,d,o.NORMAL);if(g===o.NORMAL){var E=a.EnumUtils.fromString(n,d,n.NORMAL);E===n.NORMAL||(c.variant=E)}else c.weight=g}else c.style=f}}var v=s[2].split(/\//);if(c.size=parseFloat(v[0]),isNaN(c.size))i||console.warn("invalid font:"+e);else{if(!(v.length>1)||(c.lineHeight=h.LineHeight.of(v[1],i),c.lineHeight))return c.family=s[3].trim(),c;i||console.warn("invalid font:"+e)}}else i||console.warn("invalid font:"+e)},t.prototype.toString=function(){return[this.style||r.NORMAL,this.variant||n.NORMAL,this.weight||o.NORMAL,this.lineHeight?this.size+"px/"+this.lineHeight.toString():this.size+"px",this.family||t.DEFAULT_FONT_FAMILY].join(" ")},t.prototype.measureTextWidth=function(t){return s.Runtime.get().measureTextWidth(t,this)},t.prototype.clone=function(){return new t(this.style,this.variant,this.weight,this.size,this.lineHeight,this.family)},t.DEFAULT_FONT_FAMILY="sans-serif",t}();e.Font=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(26),n=Math.PI/180,o=function(){function t(t,e,i,r,n,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=0),void 0===o&&(o=0),this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.setValues(t,e,i,r,n,o)}return t.prototype.setValues=function(t,e,i,r,n,o){return void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=0),void 0===o&&(o=0),this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=o,this},t.prototype.append=function(t,e,i,r,n,o){var s=this.a,a=this.b,h=this.c,u=this.d;return 1===t&&0===e&&0===i&&1===r||(this.a=s*t+h*e,this.b=a*t+u*e,this.c=s*i+h*r,this.d=a*i+u*r),this.tx=s*n+h*o+this.tx,this.ty=a*n+u*o+this.ty,this},t.prototype.prepend=function(t,e,i,r,n,o){var s=this.a,a=this.c,h=this.tx;return this.a=t*s+i*this.b,this.b=e*s+r*this.b,this.c=t*a+i*this.d,this.d=e*a+r*this.d,this.tx=t*h+i*this.ty+n,this.ty=e*h+r*this.ty+o,this},t.prototype.appendMatrix=function(t){return this.append(t.a,t.b,t.c,t.d,t.tx,t.ty)},t.prototype.prependMatrix=function(t){return this.prepend(t.a,t.b,t.c,t.d,t.tx,t.ty)},t.prototype.appendTransform=function(t,e,i,r,o,s,a,h,u){var c,l;if(o%360){var p=o*n;c=Math.cos(p),l=Math.sin(p)}else c=1,l=0;return s||a?(s*=n,a*=n,this.append(Math.cos(a),Math.sin(a),-Math.sin(s),Math.cos(s),t,e),this.append(c*i,l*i,-l*r,c*r,0,0)):this.append(c*i,l*i,-l*r,c*r,t,e),(h||u)&&(this.tx-=h*this.a+u*this.c,this.ty-=h*this.b+u*this.d),this},t.prototype.prependTransform=function(t,e,i,r,o,s,a,h,u){var c,l;if(o%360){var p=o*n;c=Math.cos(p),l=Math.sin(p)}else c=1,l=0;return(h||u)&&(this.tx-=h,this.ty-=u),s||a?(s*=n,a*=n,this.prepend(c*i,l*i,-l*r,c*r,0,0),this.prepend(Math.cos(a),Math.sin(a),-Math.sin(s),Math.cos(s),t,e)):this.prepend(c*i,l*i,-l*r,c*r,t,e),this},t.prototype.rotate=function(t){t*=n;var e=Math.cos(t),i=Math.sin(t),r=this.a,o=this.b;return this.a=r*e+this.c*i,this.b=o*e+this.d*i,this.c=-r*i+this.c*e,this.d=-o*i+this.d*e,this},t.prototype.skew=function(t,e){return t*=n,e*=n,this.append(Math.cos(e),Math.sin(e),-Math.sin(t),Math.cos(t),0,0),this},t.prototype.scale=function(t,e){return this.a*=t,this.b*=t,this.c*=e,this.d*=e,this},t.prototype.translate=function(t,e){return this.tx+=this.a*t+this.c*e,this.ty+=this.b*t+this.d*e,this},t.prototype.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},t.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,r=this.d,n=this.tx,o=t*r-e*i;return this.a=r/o,this.b=-e/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-r*n)/o,this.ty=-(t*this.ty-e*n)/o,this},t.prototype.isIdentity=function(){return 0===this.tx&&0===this.ty&&1===this.a&&0===this.b&&0===this.c&&1===this.d},t.prototype.equals=function(t){return this.tx===t.tx&&this.ty===t.ty&&this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d},t.prototype.transformPoint=function(t,e){var i=new r.Point(0,0);return i.x=t*this.a+e*this.c+this.tx,i.y=t*this.b+e*this.d+this.ty,i},t.prototype.copy=function(t){return this.setValues(t.a,t.b,t.c,t.d,t.tx,t.ty)},t.prototype.clone=function(){return new t(this.a,this.b,this.c,this.d,this.tx,this.ty)},t.prototype.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},t}();e.Matrix2D=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.equals=function(t){return this.x===t.x&&this.y==this.y},t.prototype.clone=function(){return new t(this.x,this.y)},t}();e.Point=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(28),n=i(2),o=function(){function t(){}return t.drawElement=function(t,e){var i=t.style;i.compositeOperation&&(e.globalCompositeOperation=i.compositeOperation);var o,s=i.borderTop?i.borderTop.width:0,a=i.borderRight?i.borderRight.width:0,h=i.borderBottom?i.borderBottom.width:0,u=i.borderLeft?i.borderLeft.width:0,c=(new r.RoundRect).applySize(t.rect.width,t.rect.height).applyRadius(i.borderRadiusTop,i.borderRadiusRight,i.borderRadiusBottom,i.borderRadiusLeft);if(o=s>0||a>0||h>0||u>0?c.applyBorder(s,a,h,u):c,i.shadow&&i.shadow.isEnable()){e.save(),e.shadowBlur=i.shadow.blur,e.shadowColor=i.shadow.color.toString(),e.shadowOffsetX=i.shadow.offsetX,e.shadowOffsetY=i.shadow.offsetY;var l=Math.abs(i.shadow.offsetX)+i.shadow.blur,p=Math.abs(i.shadow.offsetY)+i.shadow.blur,d=new r.RoundRect(c.x1-l,c.y1-p,c.x2+l,c.y2+p);e.beginPath(),d.makePath(e,!0,!0),c.makePath(e,!1,!1),e.closePath(),e.clip(),e.fillStyle="black",e.beginPath(),c.makePath(e,!0,!0),e.closePath(),e.fill(),e.restore()}if(e.save(),t.drawBackground(e,c,o),e.restore(),s>0||a>0||h>0||u>0){var f=i.borderTop?i.borderTop.color:void 0,g=i.borderRight?i.borderRight.color:void 0,E=i.borderBottom?i.borderBottom.color:void 0,v=i.borderLeft?i.borderLeft.color:void 0,y=[];f&&y.push(f),g&&y.push(g),E&&y.push(E),v&&y.push(v);for(var R=y[0],m=!0,A=1;A<y.length;++A)R.equals(y[A])||(m=!1);m?(e.beginPath(),c.makePath(e,!0,!0),o.makePath(e,!1,!1),e.closePath(),e.fillStyle=R.toString(),e.fill()):(v&&(e.save(),e.beginPath(),e.moveTo(c.x1,c.y1),f||e.lineTo(o.x1+o.leftTopRadiusX,c.y1),e.lineTo(o.x1+o.leftTopRadiusX,o.y1+o.leftTopRadiusY),e.lineTo(o.x1+o.leftBottomRadiusX,o.y2-o.leftBottomRadiusY),E||e.lineTo(o.x1+o.leftBottomRadiusX,c.y2),e.lineTo(c.x1,c.y2),e.closePath(),e.clip(),e.beginPath(),c.makePath(e,!0,!0),o.makePath(e,!1,!1),e.closePath(),e.fillStyle=v.toString(),e.fill(),e.restore()),f&&(e.save(),e.beginPath(),e.moveTo(c.x2,c.y1),g||e.lineTo(c.x2,c.y1+c.rightTopRadiusY),e.lineTo(o.x2-o.rightTopRadiusX,o.y1+o.rightTopRadiusY),e.lineTo(o.x1+o.leftTopRadiusX,o.y1+o.leftTopRadiusY),v||e.lineTo(c.x1,c.y1+c.leftTopRadiusY),e.lineTo(c.x1,c.y1),e.closePath(),e.clip(),e.beginPath(),c.makePath(e,!0,!0),o.makePath(e,!1,!1),e.closePath(),e.fillStyle=f.toString(),e.fill(),e.restore()),g&&(e.save(),e.beginPath(),e.moveTo(c.x2,c.y2),E||e.lineTo(c.x2-c.rightBottomRadiusX,c.y2),e.lineTo(o.x2-o.rightBottomRadiusX,o.y2-o.rightBottomRadiusY),e.lineTo(o.x2-o.rightTopRadiusX,o.y1+o.rightTopRadiusY),f||e.lineTo(o.x2-o.rightTopRadiusX,c.y1),e.lineTo(c.x2,c.y1),e.closePath(),e.clip(),e.beginPath(),c.makePath(e,!0,!0),o.makePath(e,!1,!1),e.closePath(),e.fillStyle=g.toString(),e.fill(),e.restore()),E&&(e.save(),e.beginPath(),e.moveTo(c.x1,c.y2),v||e.lineTo(c.x1,c.y2-c.leftBottomRadiusY),e.lineTo(o.x1+o.leftBottomRadiusX,o.y2-o.leftBottomRadiusY),e.lineTo(o.x2-o.rightBottomRadiusX,o.y2-o.rightBottomRadiusY),g||e.lineTo(c.x2,c.y2-c.rightBottomRadiusY),e.lineTo(c.x2,c.y2),e.closePath(),e.clip(),e.beginPath(),c.makePath(e,!0,!0),o.makePath(e,!1,!1),e.closePath(),e.fillStyle=E.toString(),e.fill(),e.restore()))}t.style.overflow===n.Overflow.HIDDEN?(e.save(),o.clip(e),t.drawContent(e),e.restore()):t.drawContent(e)},t}();e.DrawUtils=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(8),n=function(){function t(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.leftTopRadiusX=0,this.leftTopRadiusY=0,this.rightTopRadiusX=0,this.rightTopRadiusY=0,this.rightBottomRadiusX=0,this.rightBottomRadiusY=0,this.leftBottomRadiusX=0,this.leftBottomRadiusY=0,this.x1=t,this.y1=e,this.x2=i,this.y2=r}return t.prototype.toRect=function(){return new r.Rect(this.x1,this.y1,this.x2-this.x1+1,this.y2-this.y1+1)},t.prototype.applySize=function(t,e){return this.x2=this.x1+t-1,this.y2=this.y1+e-1,this},t.prototype.applyRadius=function(t,e,i,r){var n=this.x2-this.x1+1,o=this.y2-this.y1+1;return t&&(this.leftTopRadiusX=t.getValue(n),this.leftTopRadiusY=t.getValue(o)),e&&(this.rightTopRadiusX=e.getValue(n),this.rightTopRadiusY=e.getValue(o)),i&&(this.rightBottomRadiusX=i.getValue(n),this.rightBottomRadiusY=i.getValue(o)),r&&(this.leftBottomRadiusX=r.getValue(n),this.leftBottomRadiusY=r.getValue(o)),this},t.prototype.applyBorder=function(e,i,r,n){if(0===e&&0===i&&0===r&&0===n)return this;var o=new t;return o.x1=this.x1+n,o.y1=this.y1+e,o.x2=this.x2-i,o.y2=this.y2-r,o.leftTopRadiusX=Math.max(0,this.leftTopRadiusX-n),o.leftTopRadiusY=Math.max(0,this.leftTopRadiusY-e),0!==o.leftTopRadiusX&&0!==o.leftTopRadiusY||(o.leftTopRadiusX=o.leftTopRadiusY=0),o.rightTopRadiusX=Math.max(0,this.rightTopRadiusX-i),o.rightTopRadiusY=Math.max(0,this.rightTopRadiusY-e),0!==o.rightTopRadiusX&&0!==o.rightTopRadiusY||(o.rightTopRadiusX=o.rightTopRadiusY=0),o.rightBottomRadiusX=Math.max(0,this.rightBottomRadiusX-i),o.rightBottomRadiusY=Math.max(0,this.rightBottomRadiusY-r),0!==o.rightBottomRadiusX&&0!==o.rightBottomRadiusY||(o.rightBottomRadiusX=o.rightBottomRadiusY=0),o.leftBottomRadiusX=Math.max(0,this.leftBottomRadiusX-n),o.leftBottomRadiusY=Math.max(0,this.leftBottomRadiusY-r),0!==o.leftBottomRadiusX&&0!==o.leftBottomRadiusY||(o.leftBottomRadiusX=o.leftBottomRadiusY=0),o},t.prototype.makePath=function(t,e,i){var r=this.x1,n=this.y1,o=this.x2+1,s=this.y2+1;i?(e?t.moveTo(r,n+this.leftTopRadiusY):t.lineTo(r,n+this.leftTopRadiusY),this.arcTo(r,n+this.leftTopRadiusY,r,n,r+this.leftTopRadiusX,n,t),this.arcTo(o-this.rightTopRadiusX,n,o,n,o,n+this.rightTopRadiusY,t),this.arcTo(o,s-this.rightBottomRadiusY,o,s,o-this.rightBottomRadiusX,s,t),this.arcTo(r+this.leftBottomRadiusX,s,r,s,r,s-this.leftBottomRadiusY,t),0!==this.leftTopRadiusX&&0!==this.leftTopRadiusY?t.lineTo(r,n+this.leftTopRadiusY):t.lineTo(r,n)):(e?t.moveTo(r,n+this.leftTopRadiusY):t.lineTo(r,n+this.leftTopRadiusY),this.arcTo(r,s-this.leftBottomRadiusY,r,s,r+this.leftBottomRadiusX,s,t),this.arcTo(o-this.rightBottomRadiusX,s,o,s,o,s-this.rightBottomRadiusY,t),this.arcTo(o,n+this.rightTopRadiusY,o,n,o-this.rightTopRadiusX,n,t),this.arcTo(r+this.leftTopRadiusX,n,r,n,r,n+this.leftTopRadiusY,t))},t.prototype.clip=function(t){return t.beginPath(),this.makePath(t,!0,!0),t.closePath(),t.clip(),this},t.prototype.arcTo=function(t,e,i,r,n,o,s){s.lineTo(t,e);var a=Math.abs(t-n),h=Math.abs(e-o);a<1e-6&&h<1e-6||(a<1e-6||h<1e-6?s.lineTo(n,o):Math.abs(a-h)<1e-6?s.arcTo(i,r,n,o,a):s.quadraticCurveTo(i,r,n,o))},t}();e.RoundRect=n},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(2),s=function(t){function e(e){var i=t.call(this,e)||this;return i.text="",i.text=e&&e.text||"",i}return n(e,t),e.prototype.setText=function(t){this.text=t},e.prototype.getText=function(){return this.text},e.prototype.drawContent=function(t){if(""!==this.text&&this.style.font){var e=this.getContentRect();t.save(),t.textBaseline="middle",t.textAlign=this.style.textAlign,t.fillStyle=this.style.color.toString(),t.font=this.style.font.toString();var i,r=this.style.textBorder&&this.style.textBorder.isEnable();r&&(t.strokeStyle=this.style.textBorder.color.toString(),t.lineWidth=this.style.textBorder.width),this.style.textShadow&&this.style.textShadow.isEnable()&&(t.shadowBlur=this.style.textShadow.blur,t.shadowColor=this.style.textShadow.color.toString(),t.shadowOffsetX=this.style.textShadow.offsetX,t.shadowOffsetY=this.style.textShadow.offsetY),i=this.style.textAlign===o.TextAlign.RIGHT?e.x+e.width:this.style.textAlign===o.TextAlign.CENTER?e.x+e.width/2:e.x;var n=e.y,s=this.text.split("\n"),a=this.getLineHeight();n+=a/2;for(var h=0,u=s;h<u.length;h++){var c=u[h];""!==c.trim()&&(r?this.style.textBorderPosition===o.TextBorderPosition.OUTER?(t.strokeText(c,i,n),t.fillText(c,i,n)):(t.fillText(c,i,n),t.strokeText(c,i,n)):t.fillText(c,i,n)),n+=a}return t.restore(),!0}},e.prototype.layout=function(){if(t.prototype.layout.call(this),this.style.font){for(var e=this.text.split("\n"),i=this.getContentRect(),r=0,n=0,o=e;n<o.length;n++){var s=o[n];r=Math.max(r,this.style.font.measureTextWidth(s))}r>i.width&&(this.rect.width+=r-i.width);var a=this.getLineHeight()*e.length;a>i.height&&(this.rect.height+=a-i.height)}},e}(i(3).XObject);e.Text=s},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(8),s=i(6),a=function(t){function e(e){var i=t.call(this,e)||this;return e&&e.attributes&&(e.attributes.src&&(i.src=e.attributes.src,s.ResourceRegistry.DefaultInstance.add(i.src,s.ResourceType.IMAGE)),e.attributes.sourcerect&&(i.sourceRect=o.Rect.of(e.attributes.sourcerect))),i}return n(e,t),e.prototype.setSrc=function(t){return this.src=t,this},e.prototype.setSourceRect=function(t){return this.sourceRect=t,this},e.prototype.drawContent=function(t){if(this.src){var e=s.ResourceRegistry.DefaultInstance.get(this.src);if(e){var i=this.getContentRect();this.sourceRect?t.drawImage(e,this.sourceRect.x,this.sourceRect.y,this.sourceRect.width,this.sourceRect.height,i.x,i.y,i.width,i.height):t.drawImage(e,i.x,i.y,i.width,i.height)}}},e}(i(3).XObject);e.Img=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(4);e.Runtime=r.Runtime;var n=i(19);e.Stage=n.Stage;var o=i(23);e.Ticker=o.Ticker;var s=i(20);e.AnimationFactory=s.AnimationFactory;var a=i(7);e.AnimateEvent=a.AnimateEvent;var h=i(7);e.Animation=h.Animation;var u=i(0);e.Linear=u.Linear;var c=i(0);e.PowIn=c.PowIn;var l=i(0);e.PowOut=l.PowOut;var p=i(0);e.PowInOut=p.PowInOut;var d=i(0);e.SineIn=d.SineIn;var f=i(0);e.SineOut=f.SineOut;var g=i(0);e.SineInOut=g.SineInOut;var E=i(0);e.BackIn=E.BackIn;var v=i(0);e.BackOut=v.BackOut;var y=i(0);e.BackInOut=y.BackInOut;var R=i(0);e.CircIn=R.CircIn;var m=i(0);e.CircOut=m.CircOut;var A=i(0);e.CircInOut=A.CircInOut;var T=i(0);e.BounceOut=T.BounceOut;var b=i(0);e.BounceIn=b.BounceIn;var O=i(0);e.BounceInOut=O.BounceInOut;var L=i(0);e.ElasticIn=L.ElasticIn;var w=i(0);e.ElasticOut=w.ElasticOut;var S=i(0);e.ElasticInOut=S.ElasticInOut;var B=i(0);e.AlgorithmFactory=B.AlgorithmFactory;var I=i(21);e.ApngData=I.ApngData,e.ApngParser=I.ApngParser;var N=i(25);e.Matrix2D=N.Matrix2D;var D=i(26);e.Point=D.Point;var C=i(8);e.Rect=C.Rect;var P=i(28);e.RoundRect=P.RoundRect;var M=i(5);e.Color=M.Color;var x=i(1);e.XEvent=x.Event;var F=i(1);e.EventDispatcher=F.EventDispatcher;var U=i(3);e.XActionEvent=U.TouchEvent;var _=i(3);e.XObject=_.XObject;var k=i(29);e.Text=k.Text;var G=i(17);e.Container=G.Container;var V=i(30);e.Img=V.Img;var Y=i(18);e.Sprite=Y.Sprite;var H=i(36);e.Parser=H.HtmlParser;var X=i(6);e.ResourceRegistry=X.ResourceRegistry,e.ResourceType=X.ResourceType;var W=i(14);e.Border=W.Border;var K=i(15);e.Shadow=K.Shadow;var j=i(16);e.LineHeight=j.LineHeight;var z=i(24);e.Font=z.Font;var Q=i(12);e.Background=Q.Background;var q=i(9);e.BaseValue=q.BaseValue;var $=i(2);e.Style=$.Style;var J=i(10);e.EnumUtils=J.EnumUtils;var Z=i(22);e.CRC32=Z.CRC32;var tt=i(38);e.Delay=tt.Delay;var et=i(13);e.StringUtils=et.StringUtils;var it=i(11);e.LayoutUtils=it.LayoutUtils;var rt=i(27);e.DrawUtils=rt.DrawUtils},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,i,r,n,o){this.identifier=t,this.srcElement=e,this.stageX=i,this.stageY=r,this.x=n,this.y=o}return t.prototype.equals=function(t){return this.identifier===t.identifier&&this.srcElement===t.srcElement&&this.stageX===t.stageX&&this.stageY===t.stageY&&this.x===t.x&&this.y===t.y},t.prototype.clone=function(){return new t(this.identifier,this.srcElement,this.stageX,this.stageY,this.x,this.y)},t}();e.TouchItem=r},function(t,e,i){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.NAME_START=0]="NAME_START",t[t.NAME=1]="NAME",t[t.NAME_END=2]="NAME_END",t[t.PARAMETER_START=3]="PARAMETER_START",t[t.PARAMETER=4]="PARAMETER",t[t.PARAMETER_END=5]="PARAMETER_END",t[t.END=6]="END"}(r||(r={}));var n=function(){function t(){}return t.isBlank=function(t){return" "===t||"\t"===t||"\r"===t||"\n"===t},t.parse=function(t,e){void 0===e&&(e=!1);for(var i={name:void 0,arguments:[]},n=r.NAME_START,o="",s=0,a=t.length,h=0;h<a;++h){var u=t[h];switch(n){case r.NAME_START:this.isBlank(u)||(s=h,n=r.NAME);break;case r.NAME:if(this.isBlank(u)||")"===u)return void(e||console.warn("invalid function:"+t));"("===u&&(i.name=t.substring(s,h),n="("===u?r.PARAMETER_START:r.NAME_END);break;case r.NAME_END:if("("===u){n=r.PARAMETER_START;break}if(!this.isBlank(u))return void(e||console.warn("invalid function:"+t));case r.PARAMETER_START:if(this.isBlank(u))break;if('"'===u||"'"===u)n=r.PARAMETER,s=h+1,o=u;else if(")"===u)n=r.END;else{if(","===u)return void(e||console.warn("invalid function:"+t));n=r.PARAMETER,s=h,o=""}break;case r.PARAMETER:""!==o?o===u&&(n=r.PARAMETER_END,i.arguments.push(t.substring(s,h)),o=""):this.isBlank(u)?(n=r.PARAMETER_END,i.arguments.push(t.substring(s,h)),o=""):","===u?(n=r.PARAMETER_START,i.arguments.push(t.substring(s,h)),o=""):")"===u&&(n=r.END,i.arguments.push(t.substring(s,h)),o="");break;case r.PARAMETER_END:if(this.isBlank(u))break;","===u?n=r.PARAMETER_START:")"===u&&(n=r.END);break;case r.END:if(!this.isBlank(u))return void(e||console.warn("invalid function:"+t))}}if(n===r.END)return i;e||console.warn("invalid function:"+t)},t}();e.FunctionParser=n},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(1),s=function(t){function e(e,i,r){var n=t.call(this,i)||this;return n.target=e,n.response=r,n}return n(e,t),e}(o.Event),a=function(t){function e(e,i,r){void 0===i&&(i="GET"),void 0===r&&(r="");var n=t.call(this)||this;return n.url=e,n.method=i,n.responseType=r,n.totalBytes=0,n.loadedBytes=0,n.download(),n}return n(e,t),e.prototype.download=function(){var t=this;this.xhr||(this.xhr=new XMLHttpRequest,this.xhr.responseType=this.responseType,this.xhr.open(this.method,this.url,!0),this.xhr.onload=function(){200===t.xhr.status&&t.dispatchEvent(new s(t,"load",t.xhr.response))},this.xhr.onerror=function(e){t.dispatchEvent(new s(t,"error"))},this.xhr.onprogress=function(e){e.lengthComputable&&(t.loadedBytes=e.loaded,t.totalBytes=e.total,t.dispatchEvent(new s(t,"progress")))},this.xhr.send())},e}(o.EventDispatcher);e.Loader=a},function(t,e,i){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.START=0]="START",t[t.VALUE=1]="VALUE",t[t.FUNC=2]="FUNC"}(r||(r={}));var n=function(){function t(t){void 0===t&&(t=""),this.splitter="",this.splitter=t}return t.prototype.isSplitter=function(t){return" "===t||"\t"===t||"\r"===t||"\n"===t||this.splitter.indexOf(t)>=0},t.prototype.tokenize=function(t){for(var e=t.length,i=[],n=r.START,o="",s=0,a=0;a<e;++a){var h=t[a];switch(n){case r.START:this.isSplitter(h)||(s=a,n=r.VALUE,o="'"===h||'"'===h?h:"");break;case r.VALUE:""!==o?h===o&&(n=r.START,i.push(t.substring(s+1,a))):"("===h?n=r.FUNC:this.isSplitter(h)&&(n=r.START,i.push(t.substring(s,a)));break;case r.FUNC:")"===h&&(n=r.START,i.push(t.substring(s,a+1)))}}return n!==r.START&&(""===o?i.push(t.substring(s)):i.push(t.substring(s+1))),i},t}();e.CSSTokenizer=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,n,o=i(37),s=i(17),a=i(30),h=i(18),u=i(29),c=i(2);!function(t){t[t.START=1]="START",t[t.TAG=2]="TAG",t[t.TEXT=3]="TEXT"}(r||(r={})),function(t){t[t.PENDING=0]="PENDING",t[t.START=1]="START",t[t.NAME=2]="NAME",t[t.EQ=3]="EQ",t[t.VALUE=4]="VALUE",t[t.VALUE_STARTED=5]="VALUE_STARTED"}(n||(n={}));var l=function(){function t(){}return t.registerTag=function(t,e){this.tagMap[t.toLowerCase()]=e},t.prototype.parse=function(t){for(var e=[],i=0,r=this.parseHtml(t);i<r.length;i++){var n=r[i],o=this.node2Component(n);o&&e.push(o)}return e},t.prototype.parseHtml=function(t){for(var e=[],i=[],o=t.length,s=r.START,a=0,h=null,u=!1,c=null,l=n.PENDING,p=0,d="",f=null,g={},E=0;E<o;++E){var v=t[E];switch(s){case r.START:"<"===v?(a=E,h=null,s=r.TAG,l=n.PENDING,p=0,d="",f=null,g={}):(a=E,s=r.TEXT);break;case r.TAG:if(h||!this.isSplitter(v)&&">"!==v&&"/"!==v&&'"'!==v&&"'"!==v||(h=t.substring(a+1,E),l=n.START),null===h)break;if(u?v===c&&(u=!1):"'"!==v&&'"'!==v||(u=!0,c=v),">"!==v||u)switch(l){case n.START:this.isSplitter(v)||"/"===v||(p=E,l=n.NAME),f=null;break;case n.NAME:this.isSplitter(v)?(d=t.substring(p,E),l=n.EQ):"="===v&&(d=t.substring(p,E),p=E+1,l=n.VALUE);break;case n.EQ:if(this.isSplitter(v))break;"="===v?(l=n.VALUE,p=E+1):(this.addAttr(g,d,""),l=n.START);break;case n.VALUE:if(this.isSplitter(v))break;'"'===v||"'"===v?(f=v,p=E+1):(f=null,p=E),l=n.VALUE_STARTED;break;case n.VALUE_STARTED:var y=!1,R=E;f?v===f&&(y=!0):!f&&this.isSplitter(v)&&(y=!0),y&&(this.addAttr(g,d,t.substring(p,R)),d="",l=n.START)}else{switch(l){case n.NAME:d=t.substring(p,E),this.addAttr(g,d,"");break;case n.EQ:this.addAttr(g,d,"");break;case n.VALUE:case n.VALUE_STARTED:this.addAttr(g,d,t.substring(p,E))}if("!--"===h.substring(0,3)){E-a>=6&&"--"===t.substring(E-2,E)&&(s=r.START);break}if(h&&"/"===h[0]){h=h.substring(1);for(var m=!1,A=0,T=i;A<T.length;A++){T[A].tag===h&&(m=!0)}if(m)for(;i.length>0;){if(!(b=i.pop())||b.tag===h)break}s=r.START}else{var b={children:[],tag:h,attributes:g};g={},i.length>0?(b.parent=i[i.length-1],i[i.length-1].children.push(b)):e.push(b),this.isCloseTag(h)||i.push(b),s=r.START}}break;case r.TEXT:if("<"===v){if(a<E)if((O=t.substring(a,E).trim()).length>0){b={children:[],tag:"TEXT",text:O,attributes:{}};i.length>0?(b.parent=i[i.length-1],i[i.length-1].children.push(b)):e.push(b)}s=r.TAG,h=null,a=E,l=n.PENDING,p=0,d="",f=null,g={}}}}switch(s){case r.TEXT:var O;if(a<E)if((O=t.substring(a,E).trim()).length>0){b={children:[],tag:"TEXT",text:O,attributes:{}};i.length>0?(b.parent=i[i.length-1],i[i.length-1].children.push(b)):e.push(b)}}for(var L=0,w=e;L<w.length;L++){b=w[L];this.trimTextNode(b)}return e},t.prototype.trimTextNode=function(t){if(1===t.children.length&&"TEXT"===t.children[0].tag)t.text=t.children[0].text,t.children.length=0;else for(var e=0,i=t.children;e<i.length;e++){var r=i[e];this.trimTextNode(r)}},t.prototype.node2Component=function(e){var i=t.tagMap[e.tag.toLowerCase()];if(i){var r=c.Style.of(e.attributes.style||""),n=new i({attributes:e.attributes,style:r,text:e.text});if(e.children.length>0)if(n instanceof s.Container)for(var o=0,a=e.children;o<a.length;o++){var h=a[o],u=this.node2Component(h);u&&n.addChild(u)}else console.warn("component is not a container:"+n);return n}console.warn("unknow tag:"+e.tag.toLowerCase())},t.prototype.isSplitter=function(t){return" "===t||"\r"===t||"\n"===t||"\t"===t},t.prototype.isCloseTag=function(t){return"img"===t},t.prototype.addAttr=function(t,e,i){t[e.toLowerCase()]=i},t.tagMap={},t}();e.HtmlParser=l,l.registerTag("text",u.Text),l.registerTag("container",s.Container),l.registerTag("div",s.Container),l.registerTag("img",a.Img),l.registerTag("sprite",h.Sprite),l.registerTag("apng",o.Apng)},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(6),s=function(t){function e(e){var i=t.call(this,e)||this;return e&&e.attributes&&e.attributes.src&&o.ResourceRegistry.DefaultInstance.add(e.attributes.src,o.ResourceType.APNG).then((function(t){i.setSpriteSheet(t).play()})),i}return n(e,t),e}(i(18).Sprite);e.Apng=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.delayHandler=0,this.paused=!1,this.delayTime=t}return t.prototype.call=function(t){this.func=t,this.paused||(this.delayHandler&&(clearTimeout(this.delayHandler),this.delayHandler=0),this.start())},t.prototype.pause=function(){this.delayHandler&&(clearTimeout(this.delayHandler),this.delayHandler=0),this.paused=!0},t.prototype.resume=function(){this.paused&&(this.paused=!1,this.func&&this.start())},t.prototype.cancel=function(){this.delayHandler&&(clearTimeout(this.delayHandler),this.delayHandler=0),this.func=void 0,this.paused=!1},t.prototype.start=function(){var t=this;this.func&&(this.delayHandler=setTimeout((function(){t.delayHandler=0,t.func&&(t.func(),t.func=void 0)}),this.delayTime))},t}();e.Delay=r}])}));